<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>backyardmsgboxmgr.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>backyardmsgboxmgr.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;BackyardMsgBoxMgr&quot;)

slot0.Init = function(slot0, slot1, slot2)
	slot0.view = slot1
	slot0.loaded = false
	slot3 = PoolMgr.GetInstance()

	slot3:GetUI(&quot;BackYardMsgBox&quot;, true, function (slot0)
		if uv0.exited then
			return
		end

		setParent(slot0, pg.UIMgr.GetInstance().UIMain)

		uv0._go = slot0
		uv0._tf = slot0.transform
		uv0.frame = findTF(uv0._tf, &quot;msg&quot;)
		uv0.closeBtn = findTF(uv0._tf, &quot;frame/close&quot;)
		uv0.context = findTF(uv0._tf, &quot;msg/Text&quot;):GetComponent(typeof(Text))
		uv0.cancelBtn = findTF(uv0._tf, &quot;msg/btns/btn2&quot;)
		uv0.confirmBtn = findTF(uv0._tf, &quot;msg/btns/btn1&quot;)
		uv0.helpPanel = findTF(uv0._tf, &quot;help_panel&quot;)
		uv0._helpList = uv0.helpPanel:Find(&quot;list&quot;)

		setText(uv0._tf:Find(&quot;frame/title&quot;), i18n(&quot;words_information&quot;))
		setText(uv0.cancelBtn:Find(&quot;Text&quot;), i18n(&quot;word_cancel&quot;))
		setText(uv0.confirmBtn:Find(&quot;Text&quot;), i18n(&quot;battle_result_confirm&quot;))

		uv0.loaded = true

		setActive(uv0._tf, false)
		uv1()
	end)
	pg.DelegateInfo.New(slot0.view)
end

slot0.Show = function(slot0, slot1)
	setActive(slot0.frame, true)
	setActive(slot0.helpPanel, false)

	if not slot0.loaded then
		return
	end

	slot0.isShowMsg = true
	slot0.context.text = slot1.content
	slot0.onYes = slot1.onYes
	slot0.onNo = slot1.onNo

	slot0:Common(slot1)
end

slot0.Common = function(slot0, slot1)
	onButton(slot0.view, slot0.confirmBtn, function ()
		if uv0.onYes then
			uv0.onYes()
		end

		uv0:Hide()
	end, slot1.yesSound or SFX_PANEL)
	onButton(slot0.view, slot0._tf, function ()
		uv0:Hide()
	end, SFX_PANEL)
	onButton(slot0.view, slot0.closeBtn, function ()
		uv0:Hide()
	end, SFX_PANEL)
	onButton(slot0.view, slot0.cancelBtn, function ()
		if uv0.onNo then
			uv0.onNo()
		end

		uv0:Hide()
	end, SFX_PANEL)
	setActive(slot0.cancelBtn, not slot1.hideNo)
	setActive(slot0._tf, true)
	pg.UIMgr.GetInstance():OverlayPanel(slot0._tf, {
		weight = LayerWeightConst.TOP_LAYER
	})
end

slot0.ShowHelp = function(slot0, slot1)
	setActive(slot0.frame, false)
	setActive(slot0.helpPanel, true)

	for slot6 = #slot1.helps, slot0._helpList.childCount - 1 do
		Destroy(slot0._helpList:GetChild(slot6))
	end

	for slot6 = slot0._helpList.childCount, #slot2 - 1 do
		cloneTplTo(slot0._helpTpl, slot0._helpList)
	end

	for slot6, slot7 in ipairs(slot2) do
		slot8 = slot0._helpList:GetChild(slot6 - 1)

		setActive(slot8, true)
		setActive(slot8:Find(&quot;icon&quot;), slot7.icon)
		setActive(findTF(slot8, &quot;line&quot;), slot7.line)

		slot10 = slot8:Find(&quot;richText&quot;):GetComponent(&quot;RichText&quot;)

		setText(slot8, HXSet.hxLan(slot7.info and SwitchSpecialChar(slot7.info, true) or &quot;&quot;))
	end

	slot0:Common(slot1)
end

slot0.Hide = function(slot0)
	slot0.onYes = nil
	slot0.onNo = nil
	slot0.isShowMsg = false

	setActive(slot0._tf, false)
	pg.UIMgr.GetInstance():UnOverlayPanel(slot0._tf, pg.UIMgr.GetInstance().UIMain)
end

slot0.Destroy = function(slot0)
	slot0.exited = true

	if slot0.isShowMsg then
		slot0:Hide()
	end

	PoolMgr.GetInstance():ReturnUI(&quot;BackYardMsgBox&quot;, slot0._go)
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>