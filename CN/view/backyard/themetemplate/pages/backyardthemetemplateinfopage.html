<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>backyardthemetemplateinfopage.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>backyardthemetemplateinfopage.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;BackYardThemeTemplateInfoPage&quot;, import(&quot;...Shop.pages.BackYardThemeInfoPage&quot;))

slot0.getUIName = function(slot0)
	return &quot;BackYardTemplateInfoPage&quot;
end

slot0.OnInit = function(slot0)
	uv0.super.OnInit(slot0)
	onButton(slot0, slot0.purchaseBtn, function ()
		uv0.contextData.themeMsgBox:ExecuteAction(&quot;SetUp&quot;, uv0.template, uv0.dorm, uv0.player)
	end, SFX_PANEL)
	setActive(slot0.icon, false)

	slot0.iconRaw = slot0:findTF(&quot;frame/icon/Image_raw&quot;):GetComponent(typeof(RawImage))

	setActive(slot0.leftArrBtn, false)
	setActive(slot0.rightArrBtn, false)
end

slot0.OnInitCard = function(slot0, slot1)
	slot2 = BackYardThemTemplateFurnitureCard.New(slot1)

	onButton(slot0, slot2._go, function ()
		if uv0.furniture:canPurchase() and uv0.furniture:inTime() and (uv0.furniture:canPurchaseByGem() or uv0.furniture:canPurchaseByDormMoeny()) then
			uv1.contextData.furnitureMsgBox:ExecuteAction(&quot;SetUp&quot;, uv0.furniture, uv1.dorm, uv1.target)
		end
	end, SFX_PANEL)

	slot0.cards[slot1] = slot2
end

slot0.SetUp = function(slot0, slot1, slot2, slot3)
	slot0:Show()

	slot0.template = slot1
	slot0.dorm = slot2
	slot0.target = slot3
	slot0.player = getProxy(PlayerProxy):getData()

	slot0:InitFurnitureList()
	slot0:UpdateThemeInfo()
	slot0:UpdateRes()
end

slot0.InitFurnitureList = function(slot0)
	slot0.displays = {}
	slot2 = slot0.dorm:GetPurchasedFurnitures()

	for slot6, slot7 in pairs(slot0.template:GetFurnitureCnt()) do
		if pg.furniture_data_template[slot6] then
			table.insert(slot0.displays, slot2[slot6] or Furniture.New({
				id = slot6
			}))
		end
	end

	slot3 = function(slot0)
		if slot0:inTime() then
			if slot0:canPurchaseByGem() and not slot0:canPurchaseByDormMoeny() then
				return 1
			elseif slot0:canPurchaseByGem() and slot0:canPurchaseByDormMoeny() then
				return 2
			else
				return 3
			end
		else
			return 4
		end
	end

	table.sort(slot0.displays, function (slot0, slot1)
		if (slot0:canPurchase() and 1 or 0) == (slot1:canPurchase() and 1 or 0) then
			return uv0(slot0) &lt; uv0(slot1)
		else
			return slot3 &lt; slot2
		end
	end)
	slot0.scrollRect:SetTotalCount(#slot0.displays)
end

slot0.UpdateThemeInfo = function(slot0)
	slot1 = slot0.template
	slot0.nameTxt.text = slot1:GetName()

	setActive(slot0.iconRaw.gameObject, false)
	BackYardThemeTempalteUtil.GetTexture(slot1:GetTextureName(), slot1:GetImageMd5(), function (slot0)
		if not IsNil(uv0.iconRaw) and slot0 then
			uv0.iconRaw.texture = slot0

			setActive(uv0.iconRaw.gameObject, true)
		end
	end)

	slot0.desc.text = slot1:GetDesc()

	slot0:UpdatePurchaseBtn()
end

slot0.UpdatePurchaseBtn = function(slot0)
	slot1 = slot0.template:OwnThemeTemplateFurniture()
	slot3 = false

	for slot7, slot8 in pairs(slot0.template:GetFurnitureCnt()) do
		slot10 = slot0.dorm:GetOwnFurnitureCount(slot7)

		if Furniture.New({
			id = slot7
		}):inTime() and slot9:canPurchaseByDormMoeny() and slot10 &lt; slot8 then
			slot3 = true

			break
		end
	end

	setActive(slot0.purchaseBtn, not slot1 and slot3)
	setActive(slot0.purchaseAllBtn, false)
end

slot0.OnDestroy = function(slot0)
	uv0.super.OnDestroy(slot0)

	if not IsNil(slot0.iconRaw.texture) then
		Object.Destroy(slot0.iconRaw.texture)

		slot0.iconRaw.texture = nil
	end
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>