<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>propertypanel.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>propertypanel.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;PropertyPanel&quot;)
slot1 = 24.5
slot2 = {
	&quot;cannon&quot;,
	&quot;torpedo&quot;,
	&quot;air&quot;,
	&quot;dodge&quot;,
	&quot;antiaircraft&quot;,
	&quot;durability&quot;
}
slot3 = {
	E = 1,
	C = 3,
	A = 5,
	D = 2,
	S = 6,
	B = 4
}
slot4 = {
	{
		0,
		70.8
	},
	{
		-169.6,
		37.7
	},
	{
		-210.4,
		-49.8
	},
	{
		-0.9,
		-111.1
	},
	{
		210.1,
		-49.6
	},
	{
		169.9,
		38.4
	}
}
slot5 = 1
slot6 = 3
slot7 = 4
slot8 = 2
slot9 = 5
slot0.TypeRotation = 1
slot0.TypeFlat = 2

slot0.Ctor = function(slot0, slot1, slot2)
	uv0 = slot2 or uv0
	slot0.tf = slot1
	slot0.propertyTFs = findTF(slot0.tf, &quot;property&quot;)
	slot0.drawTF = findTF(slot0.tf, &quot;property/draw&quot;)
	slot0.drawPolygon = slot0.drawTF:GetComponent(&quot;DrawPolygon&quot;)
	slot0.drawTF2 = findTF(slot0.tf, &quot;property/draw_2&quot;)

	if slot0.drawTF2 then
		slot0.drawPolygon2 = slot0.drawTF2:GetComponent(&quot;DrawPolygon&quot;)
	end
end

slot0.initProperty = function(slot0, slot1, slot2)
	slot0.type = slot2 or uv0.TypeRotation

	slot0:initRadar(ShipGroup.GetGroupConfig(Ship.getGroupIdByConfigId(slot1)).property_hexagon)
end

slot0.initRadar = function(slot0, slot1)
	slot3 = {}
	slot7 = 0
	slot8 = 0

	table.insert({}, Vector3(slot7, slot8, 0))

	for slot7, slot8 in ipairs(uv0) do
		slot0:setSpriteTo(&quot;resources/&quot; .. slot1[slot7], slot0.propertyTFs:Find(slot8 .. &quot;_grade&quot;):Find(&quot;grade&quot;), true)

		if slot0.type == uv1.TypeRotation then
			table.insert(slot2, slot0:getGradeCoordinate(slot10, slot7))
		elseif slot0.type == uv1.TypeFlat then
			table.insert(slot2, slot0:getGradeCoordinate1(slot10, slot7))
		end

		table.insert(slot3, 0)
		table.insert(slot3, slot7)

		if slot7 + 1 &gt; #uv0 then
			table.insert(slot3, 1)
		else
			table.insert(slot3, slot7 + 1)
		end

		if findTF(slot9, &quot;Text&quot;) and findTF(slot9, &quot;Text&quot;):GetComponent(typeof(Text)) then
			setText(findTF(slot9, &quot;Text&quot;), i18n(&quot;word_attr_&quot; .. slot8))
		end
	end

	slot0.drawPolygon:draw(slot2, slot3)

	if slot0.drawPolygon2 then
		slot0.drawPolygon2:draw(slot2, slot3)
	end
end

slot0.getGradeCoordinate = function(slot0, slot1, slot2)
	return Vector3(0.163 * uv0[slot1] * uv1[slot2][1], 0.163 * uv0[slot1] * uv1[slot2][2], 0)
end

slot0.getGradeCoordinate1 = function(slot0, slot1, slot2)
	slot3 = 0.66 * uv0[slot1]

	if slot2 == uv1 then
		return Vector3(-slot3 * uv2, 0, 0)
	elseif slot2 == uv3 then
		return Vector3(slot3 * uv2, 0, 0)
	else
		slot4 = 60
		slot5 = slot3 * uv2
		slot6 = math.sin(math.rad(slot4)) * slot5
		slot7 = math.cos(math.rad(slot4)) * slot5

		if slot2 == uv4 then
			slot7 = -slot7
		elseif slot2 == uv5 then
			slot7 = -slot7
			slot6 = -slot6
		elseif slot2 == uv6 then
			slot6 = -slot6
		end

		return Vector3(slot7, slot6, 0)
	end
end

slot0.setSpriteTo = function(slot0, slot1, slot2, slot3)
	slot2:GetComponent(typeof(Image)).sprite = findTF(slot0.tf, slot1):GetComponent(typeof(Image)).sprite

	if slot3 then
		slot4:SetNativeSize()
	end
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>