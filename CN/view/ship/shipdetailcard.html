<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>shipdetailcard.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>shipdetailcard.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;ShipDetailCard&quot;)
slot1 = 0.5

slot0.Ctor = function(slot0, slot1, slot2)
	slot0.go = slot1
	slot0.tr = slot1.transform
	slot0.tagFlags = slot2 or {}
	slot0.toggle = GetOrAddComponent(slot0.tr, typeof(Toggle))
	slot0.content = findTF(slot0.tr, &quot;content&quot;).gameObject
	slot0.quit = findTF(slot0.tr, &quot;quit_button&quot;).gameObject
	slot0.detail = findTF(slot0.tr, &quot;content/dockyard/detail&quot;).gameObject
	slot0.detailLayoutTr = findTF(slot0.detail, &quot;layout&quot;)
	slot0.imageQuit = slot0.quit:GetComponent(&quot;Image&quot;)
	slot0.imageFrame = findTF(slot0.tr, &quot;content/front/frame&quot;):GetComponent(&quot;Image&quot;)
	slot0.labelName = findTF(slot0.tr, &quot;content/info/name_mask/name&quot;)
	slot0.npc = findTF(slot0.tr, &quot;content/dockyard/npc&quot;)

	setActive(slot0.npc, false)

	slot0.lock = findTF(slot0.tr, &quot;content/dockyard/container/lock&quot;)
	slot0.maskStatusOb = findTF(slot0.tr, &quot;content/front/status_mask&quot;)
	slot0.iconStatus = findTF(slot0.tr, &quot;content/dockyard/status&quot;)
	slot0.iconStatusTxt = findTF(slot0.tr, &quot;content/dockyard/status/Text&quot;):GetComponent(&quot;Text&quot;)
	slot0.selectedGo = findTF(slot0.tr, &quot;content/front/selected&quot;).gameObject
	slot0.energyTF = findTF(slot0.tr, &quot;content/dockyard/container/energy&quot;)
	slot0.proposeTF = findTF(slot0.tr, &quot;content/dockyard/propose&quot;)

	slot0.selectedGo:SetActive(false)

	slot0.hpBar = findTF(slot0.tr, &quot;content/dockyard/blood&quot;)
end

slot0.update = function(slot0, slot1)
	if slot0.shipVO ~= slot1 then
		slot0.shipVO = slot1

		slot0:flush()
	end
end

slot0.updateSelected = function(slot0, slot1)
	slot0.selected = slot1

	slot0.selectedGo:SetActive(slot0.selected)

	if slot0.selected then
		if not slot0.selectedTw then
			slot0.selectedTw = LeanTween.alpha(slot0.selectedGo.transform, 1, uv0):setFrom(0):setEase(LeanTweenType.easeInOutSine):setLoopPingPong()
		end
	elseif slot0.selectedTw then
		LeanTween.cancel(slot0.selectedTw.uniqueId)

		slot0.selectedTw = nil
	end
end

slot0.flush = function(slot0)
	if tobool(slot0.shipVO) then
		if not slot1:getConfigTable() then
			return
		end

		flushShipCard(slot0.tr, slot1)
		setActive(slot0.npc, slot1:isActivityNpc())

		if slot0.lock then
			slot0.lock.gameObject:SetActive(slot1:GetLockState() == Ship.LOCK_STATE_LOCK)
		end

		if slot1.energy &lt;= Ship.ENERGY_MID then
			if not GetSpriteFromAtlas(&quot;energy&quot;, slot1:getEnergyPrint()) then
				warning(&quot;找不到疲劳&quot;)
			end

			setImageSprite(slot0.energyTF, slot6)
		end

		setActive(slot0.energyTF, slot5)
		setScrollText(slot0.labelName, slot1:getName())

		if ShipStatus.ShipStatusToTag(slot1, slot0.tagFlags) then
			slot0.iconStatusTxt.text = slot6[3]

			GetSpriteFromAtlasAsync(slot6[1], slot6[2], function (slot0)
				setImageSprite(uv0.iconStatus, slot0, true)
				setActive(uv0.iconStatus, true)

				if uv1[1] == &quot;shipstatus&quot; then
					uv0.iconStatus.sizeDelta = Vector2(195, 36)
					uv0.iconStatusTxt.fontSize = 30
				end
			end)
		else
			setActive(slot0.iconStatus, false)
		end

		slot7, slot8 = slot1:getIntimacyIcon()

		setActive(slot0.proposeTF, tobool(slot8 and not slot4))
	end

	slot0.content:SetActive(slot2)
end

slot0.clear = function(slot0)
	if slot0.selectedTw then
		LeanTween.cancel(slot0.selectedTw.uniqueId)

		slot0.selectedTw = nil
	end
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>