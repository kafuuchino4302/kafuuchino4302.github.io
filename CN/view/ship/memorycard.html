<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>memorycard.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>memorycard.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;MemoryCard&quot;)

slot0.Ctor = function(slot0, slot1)
	slot0.go = slot1
	slot0.tf = slot1.transform
	slot0.lock = findTF(slot0.tf, &quot;lock&quot;)
	slot0.txCondition = findTF(slot0.lock, &quot;condition&quot;)
	slot0.normal = findTF(slot0.tf, &quot;normal&quot;)
	slot0.txTitle = findTF(slot0.normal, &quot;title&quot;)
	slot0.txSubtitle = findTF(slot0.normal, &quot;subtitle&quot;)
	slot0.group = findTF(slot0.tf, &quot;group&quot;)
	slot0.groupTitle = findTF(slot0.group, &quot;title&quot;)
	slot0.groupCount = findTF(slot0.group, &quot;count&quot;)
	slot0.itemIndexTF = findTF(slot0.tf, &quot;id&quot;)
end

slot0.update = function(slot0, slot1, slot2)
	slot0.isGroup = slot1
	slot0.info = slot2

	slot0:flush()
end

slot0.flush = function(slot0)
	setActive(slot0.lock, false)
	setActive(slot0.normal, false)
	setActive(slot0.group, false)

	if slot0.isGroup then
		setActive(slot0.group, true)
		setText(slot0.groupTitle, slot0.info.title)
		GetImageSpriteFromAtlasAsync(&quot;memoryicon/&quot; .. slot0.info.icon, &quot;&quot;, slot0.group)

		slot1 = 0
		slot2 = #slot0.info.memories

		for slot6, slot7 in ipairs(slot0.info.memories) do
			if pg.memory_template[slot7].is_open == 1 or pg.NewStoryMgr.GetInstance():IsPlayed(slot8.story, true) then
				slot1 = slot1 + 1
			end
		end

		setText(slot0.groupCount, slot1 .. &quot;/&quot; .. slot2)
	elseif slot0.info.is_open == 1 or pg.NewStoryMgr.GetInstance():IsPlayed(slot0.info.story, true) then
		setActive(slot0.normal, true)
		setText(slot0.txTitle, slot0.info.title)
		setText(slot0.txSubtitle, slot0.info.subtitle)
		GetImageSpriteFromAtlasAsync(&quot;memoryicon/&quot; .. slot0.info.icon, &quot;&quot;, slot0.normal)
	else
		setActive(slot0.lock, true)
		setText(slot0.txCondition, slot0.info.condition)
	end

	if slot0.itemIndexTF then
		setActive(slot0.itemIndexTF, not slot0.isGroup)

		if not slot0.isGroup and slot0.info.index then
			setText(slot0.itemIndexTF, string.format(&quot;%02u&quot;, slot0.info.index))
		end
	end
end

slot0.clear = function(slot0)
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>