<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dockyardfriend.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>dockyardfriend.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;DockyardFriend&quot;)
slot0.DetailType0 = 0
slot0.DetailType1 = 1
slot0.DetailType2 = 2
slot1 = 0.5

slot0.Ctor = function(slot0, slot1)
	slot0.go = slot1
	slot0.tf = slot1.transform
	slot0.nameTF = slot0.tf:Find(&quot;content/request_info/name&quot;):GetComponent(typeof(Text))
	slot0.levelTF = slot0.tf:Find(&quot;content/request_info/lv_bg/lv/Text&quot;):GetComponent(typeof(Text))
	slot0.iconTF = slot0.tf:Find(&quot;content/icon_contaon/icon&quot;):GetComponent(typeof(Image))
	slot0.starsTF = slot0.tf:Find(&quot;content/icon_contaon/stars&quot;)
	slot0.starTF = slot0.tf:Find(&quot;content/icon_contaon/stars/star&quot;)
	slot0.date = slot0.tf:Find(&quot;content/date&quot;):GetComponent(typeof(Text))
	slot0.manifestoTF = slot0.tf:Find(&quot;content/request_content/bg/Text&quot;):GetComponent(typeof(Text))
	slot0.powerTF = slot0.tf:Find(&quot;content/item/value&quot;)
	slot0.propose = slot0.tf:Find(&quot;content/icon_contaon/propose&quot;)
	slot0.content = slot0.tf:Find(&quot;content&quot;)
	slot0.detail = slot0.tf:Find(&quot;detail&quot;)
	slot0.detailLayoutTr = findTF(slot0.detail, &quot;layout&quot;)
	slot0.quit = slot0.tf:Find(&quot;quit_button&quot;)
	slot0.selectedGo = findTF(slot0.tf, &quot;selected&quot;).gameObject

	slot0.selectedGo:SetActive(false)
end

slot0.update = function(slot0, slot1, slot2)
	if slot0.shipVO ~= slot1 then
		slot0.shipVO = slot1

		if tobool(slot1) then
			slot0.friendVO = slot2[slot1.playerId]

			slot0:flush()
			slot0:flushDetail()
		end

		setActive(slot0.content, slot3)
		setActive(slot0.quit, not slot3)
	end
end

slot0.updateSelected = function(slot0, slot1)
	slot0.selected = slot1

	slot0.selectedGo:SetActive(slot0.selected)

	if slot0.selected then
		if not slot0.selectedTwId then
			slot0.selectedTwId = LeanTween.alpha(slot0.selectedGo.transform, 1, uv0):setFrom(0):setEase(LeanTweenType.easeInOutSine):setLoopPingPong().uniqueId
		end
	elseif slot0.selectedTwId then
		LeanTween.cancel(slot0.selectedTwId)

		slot0.selectedTwId = nil
	end
end

slot0.flush = function(slot0)
	if slot0.shipVO then
		LoadSpriteAsync(&quot;qicon/&quot; .. slot0.shipVO:getPainting(), function (slot0)
			uv0.iconTF.sprite = slot0
		end)
		setActive(slot0.propose, slot0.shipVO:ShowPropose())

		for slot6 = slot0.starsTF.childCount, pg.ship_data_statistics[slot0.shipVO.configId].star - 1 do
			cloneTplTo(slot0.starTF, slot0.starsTF)
		end

		for slot6 = 1, slot2 do
			setActive(slot0.starsTF:GetChild(slot6 - 1), slot6 &lt;= slot1.star)
		end
	end

	if slot0.friendVO then
		slot0.nameTF.text = slot0.friendVO.name
		slot0.levelTF.text = slot0.friendVO.level
		slot0.manifestoTF.text = slot0.friendVO.manifesto or &quot;&quot;

		if slot0.friendVO.online == Friend.ONLINE then
			slot0.date.text = i18n(&quot;word_online&quot;)
		else
			slot0.date.text = getOfflineTimeStamp(slot0.friendVO.preOnLineTime)
		end
	end
end

slot0.updateDetail = function(slot0, slot1)
	slot0.detailType = slot1

	slot0:flushDetail()
end

slot0.flushDetail = function(slot0)
	if tobool(slot0.shipVO) and uv0.DetailType0 &lt; slot0.detailType then
		slot3 = slot1:getShipProperties()
		slot4 = {
			&quot;name&quot;,
			AttributeType.Durability,
			AttributeType.Cannon,
			AttributeType.Torpedo,
			AttributeType.Air,
			AttributeType.AntiAircraft,
			AttributeType.ArmorType,
			AttributeType.Reload,
			AttributeType.Dodge
		}
		slot5 = slot1:getShipCombatPower()

		for slot9 = 1, 6 do
			slot10 = slot0.detailLayoutTr:GetChild(slot9 - 1)
			slot11 = slot10:GetChild(0):GetComponent(&quot;Text&quot;)
			slot12 = slot10:GetChild(1):GetComponent(&quot;Text&quot;)

			if slot0.detailType == uv0.DetailType1 then
				if slot9 == 1 then
					slot11.alignment = TextAnchor.MiddleCenter
					slot11.text = slot0.shipVO:getName()
					slot12.text = &quot;&quot;
				else
					slot13 = slot4[slot9]
					slot11.text = AttributeType.Type2Name(slot13)
					slot12.text = tostring(math.floor(slot3[slot13]))
				end
			elseif slot0.detailType == uv0.DetailType2 then
				if slot9 == 6 then
					slot11.text = &quot;&lt;color=#A9F548FF&gt;&quot; .. i18n(&quot;word_synthesize_power&quot;) .. &quot;&lt;/color&gt;&quot;
					slot12.text = tostring(slot5)
				elseif slot9 == 5 then
					slot11.text = &quot;&lt;color=#A9F548FF&gt;&quot; .. i18n(&quot;word_level&quot;) .. &quot;&lt;/color&gt;&quot;
					slot12.text = &quot;Lv.&quot; .. slot0.shipVO.level
				elseif slot9 == 1 then
					slot11.alignment = TextAnchor.MiddleCenter
					slot11.text = slot1:getShipArmorName()
					slot12.text = &quot;&quot;
				elseif slot9 == 4 then
					slot11.text = AttributeType.Type2Name(AttributeType.Expend)
					slot12.text = tostring(math.floor(slot1:getBattleTotalExpend()))
				else
					slot13 = slot4[slot9 + 6]
					slot11.text = AttributeType.Type2Name(slot13)
					slot12.text = tostring(math.floor(slot3[slot13]))
				end
			end
		end
	end

	setActive(slot0.detail, slot2 and uv0.DetailType0 &lt; slot0.detailType)
end

slot0.clear = function(slot0)
	if slot0.selectedTwId then
		LeanTween.cancel(slot0.selectedTwId)

		slot0.selectedTwId = nil
	end
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>