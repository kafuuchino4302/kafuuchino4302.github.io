<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mainplayerinfobtn4mellow.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>mainplayerinfobtn4mellow.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;MainPlayerInfoBtn4Mellow&quot;, import(&quot;.MainPlayerInfoBtn&quot;))

slot0.Ctor = function(slot0, slot1, slot2)
	uv0.super.super.Ctor(slot0, slot1, slot2)
	pg.DelegateInfo.New(slot0)

	slot0.playerInfoBtn = findTF(slot0._tf, &quot;name_bg&quot;)
	slot3 = findTF(slot0._tf, &quot;name_bg/Text&quot;)
	slot0.playerNameTxt = slot3:GetComponent(typeof(Text))
	slot0.playerLevelTr = findTF(slot0._tf, &quot;name_bg/level/Text&quot;)
	slot3 = findTF(slot0._tf, &quot;name_bg/level/Text&quot;)
	slot0.playerLevelTxt = slot3:GetComponent(typeof(Text))
	slot3 = findTF(slot0._tf, &quot;name_bg/level/mask/Text&quot;)
	slot0.expTxt = slot3:GetComponent(typeof(Text))
	slot3 = findTF(slot0._tf, &quot;res/gold/max&quot;)
	slot0.goldMax = slot3:GetComponent(typeof(Text))
	slot3 = findTF(slot0._tf, &quot;res/gold/Text&quot;)
	slot0.goldValue = slot3:GetComponent(typeof(Text))
	slot3 = findTF(slot0._tf, &quot;res/oil/max&quot;)
	slot0.oilMax = slot3:GetComponent(typeof(Text))
	slot3 = findTF(slot0._tf, &quot;res/oil/Text&quot;)
	slot0.oilValue = slot3:GetComponent(typeof(Text))
	slot3 = findTF(slot0._tf, &quot;res/gem/Text&quot;)
	slot0.gemValue = slot3:GetComponent(typeof(Text))
	slot0.expTr = findTF(slot0._tf, &quot;name_bg/level/mask&quot;)

	onButton(slot0, findTF(slot0._tf, &quot;res/gold&quot;), function ()
		pg.playerResUI:ClickGold()
	end, SFX_PANEL)
	onButton(slot0, findTF(slot0._tf, &quot;res/oil&quot;), function ()
		pg.playerResUI:ClickOil()
	end, SFX_PANEL)
	onButton(slot0, findTF(slot0._tf, &quot;res/gem&quot;), function ()
		pg.playerResUI:ClickGem()
	end, SFX_PANEL)
	slot0:bind(PlayerProxy.UPDATED, function ()
		uv0:Flush()
	end)
	slot0:bind(GAME.GUILD_GET_USER_INFO_DONE, function ()
		uv0:Flush()
	end)
	slot0:bind(GAME.GET_PUBLIC_GUILD_USER_DATA_DONE, function ()
		uv0:Flush()
	end)
end

slot0.Flush = function(slot0, slot1)
	uv0.super.Flush(slot0, slot1)
	slot0:UpdateRes()
end

slot0.UpdateRes = function(slot0)
	PlayerResUI.StaticFlush(getProxy(PlayerProxy):getRawData(), slot0.goldMax, slot0.goldValue, slot0.oilMax, slot0.oilValue, slot0.gemValue)
end

slot0.UpdateExp = function(slot0)
	slot1 = 0
	slot2 = getProxy(PlayerProxy):getRawData()
	slot0.playerLevelTxt.text = slot2.level
	slot0.expTxt.text = slot2.level
	slot0.expTr.sizeDelta = Vector2(70, 34 * (slot2.level == slot2:getMaxLevel() and 1 or slot2.exp / getConfigFromLevel1(pg.user_level, slot2.level).exp_interval))
end

slot0.Dispose = function(slot0)
	uv0.super.Dispose(slot0)
	pg.DelegateInfo.Dispose(slot0)
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>