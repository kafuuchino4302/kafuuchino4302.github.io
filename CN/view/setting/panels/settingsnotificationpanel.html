<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>settingsnotificationpanel.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>settingsnotificationpanel.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;SettingsNotificationPanel&quot;, import(&quot;.SettingsBasePanel&quot;))
slot0.UPDATE_ALARM_PANEL = &quot;SettingsNotificationPanel.UPDATE_ALARM_PANEL&quot;

slot0.GetUIName = function(slot0)
	return &quot;SettingsNotifications&quot;
end

slot0.GetTitle = function(slot0)
	return i18n(&quot;Settings_title_Notification&quot;)
end

slot0.GetTitleEn = function(slot0)
	return &quot;  / ENABLE NOTIFICATIONS&quot;
end

slot0.OnInit = function(slot0)
	slot0.uilist = UIItemList.New(slot0._tf:Find(&quot;options&quot;), slot0._tf:Find(&quot;options/notify_tpl&quot;))

	slot0.uilist:make(function (slot0, slot1, slot2)
		if slot0 == UIItemList.EventUpdate then
			uv0:UpdateItem(slot1 + 1, slot2)
		end
	end)
	slot0:UpdateAndroidAlarm()
end

slot0.UpdateAndroidAlarm = function(slot0)
	slot0.alarmBtn = slot0._tf:Find(&quot;android_alarm_btn&quot;)
	slot0.alarmPanel = slot0._tf:Find(&quot;android_alarm_panel&quot;)
	slot2 = YSNormalTool.NotificationTool.CanScheduleExactAlarms()

	if not PermissionHelper.IsAndroid() or LOCK_ANDROID_EXACT_ALARM then
		setActive(slot0.alarmBtn, false)
		setActive(slot0.alarmPanel, false)
	elseif not slot2 then
		setActive(slot0.alarmBtn, true)
		setActive(slot0.alarmPanel, true)

		slot3 = slot0.alarmPanel
		slot0.alarmPanelTipText = slot3:Find(&quot;tip/Text&quot;)

		setText(slot0.alarmPanelTipText, i18n(&quot;notify_clock_tip&quot;))
		onButton(slot0, slot0.alarmBtn, function ()
			YSNormalTool.NotificationTool.RequestScheduleExactAlarmsPermission()
		end, SFX_PANEL)
	else
		setActive(slot0.alarmBtn, false)
		setActive(slot0.alarmPanel, false)
	end
end

slot0.UpdateItem = function(slot0, slot1, slot2)
	slot3 = slot0.list[slot1]

	slot2:Find(&quot;mask/Text&quot;):GetComponent(&quot;ScrollText&quot;):SetText(slot3.title)
	onButton(slot0, slot2:Find(&quot;mask/Text&quot;), function ()
		pg.m02:sendNotification(NewSettingsMediator.SHOW_DESC, uv0)
	end, SFX_PANEL)
	removeOnToggle(slot2:Find(&quot;on&quot;))

	if slot0:GetDefaultValue(slot3) then
		triggerToggle(slot2:Find(&quot;on&quot;), true)
	else
		triggerToggle(slot2:Find(&quot;off&quot;), true)
	end

	onToggle(slot0, slot2:Find(&quot;on&quot;), function (slot0)
		uv0:OnItemSwitch(uv1, slot0)
	end, SFX_UI_TAG, SFX_UI_CANCEL)
	slot0:OnUpdateItem(slot3)
	slot0:OnUpdateItemWithTr(slot3, slot2)
end

slot0.OnUpdateItem = function(slot0, slot1)
end

slot0.OnUpdateItemWithTr = function(slot0, slot1, slot2)
end

slot0.OnItemSwitch = function(slot0, slot1, slot2)
	pg.PushNotificationMgr.GetInstance():setSwitch(slot1.id, slot2)
end

slot0.GetDefaultValue = function(slot0, slot1)
	return pg.PushNotificationMgr.GetInstance():isEnabled(slot1.id)
end

slot0.GetList = function(slot0)
	slot1 = {}

	for slot5, slot6 in ipairs(pg.push_data_template.all) do
		table.insert(slot1, pg.push_data_template[slot6])
	end

	return slot1
end

slot0.OnUpdate = function(slot0)
	slot0.list = slot0:GetList()

	slot0.uilist:align(#slot0.list)
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>