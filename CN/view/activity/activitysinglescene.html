<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>activitysinglescene.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>activitysinglescene.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;ActivitySingleScene&quot;, import(&quot;..base.BaseUI&quot;))
slot0.EXIT = &quot;exit&quot;

slot0.preload = function(slot0, slot1)
	slot1()
end

slot0.getUIName = function(slot0)
	return &quot;ActivitySingleUI&quot;
end

slot0.init = function(slot0)
	slot0.shareData = ActivityShareData.New()
	slot0.pageContainer = slot0._tf

	pg.UIMgr.GetInstance():OverlayPanel(slot0._tf)
end

slot0.didEnter = function(slot0)
	slot0:bind(uv0.EXIT, function (slot0)
		uv0:emit(uv1.ON_BACK)
	end)
end

slot0.setPlayer = function(slot0, slot1)
	slot0.shareData:SetPlayer(slot1)
end

slot0.setFlagShip = function(slot0, slot1)
	slot0.shareData:SetFlagShip(slot1)
end

slot0.updateTaskLayers = function(slot0)
	if not slot0.activity then
		return
	end

	slot0:updateActivity(slot0.activity)
end

slot0.selectActivity = function(slot0, slot1)
	slot0.activity = slot1

	if slot1:getConfig(&quot;page_info&quot;).class_name and not slot1:isEnd() then
		slot0.actPage = import(&quot;view.activity.subPages.&quot; .. slot2.class_name).New(slot0.pageContainer, slot0.event, slot0.contextData)

		if slot0.actPage:UseSecondPage(slot1) then
			slot0.actPage:SetUIName(slot2.ui_name2)
		else
			slot0.actPage:SetUIName(slot2.ui_name)
		end

		slot0.actPage:SetShareData(slot0.shareData)
		slot0.actPage:Load()
		slot0.actPage:ActionInvoke(&quot;Flush&quot;, slot0.activity)
		slot0.actPage:ActionInvoke(&quot;ShowOrHide&quot;, true)
	end
end

slot0.updateActivity = function(slot0, slot1)
	if ActivityConst.PageIdLink[slot1.id] then
		slot1 = getProxy(ActivityProxy):getActivityById(ActivityConst.PageIdLink[slot1.id])
	end

	if slot1:isShow() and slot1:isCorePage(slot0.contextData.coreName or &quot;&quot;) and not slot1:isEnd() and slot0.activity and slot0.activity.id == slot1.id then
		slot0.activity = slot1

		slot0.actPage:ActionInvoke(&quot;Flush&quot;, slot1)
	end
end

slot0.onBackPressed = function(slot0)
	slot0.actPage:ActionInvoke(&quot;onBackPressed&quot;)
	slot0:emit(uv0.ON_BACK_PRESSED)
end

slot0.willExit = function(slot0)
	slot0.shareData = nil

	if slot0.actPage then
		slot0.actPage:Destroy()
	end

	pg.UIMgr.GetInstance():UnOverlayPanel(slot0._tf)
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>