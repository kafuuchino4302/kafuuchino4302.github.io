<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>anniversaryislandspringtask2023scene.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>anniversaryislandspringtask2023scene.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;AnniversaryIslandSpringTask2023Scene&quot;, import(&quot;view.base.BaseUI&quot;))

slot0.getUIName = function(slot0)
	return &quot;AnniversaryIslandSpringTask2023UI&quot;
end

slot0.init = function(slot0)
	slot0.taskListRect = GetComponent(slot0._tf:Find(&quot;TaskList/ScrollView&quot;), &quot;LScrollRect&quot;)

	slot0.taskListRect.onUpdateItem = function(slot0, slot1)
		uv0:UpdateTaskListItem(slot0, slot1)
	end

	setText(slot0._tf:Find(&quot;Desc/Text&quot;), i18n(&quot;springtask_tip&quot;))
	setActive(slot0._tf:Find(&quot;Top/Help&quot;), false)
end

slot0.BuildTaskVOs = function(slot0)
	slot1 = getProxy(ActivityProxy)
	slot1 = slot1:getActivityByType(ActivityConst.ACTIVITY_TYPE_HOTSPRING_2)
	slot3 = slot1:GetConfigID()
	slot0.activityId = slot3
	slot4 = getProxy(ActivityTaskProxy)
	slot4 = slot4:getTaskVOsByActId(slot3)
	slot0.lockTasks = {}
	slot0.taskVOs = _.map(slot1:GetUnlockTaskIds(), function (slot0)
		if not _.detect(uv0, function (slot0)
			return slot0:GetConfigID() == uv0
		end) then
			uv2.lockTasks[ActivityTask.New(uv1, {
				id = slot0
			})] = true
		end

		return slot1
	end)

	table.sort(slot0.taskVOs, CompareFuncs({
		function (slot0)
			return slot0:isOver() and 1 or 0
		end,
		function (slot0)
			return uv0.lockTasks[slot0] and 1 or 0
		end,
		function (slot0)
			return slot0:GetConfigID()
		end
	}))
end

slot0.UpdateTaskListItem = function(slot0, slot1, slot2)
	slot3 = tf(slot2)
	slot4 = slot0.taskVOs[slot1 + 1]
	slot6 = pg.task_data_template[slot4:GetConfigID()]
	slot7 = slot4:isFinish()
	slot9 = slot4:isSubmit()
	slot11 = slot4:getProgress()
	slot12 = slot4:getTargetNumber()

	setActive(slot3:Find(&quot;Lock&quot;), slot0.lockTasks[slot4])
	setText(slot3:Find(&quot;BG/Progress&quot;), slot11 .. &quot;/&quot; .. slot12)
	setSlider(slot3:Find(&quot;BG/ProgressBar&quot;), 0, slot12, slot11)
	changeToScrollText(slot3:Find(&quot;BG/Name/Text&quot;), slot6.name)
	setActive(slot3:Find(&quot;BG/Go&quot;), not slot4:isOver() and not slot7)
	setActive(slot3:Find(&quot;BG/Commit&quot;), not slot8 and slot7 and slot9)
	setActive(slot3:Find(&quot;BG/Reward&quot;), not slot8 and slot7 and not slot9)
	setActive(slot3:Find(&quot;BG/Got&quot;), slot8)
	UIItemList.StaticAlign(slot3:Find(&quot;BG/Items&quot;), slot3:Find(&quot;BG/Items&quot;):GetChild(0), #slot6.award_display, function (slot0, slot1, slot2)
		if slot0 ~= UIItemList.EventUpdate then
			return
		end

		slot3 = uv0[slot1 + 1]

		updateDrop(slot2:Find(&quot;Icon&quot;), {
			type = slot3[1],
			id = slot3[2],
			count = slot3[3]
		})
		onButton(uv1, slot2, function ()
			uv0:emit(BaseUI.ON_DROP, uv1)
		end)
		setActive(slot2:Find(&quot;Completed&quot;), uv2)
	end)
	onButton(slot0, slot3:Find(&quot;BG/Go&quot;), function ()
		uv0:emit(AnniversaryIslandSpringTask2023Mediator.TASK_GO, {
			taskVO = uv1
		})
	end, SFX_PANEL)
	onButton(slot0, slot3:Find(&quot;BG/Commit&quot;), function ()
		uv0:emit(AnniversaryIslandSpringTask2023Mediator.SHOW_SUBMIT_WINDOW, uv1)
	end, SFX_PANEL)
	onButton(slot0, slot3:Find(&quot;BG/Reward&quot;), function ()
		uv0:emit(AnniversaryIslandSpringTask2023Mediator.SUBMIT_TASK, uv1)
	end, SFX_PANEL)
end

slot0.didEnter = function(slot0)
	onButton(slot0, slot0._tf:Find(&quot;Top/Back&quot;), function ()
		uv0:onBackPressed()
	end, SFX_CANCEL)
	onButton(slot0, slot0._tf:Find(&quot;Top/Home&quot;), function ()
		uv0:quickExitFunc()
	end, SFX_CANCEL)
	onButton(slot0, slot0._tf:Find(&quot;Top/Help&quot;), function ()
		pg.MsgboxMgr.GetInstance():ShowMsgBox({
			type = MSGBOX_TYPE_HELP,
			helps = i18n(&quot;springtask_help&quot;)
		})
	end, SFX_PANEL)
	slot0:BuildTaskVOs()
	slot0:UpdateView()
end

slot0.UpdateView = function(slot0)
	slot0.taskListRect:SetTotalCount(#slot0.taskVOs)
end

slot0.willExit = function(slot0)
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>