<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>otherworldtemplechars.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>otherworldtemplechars.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;OtherWorldTempleChars&quot;)
slot1 = &quot;other_world_temple_char&quot;

slot0.Ctor = function(slot0, slot1, slot2)
	slot0._tf = slot1
	slot0._event = slot2

	onButton(slot0._event, findTF(slot0._tf, &quot;ad/btnClose&quot;), function ()
		uv0:setActive(false)
	end, SFX_CANCEL)
	onButton(slot0._event, findTF(slot0._tf, &quot;ad/clickClose&quot;), function ()
		uv0:setActive(false)
	end, SFX_CANCEL)

	slot0._charTpl = findTF(slot0._tf, &quot;ad/chars/content/charTpl&quot;)

	setText(findTF(slot0._charTpl, &quot;got/img/text&quot;), i18n(&quot;word_got&quot;))
	setActive(slot0._charTpl, false)

	slot0._charItems = {}
	slot0._charContent = findTF(slot0._tf, &quot;ad/chars/content&quot;)
end

slot0.setData = function(slot0, slot1)
	slot0.charIds = slot1
end

slot0.updateActivityPool = function(slot0, slot1)
	slot0.activityPools = slot1
end

slot0.updateSelect = function(slot0)
	slot0:updateItemsCount(#slot0.charIds)

	for slot4 = 1, #slot0._charItems do
		setActive(slot0._charItems[slot4], false)

		if slot4 &lt;= #slot0.charIds then
			setActive(slot5, true)
			slot0:setItemData(slot5, slot0.charIds[slot4])
		end
	end

	setText(findTF(slot0._tf, &quot;ad/title/text&quot;), i18n(uv0))
end

slot0.setItemData = function(slot0, slot1, slot2)
	slot3 = pg.guardian_template[slot2]
	slot5 = &quot;&quot;
	slot6 = slot0.activityPools[slot3.guardian_gain_pool]:getGuardianGot(slot2)

	if slot3.type == 1 then
		slot5 = string.gsub(slot3.guardian_gain_desc, &quot;$1&quot;, math.min(slot4:getFetchCount(), slot3.guardian_gain[2]))
	elseif slot3.type == 2 then
		slot5 = (not slot6 or slot3.guardian_gain_desc) and &quot;???&quot;
	end

	if slot3.type == 2 then
		setText(findTF(slot1, &quot;desc/text&quot;), slot6 and slot3.guardian_desc or &quot;???&quot;)
		setText(findTF(slot1, &quot;name/text&quot;), slot6 and slot3.guardian_name or &quot;???&quot;)
	else
		setText(findTF(slot1, &quot;name/text&quot;), slot3.guardian_name)
		setText(findTF(slot1, &quot;desc/text&quot;), slot3.guardian_desc)
	end

	if PLATFORM_CODE ~= PLATFORM_CH then
		GetComponent(findTF(slot1, &quot;name/text&quot;), typeof(Text)).fontSize = 30
		GetComponent(findTF(slot1, &quot;desc/text&quot;), typeof(Text)).fontSize = 24
	end

	if slot3.type == 2 then
		setActive(findTF(slot1, &quot;icon/mask/img&quot;), slot6)
	end

	LoadImageSpriteAsync(&quot;shipyardicon/&quot; .. slot3.guardian_painting, findTF(slot1, &quot;icon/mask/img&quot;), true)
	setText(findTF(slot1, &quot;tip/text&quot;), slot5)
	setActive(findTF(slot1, &quot;icon/lock&quot;), not slot6)
	setActive(findTF(slot1, &quot;got&quot;), slot6)
end

slot0.updateItemsCount = function(slot0, slot1)
	slot2 = 0

	if slot1 &gt; #slot0._charItems then
		slot2 = slot1 - #slot0._charItems
	end

	for slot6 = 1, slot2 do
		slot7 = tf(instantiate(slot0._charTpl))

		SetParent(slot7, slot0._charContent)
		table.insert(slot0._charItems, slot7)
	end
end

slot0.setActive = function(slot0, slot1)
	setActive(slot0._tf, slot1)
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>