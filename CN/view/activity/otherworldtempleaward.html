<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>otherworldtempleaward.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>otherworldtempleaward.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;OtherWorldTempleAward&quot;)
slot1 = &quot;other_world_temple_award_last&quot;
slot5 = {
	&quot;other_world_temple_award_title_1&quot;,
	&quot;other_world_temple_award_title_2&quot;,
	&quot;other_world_temple_award_title_3&quot;
}

slot0.Ctor = function(slot0, slot1, slot2)
	slot0._tf = slot1
	slot0._event = slot2

	onButton(slot0._event, findTF(slot0._tf, &quot;ad/btnClose&quot;), function ()
		uv0:setActive(false)
	end, SFX_CANCEL)
	onButton(slot0._event, findTF(slot0._tf, &quot;ad/clickClose&quot;), function ()
		uv0:setActive(false)
	end, SFX_CANCEL)

	slot0._awardTpl = findTF(slot0._tf, &quot;ad/awards/content/awardTpl&quot;)

	setActive(slot0._awardTpl, false)

	slot0._awardItems = {}
	slot0._awardContent = findTF(slot0._tf, &quot;ad/awards/content&quot;)
end

slot0.setData = function(slot0, slot1, slot2)
	slot0.templeIds = slot1
	slot0.shopDatasList = slot2
end

slot0.updateActivityPool = function(slot0, slot1)
	slot0.activityPools = slot1
end

slot0.updateSelect = function(slot0, slot1)
	slot0:updateItemsCount(#slot0.shopDatasList[slot1])

	slot0.selectPool = slot0.activityPools[slot0.templeIds[slot1]]

	for slot6 = 1, #slot0._awardItems do
		setActive(slot0._awardItems[slot6], false)

		if slot6 &lt;= #slot2 then
			setActive(slot7, true)
			slot0:setItemData(slot7, slot2[slot6])
		end
	end

	setText(findTF(slot0._tf, &quot;ad/title/text&quot;), i18n(uv0[slot1]))
end

slot0.setItemData = function(slot0, slot1, slot2)
	slot4 = slot2.count
	slot7 = slot4 - (slot0.selectPool.awards[slot2.id] or 0)
	slot8 = pg.activity_random_award_item[slot3]
	slot9 = Drop.New({
		type = slot8.resource_category,
		id = slot8.commodity_id,
		count = slot8.num
	})

	updateDrop(findTF(slot1, &quot;ad/icon/IconTpl&quot;), slot9)
	onButton(slot0._event, slot1, function ()
		uv0._event:emit(BaseUI.ON_DROP, uv1)
	end, SFX_PANEL)
	setScrollText(findTF(slot1, &quot;ad/name/text&quot;), slot9:getName())
	setText(findTF(slot1, &quot;ad/amount/text&quot;), i18n(uv0, slot7, slot4))
	setActive(findTF(slot1, &quot;ad/soldOut&quot;), slot7 == 0)
end

slot0.updateItemsCount = function(slot0, slot1)
	slot2 = 0

	if slot1 &gt; #slot0._awardItems then
		slot2 = slot1 - #slot0._awardItems
	end

	for slot6 = 1, slot2 do
		slot7 = tf(instantiate(slot0._awardTpl))

		SetParent(slot7, slot0._awardContent)
		table.insert(slot0._awardItems, slot7)
	end
end

slot0.setActive = function(slot0, slot1)
	setActive(slot0._tf, slot1)
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>