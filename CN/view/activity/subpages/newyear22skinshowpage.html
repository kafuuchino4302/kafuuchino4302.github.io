<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>newyear22skinshowpage.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>newyear22skinshowpage.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;NewYear22SkinShowPage&quot;, import(&quot;...base.BaseActivityPage&quot;))
slot1 = {
	{
		id = 403101,
		name = &quot;Y22_adaerbote&quot;
	},
	{
		id = 499061,
		name = &quot;Y22_aogusite&quot;
	},
	{
		id = 399051,
		name = &quot;Y22_bailong&quot;
	},
	{
		id = 405011,
		name = &quot;Y22_bisimai&quot;
	},
	{
		id = 108021,
		name = &quot;Y22_daqinghuayu&quot;
	},
	{
		id = 205091,
		name = &quot;Y22_hao&quot;
	},
	{
		id = 402041,
		name = &quot;Y22_laibixi&quot;
	},
	{
		id = 302211,
		name = &quot;Y22_lei&quot;
	},
	{
		id = 402061,
		name = &quot;Y22_magedebao&quot;
	},
	{
		id = 699011,
		name = &quot;Y22_makeboluo&quot;
	},
	{
		id = 202071,
		name = &quot;Y22_nananpudun&quot;
	},
	{
		id = 303141,
		name = &quot;Y22_niaohai&quot;
	},
	{
		id = 202291,
		name = &quot;Y22_peineiluopo&quot;
	},
	{
		id = 408021,
		name = &quot;Y22_U47&quot;
	},
	{
		id = 408121,
		name = &quot;Y22_U1206&quot;
	},
	{
		id = 405031,
		name = &quot;Y22_wuerlixi&quot;
	},
	{
		id = 401461,
		name = &quot;Y22_Z46&quot;
	},
	{
		id = 406021,
		name = &quot;Y22_yibei&quot;
	},
	{
		id = 201331,
		name = &quot;Y22_yikaluosi&quot;
	},
	{
		id = 205011,
		name = &quot;Y22_yilishabai&quot;
	}
}

slot0.OnInit = function(slot0)
	slot0:findUI()
	slot0:initData()
end

slot0.findUI = function(slot0)
	slot0.paintBackTF = slot0:findTF(&quot;Paints/PaintBack&quot;)
	slot0.paintFrontTF = slot0:findTF(&quot;Paints/PaintFront&quot;)
	slot0.skinShopBtn = slot0:findTF(&quot;BtnShop&quot;)
	slot0.goBtn = slot0:findTF(&quot;BtnGO&quot;)

	onButton(slot0, slot0.skinShopBtn, function ()
		uv0:emit(ActivityMediator.EVENT_GO_SCENE, SCENE.SKINSHOP)
	end, SFX_PANEL)
	onButton(slot0, slot0.goBtn, function ()
		uv0:emit(ActivityMediator.EVENT_GO_SCENE, SCENE.NEWYEAR_BACKHILL_2022)
	end, SFX_PANEL)
end

slot0.initData = function(slot0)
	slot0.paintCount = 20
	slot0.curPaintIndex = 1
	slot0.paintSwitchTime = 1
	slot0.paintStaticTime = 3.5
	slot0.paintStaticCountValue = 0
	slot0.paintPathPrefix = &quot;NewYear22SkinShowPage/&quot;
end

slot0.switchNextPaint = function(slot0)
	slot1 = slot0.frameTimer

	slot1:Stop()

	slot2 = slot0.curPaintIndex % slot0.paintCount + 1
	slot3 = uv0[slot2].name
	slot5 = pg.ship_data_statistics[uv0[slot2].id].name

	setImageSprite(slot0.paintBackTF, LoadSprite(slot0.paintPathPrefix .. slot3, slot3))
	setText(findTF(slot0.paintBackTF, &quot;txt&quot;), slot5)
	setText(findTF(slot0.paintBackTF, &quot;outlineTxt&quot;), slot5)

	slot6 = GetComponent(slot0.paintFrontTF, typeof(CanvasGroup))
	slot7 = GetComponent(slot0.paintBackTF, typeof(CanvasGroup))
	slot8 = LeanTween.value(go(slot0.paintFrontTF), 1, 0, slot0.paintSwitchTime)
	slot8 = slot8:setOnUpdate(System.Action_float(function (slot0)
		uv0.alpha = slot0
		uv1.alpha = 1 - slot0
	end))

	slot8:setOnComplete(System.Action(function ()
		setImageFromImage(uv0.paintFrontTF, uv0.paintBackTF)

		uv1.alpha = 1
		uv2.alpha = 0

		setText(findTF(uv0.paintFrontTF, &quot;txt&quot;), uv3)
		setText(findTF(uv0.paintFrontTF, &quot;outlineTxt&quot;), uv3)

		uv0.curPaintIndex = uv4

		uv0.frameTimer:Start()
	end))
end

slot0.OnFirstFlush = function(slot0)
	slot0:initPaint()
	slot0:initTimer()
end

slot0.initPaint = function(slot0)
	slot1 = slot0.curPaintIndex
	slot2 = (slot1 - 1) % slot0.paintCount + 1
	slot3 = pg.ship_data_statistics[uv0[slot2].id].name
	slot4 = uv0[slot1].name

	setImageSprite(slot0.paintFrontTF, LoadSprite(slot0.paintPathPrefix .. slot4, slot4))
	setText(findTF(slot0.paintFrontTF, &quot;txt&quot;), slot3)
	setText(findTF(slot0.paintFrontTF, &quot;outlineTxt&quot;), slot3)

	slot6 = pg.ship_data_statistics[uv0[slot2].id].name
	slot4 = uv0[slot2].name

	setImageSprite(slot0.paintBackTF, LoadSprite(slot0.paintPathPrefix .. slot4, slot4))
	setText(findTF(slot0.paintBackTF, &quot;txt&quot;), slot6)
	setText(findTF(slot0.paintBackTF, &quot;outlineTxt&quot;), slot6)
end

slot0.initTimer = function(slot0)
	slot0.paintStaticCountValue = 0
	slot0.frameTimer = Timer.New(function ()
		uv0.paintStaticCountValue = uv0.paintStaticCountValue + uv1

		if uv0.paintStaticTime &lt;= uv0.paintStaticCountValue then
			uv0.paintStaticCountValue = 0

			uv0:switchNextPaint()
		end
	end, 0.016666666666666666, -1, false)

	slot0.frameTimer:Start()
end

slot0.OnDestroy = function(slot0)
	if slot0.frameTimer then
		slot0.frameTimer:Stop()

		slot0.frameTimer = nil
	end
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>