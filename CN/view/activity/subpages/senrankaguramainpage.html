<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>senrankaguramainpage.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>senrankaguramainpage.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;SenrankaguraMainPage&quot;, import(&quot;.TemplatePage.PreviewTemplatePage&quot;))
slot0.SWITCH_INTERVAL = 6
slot0.SWITCH_TIME = 0.5
slot0.SWITCH_WIDTH = 367
slot0.TACHIE_DELAY = 0.03

slot0.OnInit = function(slot0)
	slot0.bg = slot0:findTF(&quot;AD/mask&quot;)
	slot0.btnList = slot0:findTF(&quot;btn_list&quot;, slot0.bg)
	slot4 = slot0.bg
	slot0.main = slot0:findTF(&quot;main&quot;, slot4)
	slot0.totalNum = slot0.main.childCount
	slot0.randomList = {}
	slot0.children = {}

	for slot4 = 1, slot0.totalNum do
		slot5 = slot0.main:GetChild(slot4 - 1)

		table.insert(slot0.children, slot5)
		setActive(slot5, false)

		if PLATFORM_CODE ~= PLATFORM_CH and findTF(slot5, &quot;hx&quot;) then
			setActive(slot6, false)
		end
	end
end

slot0.OnFirstFlush = function(slot0)
	uv0.super.OnFirstFlush(slot0)

	slot4 = function()
		pg.m02:sendNotification(GAME.GO_SCENE, SCENE.SENRANKAGURA_BACKHILL)
	end

	onButton(slot0, slot0:findTF(&quot;mountain&quot;, slot0.btnList), slot4, SFX_PANEL)

	for slot4 = 1, slot0.totalNum do
		table.insert(slot0.randomList, slot4)
	end

	shuffle(slot0.randomList)

	slot0.index = 1

	setActive(slot0.children[slot0.randomList[slot0.index]], true)

	slot0.LTList = {}

	slot0.Interval = function()
		table.insert(uv0.LTList, LeanTween.delayedCall(go(uv0._tf), uv1.SWITCH_INTERVAL, System.Action(uv0.FadeIn)).uniqueId)
	end

	slot0.FadeIn = function()
		slot0 = uv0.children[uv0.randomList[uv0.index]]
		uv0.index = uv0.index % uv0.totalNum + 1
		slot1 = uv0.children[uv0.randomList[uv0.index]]
		slot2 = uv1.SWITCH_WIDTH

		setActive(slot1, true)

		slot5 = {
			0,
			uv1.TACHIE_DELAY,
			uv1.TACHIE_DELAY
		}

		table.insert(uv0.LTList, LeanTween.delayedCall(go(uv0._tf), uv1.SWITCH_TIME + uv1.TACHIE_DELAY, System.Action(uv0.Interval)).uniqueId)
		table.Foreach({
			findTF(slot1, &quot;bg&quot;),
			findTF(slot1, &quot;tachie&quot;),
			findTF(slot1, &quot;hx&quot;)
		}, function (slot0, slot1)
			setImageAlpha(slot1, 0)
			setAnchoredPosition(slot1, {
				x = uv0 + rtf(slot1).anchoredPosition.x
			})

			slot3 = function()
				table.insert(uv0.LTList, LeanTween.alpha(uv1, 1, uv2.SWITCH_TIME):setEase(LeanTweenType.easeOutSine).uniqueId)
				table.insert(uv0.LTList, LeanTween.moveX(rtf(uv1), 0 + uv3, uv2.SWITCH_TIME):setEase(LeanTweenType.easeOutSine).uniqueId)
			end

			if uv3[slot0] &gt; 0 then
				table.insert(uv1.LTList, LeanTween.delayedCall(go(slot1), uv3[slot0], System.Action(slot3)).uniqueId)
			else
				slot3()
			end
		end)
		table.Foreach({
			findTF(slot0, &quot;bg&quot;),
			findTF(slot0, &quot;tachie&quot;),
			findTF(slot0, &quot;hx&quot;)
		}, function (slot0, slot1)
			slot2 = rtf(slot1).anchoredPosition.x

			slot3 = function()
				setAnchoredPosition(uv0, {
					x = uv1
				})
			end

			slot4 = function()
				table.insert(uv0.LTList, LeanTween.alpha(uv1, 0, uv2.SWITCH_TIME):setEase(LeanTweenType.easeOutSine).uniqueId)
				table.insert(uv0.LTList, LeanTween.moveX(rtf(uv1), -uv3 + uv4, uv2.SWITCH_TIME):setOnComplete(System.Action(uv5)):setEase(LeanTweenType.easeOutSine).uniqueId)
			end

			if uv3[slot0] &gt; 0 then
				table.insert(uv0.LTList, LeanTween.delayedCall(go(slot1), uv3[slot0], System.Action(slot4)).uniqueId)
			else
				slot4()
			end
		end)
	end

	slot0.Interval()
end

slot0.OnDestroy = function(slot0)
	slot1 = ipairs
	slot2 = slot0.LTList or {}

	for slot4, slot5 in slot1(slot2) do
		LeanTween.cancel(slot5)
	end
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>