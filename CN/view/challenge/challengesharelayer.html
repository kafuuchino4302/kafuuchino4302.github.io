<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>challengesharelayer.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>challengesharelayer.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;ChallengeShareLayer&quot;, import(&quot;..base.BaseUI&quot;))

slot0.getUIName = function(slot0)
	return &quot;ChallengeShareUI&quot;
end

slot0.init = function(slot0)
	slot0.painting = slot0:findTF(&quot;main/Painting&quot;)
	slot0.shipList = slot0:findTF(&quot;main/ship_list&quot;)
	slot0.cardTF = slot0:findTF(&quot;ship_card&quot;, slot0.shipList)
	slot0.itemList = UIItemList.New(slot0.shipList, slot0.cardTF)
	slot0.wordTF = slot0:findTF(&quot;main/word&quot;)
	slot0.touchBtn = slot0:findTF(&quot;touch_btn&quot;)

	pg.UIMgr.GetInstance():OverlayPanel(slot0._tf)
end

slot0.setLevel = function(slot0, slot1)
	slot0.level = slot1
end

slot0.setShipPaintList = function(slot0, slot1)
	slot0.shipPaintList = slot1
end

slot0.setFlagShipPaint = function(slot0, slot1)
	slot0.flagShipPaint = slot1
end

slot0.didEnter = function(slot0)
	onButton(slot0, slot0.touchBtn, function ()
		if uv0.isLoading then
			return
		end

		uv0:closeView()
	end, SFX_PANEL)
	slot0.itemList:make(function (slot0, slot1, slot2)
		if slot0 == UIItemList.EventUpdate then
			table.insert(uv0.funcs, function (slot0)
				LoadSpriteAsync(&quot;shipYardIcon/&quot; .. uv0.shipPaintList[uv1 + 1], function (slot0)
					if not IsNil(uv0) then
						setImageSprite(uv0:Find(&quot;back/Image&quot;), slot0)
					end

					uv1()
				end)
			end)
		end
	end)
	slot0:flush()
end

slot0.flush = function(slot0)
	slot0.funcs = {}

	slot0.itemList:align(#slot0.shipPaintList)
	table.insert(slot0.funcs, function (slot0)
		setPaintingPrefabAsync(uv0.painting, uv0.flagShipPaint, &quot;chuanwu&quot;, slot0)
	end)

	slot0.isLoading = true

	parallelAsync(slot0.funcs, function ()
		uv0.isLoading = false

		pg.ShareMgr.GetInstance():Share(pg.ShareMgr.TypeChallenge)
	end)
	setText(slot0.wordTF:Find(&quot;Text&quot;), i18n(&quot;challenge_share_progress&quot;))
	setText(slot0.wordTF:Find(&quot;number/Text&quot;), slot0.level)
	setText(slot0.wordTF:Find(&quot;Text2&quot;), i18n(&quot;challenge_share&quot;))
end

slot0.willExit = function(slot0)
	pg.UIMgr.GetInstance():UnOverlayPanel(slot0._tf)
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>