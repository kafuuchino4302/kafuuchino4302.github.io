<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>enemynavigator.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>enemynavigator.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;EnemyNavigator&quot;, import(&quot;view.miniGame.gameView.RyzaMiniGame.character.MoveEnemy&quot;))
slot0.SkillDistance = 7

slot0.InitUI = function(slot0, slot1)
	uv0.super.InitUI(slot0, slot1)

	slot0.hp = slot1.hp or 2
	slot0.hpMax = slot0.hp
	slot0.speed = slot1.speed or 3
	slot0.skillCD = 0
	slot0.skillDis = 0
	slot0.rate = slot1.rate or 2
end

slot1 = {
	x = &quot;y&quot;,
	y = &quot;x&quot;
}

slot0.TimeUpdate = function(slot0, slot1)
	if slot0.skillDis &gt; 0 then
		slot4 = slot0.realPos - slot0.pos
		slot5, slot6 = nil

		if (slot0.dir * slot0:GetSpeedDis() * slot1 * slot0.rate).x ~= 0 then
			slot5 = &quot;x&quot;
		elseif slot3.y ~= 0 then
			slot5 = &quot;y&quot;
		else
			assert(false)
		end

		slot6 = uv0[slot5]
		slot7 = true
		slot8 = {}

		slot9 = function(slot0)
			slot1, slot2 = uv0.responder:GetCellPassability(slot0)

			if not slot1 then
				if slot2 and isa(slot2, ObjectBreakable) then
					table.insert(uv1, slot2)
				else
					uv2 = false
				end
			end
		end

		if slot4[slot5] * (slot4[slot5] + slot3[slot5]) &lt;= 0 then
			slot10[slot5] = NewPos(slot0.pos.x, slot0.pos.y)[slot5] + (slot3[slot5] &lt; 0 and -1 or 1)

			slot9(slot10)

			if slot7 and slot4[slot6] ~= 0 then
				slot10[slot6] = slot10[slot6] + (slot4[slot6] &lt; 0 and -1 or 1)

				slot9(slot10)
			end
		end

		if slot7 then
			for slot13, slot14 in ipairs(slot8) do
				slot0:Calling(&quot;break&quot;, {}, slot14)
			end

			slot0.skillDis = slot0.skillDis - math.abs(slot3[slot5])
		end

		if not slot7 or slot0.skillDis &lt;= 0 then
			slot3[slot5] = -slot4[slot5]
			slot0.skillDis = 0

			slot0:PlayAnim(&quot;Attack3_&quot; .. slot0.assaultMark)
		end

		slot0:MoveUpdate(slot3)
		slot0:TimeTrigger(slot1)

		return
	end

	uv1.super.TimeUpdate(slot0, slot1)
end

slot2 = {
	[&quot;0_1&quot;] = &quot;S&quot;,
	[&quot;0_-1&quot;] = &quot;N&quot;,
	[&quot;-1_0&quot;] = &quot;W&quot;,
	[&quot;1_0&quot;] = &quot;E&quot;
}
slot3 = {
	S = {
		0,
		1
	},
	E = {
		1,
		0
	},
	N = {
		0,
		-1
	},
	W = {
		-1,
		0
	}
}

slot0.TimeTrigger = function(slot0, slot1)
	uv0.super.TimeTrigger(slot0, slot1)

	slot0.skillCD = slot0.skillCD - slot1

	if not slot0.lock and slot0.skillCD &lt;= 0 and slot0.responder:SearchRyza(slot0, slot0.search) then
		slot2 = slot0.responder.reactorRyza.pos

		if (slot0.pos.x - slot2.x) * (slot0.pos.y - slot2.y) == 0 then
			slot0.skillCD = 10
			slot0.skillDis = slot0.SkillDistance
			slot0.assaultMark = string.split(slot0.status, &quot;_&quot;)[2]
			slot0.dir = NewPos(unpack(uv1[slot0.assaultMark]))

			slot0:PlayAnim(&quot;Attack1_&quot; .. slot0.assaultMark)
		end
	end
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>