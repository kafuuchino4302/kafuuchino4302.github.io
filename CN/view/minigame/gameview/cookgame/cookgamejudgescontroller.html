<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cookgamejudgescontroller.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>cookgamejudgescontroller.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;CookGameJudgesController&quot;)

slot0.Ctor = function(slot0, slot1, slot2, slot3)
	slot0._sceneTf = findTF(slot1, &quot;scene&quot;)
	slot0._sceneBackground = findTF(slot1, &quot;scene_background&quot;)
	slot0._sceneFrontTf = findTF(slot1, &quot;scene_front&quot;)
	slot0._tpl = findTF(slot0._sceneBackground, &quot;judgeTpl&quot;)
	slot0._gameData = slot2
	slot0._event = slot3
	slot0.initFlag = false
	slot0.jiujiuTf = findTF(slot0._sceneBackground, &quot;jiujiuTime&quot;)
	slot0.jiujiuAnim = GetComponent(findTF(slot0.jiujiuTf, &quot;anim&quot;), typeof(Animator))

	setActive(slot0._tpl, false)
end

slot0.init = function(slot0)
	slot0.initFlag = true
	slot0._judgeDatas = {}

	for slot4 = 1, #CookGameConst.judge_data do
		slot5 = CookGameConst.judge_data[slot4]

		table.insert(slot0._judgeDatas, {
			data = Clone(slot5),
			runtimeAnimator = LoadAny(slot0._gameData.path, slot5.name, typeof(RuntimeAnimatorController))
		})
	end

	slot0.judges = {}

	for slot4 = 1, CookGameConst.judge_num do
		slot6 = tf(instantiate(slot0._tpl))

		setParent(slot6, slot0._sceneTf)
		setActive(slot6, true)

		slot6.anchoredPosition = findTF(slot0._sceneBackground, &quot;judgesPos&quot; .. slot4).anchoredPosition
		slot8 = CookGameJudge.New(slot6, slot4, slot0._judgeDatas, slot0._gameData, slot0._event)

		slot8:setFrontContainer(slot0._sceneFrontTf)
		slot8:setClickCallback(function ()
			uv0:onJudgeClick(uv1)
		end)
		table.insert(slot0.judges, slot8)
	end

	slot0._gameData.judges = slot0.judges
end

slot0.changeSpeed = function(slot0, slot1)
	for slot5 = 1, #slot0.judges do
		slot0.judges[slot5]:changeSpeed(slot1)
	end
end

slot0.serverIndex = function(slot0, slot1, slot2, slot3)
	if slot1 and slot1 &lt; #slot0.judges then
		slot0.judges[slot1]:server(slot2, slot3)
	else
		slot3(false)
	end
end

slot0.onJudgeClick = function(slot0, slot1)
	for slot5 = 1, #slot0.judges do
		if slot5 == slot1 then
			slot6 = slot0.judges[slot5]

			slot6:select(true)

			slot6 = slot0._event

			slot6:emit(CookGameView.CLICK_JUDGE_EVENT, slot0.judges[slot1], function (slot0)
				if not slot0 then
					uv0.judges[uv1]:select(false)
				end
			end)
		else
			slot0.judges[slot5]:select(false)
		end
	end
end

slot0.start = function(slot0)
	if not slot0.initFlag then
		slot0:init()
	end

	for slot4 = 1, #slot0.judges do
		slot0.judges[slot4]:start()
	end
end

slot0.step = function(slot0, slot1)
	for slot5 = 1, #slot0.judges do
		slot0.judges[slot5]:step(slot1)
	end
end

slot0.clear = function(slot0)
	for slot4 = 1, #slot0.judges do
		slot0.judges[slot4]:clear()
	end
end

slot0.extend = function(slot0)
	if slot0.jiujiuAnim then
		slot0.jiujiuAnim:SetTrigger(&quot;extend&quot;)
	end
end

slot0.timeUp = function(slot0)
	if slot0.jiujiuAnim then
		slot0.jiujiuAnim:SetTrigger(&quot;time_up&quot;)
	end
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>