<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>racingmininamespace.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>racingmininamespace.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = {}

for slot5, slot6 in ipairs({
	function ()
		slot0 = class(&quot;Object&quot;)
		slot0.colliderSize = nil

		slot0.Ctor = function(slot0, slot1, slot2, slot3)
			slot0.rt = slot1
			slot0.pos = slot2

			setAnchoredPosition(slot0.rt, slot0.pos)

			slot0.controller = slot3
			slot0.isTriggered = false

			slot0:Show(&quot;base&quot;)
		end

		slot0.UpdatePos = function(slot0, slot1)
			slot0.pos = slot0.pos + slot1

			setAnchoredPosition(slot0.rt, slot0.pos)
		end

		slot0.Show = function(slot0, slot1)
			slot0.state = slot1

			setActive(slot0.rt, true)
		end

		slot0.Trigger = function(slot0, slot1)
			slot0.isTriggered = true

			slot0:TriggerEffect(slot1)
		end

		slot0.TriggerEffect = function(slot0, slot1)
			slot1:TriggerEffect(slot0)
		end

		slot0.Clear = function(slot0)
			table.removebyvalue(slot0.controller.queue, slot0)
			Destroy(slot0.rt)
		end

		return slot0
	end,
	function ()
		return class(&quot;StartMark&quot;, uv0.Object)
	end,
	function ()
		slot0 = class(&quot;Mire&quot;, uv0.Object)
		slot0.colliderSize = {
			{
				-100,
				100
			},
			{
				-114,
				114
			}
		}

		slot0.Trigger = function(slot0, slot1)
			slot0.isTriggered = true

			if not slot1.invincibleTime then
				slot0:TriggerEffect(slot1)
			end
		end

		return slot0
	end,
	function ()
		slot0 = class(&quot;SpeedBumps&quot;, uv0.Object)
		slot0.colliderSize = {
			{
				-100,
				100
			},
			{
				-114,
				114
			}
		}

		slot0.Trigger = function(slot0, slot1)
			slot0.isTriggered = true

			if not slot1.invincibleTime then
				slot0:TriggerEffect(slot1)
			end
		end

		return slot0
	end,
	function ()
		slot0 = class(&quot;Obstacle&quot;, uv0.Object)
		slot0.actionDic = {}

		slot0.Ctor = function(slot0, slot1, slot2, slot3)
			slot0.rt = slot1
			slot0.pos = slot2

			setAnchoredPosition(slot0.rt, slot0.pos)

			slot0.controller = slot3
			slot0.isTriggered = false
			slot0.comSpineAnim = slot1:Find(&quot;GameObject&quot;):GetComponent(&quot;SpineAnimUI&quot;)

			slot0.comSpineAnim:SetActionCallBack(function (slot0)
				if slot0 == &quot;finish&quot; then
					uv0:ActionCallback()
				end
			end)
			slot0:Show(&quot;base&quot;)
		end

		slot0.ActionCallback = function(slot0)
			switch(slot0.state, {
				base = function ()
				end,
				trigger = function ()
					uv0:Clear()
				end,
				broken = function ()
					uv0:Clear()
				end
			})
		end

		slot0.Show = function(slot0, ...)
			uv0.super.Show(slot0, ...)

			slot0.action = slot0.actionDic[slot0.state]

			slot0.comSpineAnim:SetAction(slot0.action, 0)
		end

		slot0.Trigger = function(slot0, slot1)
			slot0.isTriggered = true

			if slot1.invincibleTime then
				slot0:Show(&quot;broken&quot;)
				pg.CriMgr.GetInstance():PlaySoundEffect_V3(&quot;ui-crash&quot;)
			else
				slot0:Show(&quot;trigger&quot;)
				slot0:TriggerEffect(slot1)
			end
		end

		return slot0
	end,
	function ()
		slot0 = class(&quot;TrafficCone&quot;, uv0.Obstacle)
		slot0.colliderSize = {
			{
				-100,
				100
			},
			{
				-114,
				114
			}
		}
		slot0.actionDic = {
			broken = &quot;roadblocks_smash1&quot;,
			trigger = &quot;roadblocks_vanish1&quot;,
			base = &quot;roadblocks_normal1&quot;
		}

		return slot0
	end,
	function ()
		slot0 = class(&quot;Roadblock&quot;, uv0.Obstacle)
		slot0.colliderSize = {
			{
				-100,
				100
			},
			{
				-114,
				114
			}
		}
		slot0.actionDic = {
			broken = &quot;roadblocks_smash2&quot;,
			trigger = &quot;roadblocks_vanish2&quot;,
			base = &quot;roadblocks_normal2&quot;
		}

		return slot0
	end,
	function ()
		slot0 = class(&quot;Bomb&quot;, uv0.Obstacle)
		slot0.colliderSize = {
			{
				-100,
				100
			},
			{
				-114,
				114
			}
		}
		slot0.actionDic = {
			broken = &quot;bombsmash&quot;,
			trigger = &quot;bomb&quot;,
			base = &quot;bomb_normal&quot;
		}

		slot0.Trigger = function(slot0, slot1)
			slot0.isTriggered = true

			if slot1.invincibleTime then
				slot0:Show(&quot;broken&quot;)
			else
				slot0:Show(&quot;trigger&quot;)

				slot0.rt:Find(&quot;GameObject&quot;):GetComponent(&quot;SkeletonGraphic&quot;).color = Color.New(1, 1, 1, 0)

				setActive(slot0.rt:Find(&quot;GameObject/saiche_zhadan&quot;), true)
				slot0:TriggerEffect(slot1)
			end

			pg.CriMgr.GetInstance():PlaySoundEffect_V3(&quot;event:/ui/baozha1&quot;)
		end

		return slot0
	end,
	function ()
		slot0 = class(&quot;Item&quot;, uv0.Object)
		slot0.colliderSize = {
			{
				-100,
				100
			},
			{
				-114,
				114
			}
		}

		slot0.Trigger = function(slot0, slot1)
			slot0.isTriggered = true

			slot0:TriggerEffect(slot1)
			pg.CriMgr.GetInstance():PlaySoundEffect_V3(&quot;event:/ui/mini_perfect&quot;)
			slot0:Clear()
		end

		return slot0
	end,
	function ()
		return class(&quot;MoreTime&quot;, uv0.Item)
	end,
	function ()
		return class(&quot;Invincibility&quot;, uv0.Item)
	end,
	function ()
		slot0 = class(&quot;Motorcycle&quot;, uv0.Object)
		slot0.colliderSize = {
			{
				-100,
				100
			},
			{
				-114,
				114
			}
		}

		slot0.Ctor = function(slot0, slot1, slot2, slot3)
			slot0.rt = slot1
			slot0.pos = slot2

			setAnchoredPosition(slot0.rt, slot0.pos)

			slot0.controller = slot3
			slot0.isTriggered = false
			slot4 = slot1:Find(&quot;GameObject&quot;)
			slot7 = SpineAnimUI
			slot0.comSpineAnim = slot4:GetComponent(typeof(slot7))
			slot4 = slot0.comSpineAnim

			slot4:SetActionCallBack(function (slot0)
				if slot0 == &quot;finish&quot; then
					uv0:ActionCallback()
				end
			end)

			slot0.effectList = {}

			for slot7, slot8 in ipairs({
				&quot;saiche_sudu_01&quot;,
				&quot;saiche_sudu_02&quot;,
				&quot;saiche_sudu_03&quot;,
				&quot;saiche_sudu_04&quot;
			}) do
				table.insert(slot0.effectList, slot0.rt:Find(&quot;GameObject/&quot; .. slot8))
			end

			slot0:Show(&quot;base&quot;)
		end

		slot0.UpdatePos = function(slot0, slot1, slot2)
			slot0.pos = slot0.pos + slot1
			slot0.pos.y = math.clamp(slot0.pos.y, -slot2, slot2)

			setAnchoredPosition(slot0.rt, slot0.pos)
		end

		slot0.ActionCallback = function(slot0)
			switch(slot0.action, {
				ride = function ()
				end,
				accel = function ()
					uv0.action = &quot;ride&quot;

					uv0.comSpineAnim:SetAction(uv0.action, 0)
				end,
				fall = function ()
					uv0.isBlock = false

					uv0:Show(&quot;base&quot;)
				end,
				yunxuan = function ()
					uv0.isVertigo = false

					setActive(uv0.rt:Find(&quot;GameObject/saiche_xuanyun&quot;), false)
					setActive(uv0.rt:Find(&quot;GameObject/saiche_jiansu&quot;), false)
					uv0:Show(&quot;accel&quot;)
				end
			})
		end

		slot0.Show = function(slot0, ...)
			uv0.super.Show(slot0, ...)
			switch(slot0.state, {
				base = function ()
					uv0.action = &quot;stop&quot;
				end,
				accel = function ()
					if not uv0.afterFirstAccel then
						uv0.afterFirstAccel = true
						uv0.action = &quot;accel&quot;
					else
						uv0.action = &quot;ride&quot;
					end
				end,
				fall = function ()
					uv0.action = &quot;fall&quot;
					uv0.isBlock = true
				end,
				yunxuan = function ()
					uv0.action = &quot;yunxuan&quot;
					uv0.isVertigo = true

					setActive(uv0.rt:Find(&quot;GameObject/saiche_xuanyun&quot;), true)
					setActive(uv0.rt:Find(&quot;GameObject/saiche_jiansu&quot;), true)
					pg.CriMgr.GetInstance():PlaySoundEffect_V3(&quot;ui-yunxuan&quot;)
				end
			})
			slot0.comSpineAnim:SetAction(slot0.action, 0)
		end

		slot0.TriggerEffect = function(slot0, slot1)
			switch(slot1.__cname, {
				MoreTime = function ()
					uv0.controller:AddTime(RacingMiniGameConfig.ITEM_ADD_TIME)
				end,
				Invincibility = function ()
					uv0.invincibleTime = RacingMiniGameConfig.INVINCIBLE_TIME

					setActive(uv0.rt:Find(&quot;invincibility&quot;), true)
				end,
				TrafficCone = function ()
					uv0.controller:SetEnginePower(0)
					uv0:Show(&quot;fall&quot;)
					pg.CriMgr.GetInstance():PlaySoundEffect_V3(&quot;ui-fall&quot;)
				end,
				Roadblock = function ()
					uv0.controller:SetEnginePower(0)
					uv0:Show(&quot;fall&quot;)
					pg.CriMgr.GetInstance():PlaySoundEffect_V3(&quot;ui-fall&quot;)
				end,
				Bomb = function ()
					uv0.controller:SetEnginePower(0)
					uv0:Show(&quot;fall&quot;)
				end,
				Mire = function ()
					uv0.controller:SetEnginePower(math.min(uv0.controller.enginePower, RacingMiniGameConfig.OBSTACLE_POWER_BLOCK))
					uv0:Show(&quot;yunxuan&quot;)
				end,
				SpeedBumps = function ()
					uv0.controller:SetEnginePower(math.min(uv0.controller.enginePower, RacingMiniGameConfig.OBSTACLE_POWER_BLOCK))
					uv0:Show(&quot;yunxuan&quot;)
				end
			})
		end

		slot0.UpdateInvincibility = function(slot0, slot1)
			assert(slot0.invincibleTime)

			slot0.invincibleTime = slot0.invincibleTime - slot1

			if slot0.invincibleTime &lt;= 0 then
				setActive(slot0.rt:Find(&quot;invincibility&quot;), false)

				slot0.invincibleTime = nil
			else
				slot2 = slot0.invincibleTime &lt; 2

				setActive(slot0.rt:Find(&quot;invincibility/saiche_wudihudun_xiaoshi&quot;), slot2)
				setActive(slot0.rt:Find(&quot;invincibility/saiche_wudihudun&quot;), not slot2)
			end
		end

		return slot0
	end
}) do
	slot7 = slot6()
	slot0[slot7.__cname] = slot7
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>