<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>backchargediamondcard.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>backchargediamondcard.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;ChargeDiamondCard&quot;)
slot0.NewTagType = 2
slot0.DoubleTagType = 4

slot0.Ctor = function(slot0, slot1, slot2)
	slot0.go = slot1
	slot0.tr = tf(slot1)
	slot0.iconImg = slot0.tr:Find(&quot;IconImg&quot;)
	slot0.diamondCountText = slot0.tr:Find(&quot;Count/Text&quot;)
	slot0.priceText = slot0.tr:Find(&quot;Price/Text&quot;)
	slot0.beginTimeText = slot0.tr:Find(&quot;beginTime/text&quot;)
	slot0.backTimeText = slot0.tr:Find(&quot;backTime/text&quot;)
	slot0.beginTimeDesc = slot0.tr:Find(&quot;beginTime&quot;)
	slot0.backTimeDesc = slot0.tr:Find(&quot;backTime&quot;)
	slot0.leftDesc = slot0.tr:Find(&quot;lastAmount/text&quot;)
	slot0.goods = nil
	slot0.parentContext = slot2
end

slot0.update = function(slot0, slot1, slot2, slot3)
	slot0.goods = slot1
	slot6 = (not (table.contains(slot3, slot1.id) or slot1:firstPayDouble()) or slot1:getConfig(&quot;gem&quot;)) and slot1:hasExtraGem() and slot1:getConfig(&quot;extra_gem&quot;)

	setText(slot0.diamondCountText, slot1:getConfig(&quot;gem&quot;))

	if PLATFORM_CODE == PLATFORM_US then
		slot6 = slot1:getConfig(&quot;money&quot;)

		setText(slot0.priceText, math.floor(slot6 / 100) .. &quot;.&quot; .. slot6 - math.floor(slot6 / 100) * 100)
	else
		setText(slot0.priceText, slot1:getConfig(&quot;money&quot;))
	end

	LoadSpriteAsync(&quot;chargeicon/&quot; .. slot1:getConfig(&quot;picture&quot;), function (slot0)
		if slot0 and not IsNil(uv0.iconImg) then
			setImageSprite(uv0.iconImg, slot0, true)
		end
	end)

	if slot0.goods.buyTime then
		setText(slot0.beginTimeText, pg.TimeMgr.GetInstance():STimeDescS(slot0.goods.buyTime, &quot;%Y-%m-%d %H:%M&quot;))
	end

	if slot0.goods.refundTime then
		setText(slot0.backTimeText, pg.TimeMgr.GetInstance():STimeDescS(slot0.goods.refundTime, &quot;%Y-%m-%d %H:%M&quot;))
	end

	setText(slot0.beginTimeDesc, i18n(&quot;Supplement_pay6&quot;))
	setText(slot0.backTimeDesc, i18n(&quot;Supplement_pay7&quot;))
	setText(slot0.leftDesc, i18n(&quot;Supplement_pay8&quot;, &quot;1/1&quot;))
end

slot0.destoryTimer = function(slot0)
	if slot0.updateTimer then
		slot0.updateTimer:Stop()

		slot0.updateTimer = nil
	end
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>