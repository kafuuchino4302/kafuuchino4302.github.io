<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>guildshipequipmentspage.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>guildshipequipmentspage.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;GuildShipEquipmentsPage&quot;, import(&quot;....base.BaseSubView&quot;))

slot0.getUIName = function(slot0)
	return &quot;GuildShipEquipmentsPage&quot;
end

slot0.OnLoaded = function(slot0)
	slot0.shipNameTxt = slot0:findTF(&quot;frame/ship_info/shipname&quot;):GetComponent(typeof(Text))
	slot0.userNameTxt = slot0:findTF(&quot;frame/ship_info/username&quot;):GetComponent(typeof(Text))
	slot0.shipTypeIcon = slot0:findTF(&quot;frame/ship_info/ship_type&quot;):GetComponent(typeof(Image))
	slot0.shipStarList = UIItemList.New(slot0:findTF(&quot;frame/ship_info/stars&quot;), slot0:findTF(&quot;frame/ship_info/stars/star_tpl&quot;))
	slot0.shipLvTxt = slot0:findTF(&quot;frame/ship_info/lv/Text&quot;):GetComponent(typeof(Text))
	slot0.equipmentList = UIItemList.New(slot0:findTF(&quot;frame/equipemtns&quot;), slot0:findTF(&quot;frame/equipemtns/equipment_tpl&quot;))
	slot0.playerId = getProxy(PlayerProxy):getRawData().id
	slot0.nextBtn = slot0:findTF(&quot;frame/next&quot;)
	slot0.prevBtn = slot0:findTF(&quot;frame/prev&quot;)
end

slot0.OnInit = function(slot0)
	onButton(slot0, slot0._tf, function ()
		uv0:Hide()
	end, SFX_PANEL)
	onButton(slot0, slot0.nextBtn, function ()
		if uv0.onNext then
			uv0.onNext()
		end
	end, SFX_PANEL)
	onButton(slot0, slot0.prevBtn, function ()
		if uv0.onPrev then
			uv0.onPrev()
		end
	end, SFX_PANEL)
end

slot0.SetCallBack = function(slot0, slot1, slot2)
	slot0.onPrev = slot1
	slot0.onNext = slot2
end

slot0.Show = function(slot0, slot1, slot2, slot3, slot4)
	uv0.super.Show(slot0)

	slot0.OnHide = slot3

	if slot4 then
		slot4()
	end

	slot0:Flush(slot1, slot2)
	pg.UIMgr:GetInstance():BlurPanel(slot0._tf)
	setActive(slot0.nextBtn, slot0.onNext ~= nil)
	SetActive(slot0.prevBtn, slot0.onPrev ~= nil)
end

slot0.Flush = function(slot0, slot1, slot2)
	slot0.ship = slot1
	slot0.member = slot2

	slot0:UpdateShipInfo()
	slot0:UpdateEquipments()
end

slot0.Refresh = function(slot0, slot1, slot2)
	slot0:Flush(slot1, slot2)
end

slot0.UpdateShipInfo = function(slot0)
	slot0.shipNameTxt.text = slot0.ship:getName()
	slot0.userNameTxt.text = slot0.playerId == slot0.member.id and &quot;&quot; or i18n(&quot;guild_ship_from&quot;) .. slot2.name
	slot0.shipTypeIcon.sprite = GetSpriteFromAtlas(&quot;shiptype&quot;, shipType2print(pg.ship_data_statistics[slot1.configId].type))
	slot6 = slot1:getStar()

	slot0.shipStarList:make(function (slot0, slot1, slot2)
		if slot0 == UIItemList.EventUpdate then
			setActive(slot2:Find(&quot;star_tpl&quot;), slot1 &lt;= uv0)
		end
	end)
	slot0.shipStarList:align(slot1:getMaxStar())

	slot0.shipLvTxt.text = slot1.level
end

slot0.UpdateEquipments = function(slot0)
	slot2 = slot0.ship:getActiveEquipments()

	slot0.equipmentList:make(function (slot0, slot1, slot2)
		if slot0 == UIItemList.EventUpdate then
			slot3 = uv0[slot1 + 1]

			setActive(slot2:Find(&quot;info&quot;), slot3)
			setActive(slot2:Find(&quot;empty&quot;), not slot3)

			if slot3 then
				updateEquipment(slot2:Find(&quot;info&quot;), slot3)
				setText(slot2:Find(&quot;info/name_bg/Text&quot;), shortenString(slot3:getConfig(&quot;name&quot;), 5))
			end
		end
	end)
	slot0.equipmentList:align(5)
end

slot0.Hide = function(slot0)
	uv0.super.Hide(slot0)
	pg.UIMgr:GetInstance():UnblurPanel(slot0._tf, slot0._parentTf)

	if slot0.OnHide then
		slot0.OnHide()

		slot0.OnHide = nil
	end
end

slot0.OnDestroy = function(slot0)
	slot0:Hide()
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>