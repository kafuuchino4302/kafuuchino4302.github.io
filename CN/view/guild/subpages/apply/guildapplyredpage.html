<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>guildapplyredpage.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>guildapplyredpage.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;GuildApplyRedPage&quot;, import(&quot;....base.BaseSubView&quot;))

slot0.getUIName = function(slot0)
	return &quot;GuildApplyRedUI&quot;
end

slot0.OnLoaded = function(slot0)
	slot0.iconTF = findTF(slot0._tf, &quot;panel/frame/policy_container/input_frame/shipicon/icon&quot;):GetComponent(typeof(Image))
	slot0.circle = findTF(slot0._tf, &quot;panel/frame/policy_container/input_frame/shipicon/frame&quot;)
	slot0.manifesto = findTF(slot0._tf, &quot;panel/frame/policy_container/input_frame/Text&quot;):GetComponent(typeof(Text))
	slot0.starsTF = findTF(slot0._tf, &quot;panel/frame/policy_container/input_frame/shipicon/stars&quot;)
	slot0.starTF = findTF(slot0._tf, &quot;panel/frame/policy_container/input_frame/shipicon/stars/star&quot;)
	slot0.applyBtn = findTF(slot0._tf, &quot;panel/frame/confirm_btn&quot;)
	slot0.cancelBtn = findTF(slot0._tf, &quot;panel/frame/cancel_btn&quot;)
	slot0.nameTF = findTF(slot0._tf, &quot;panel/frame/name&quot;):GetComponent(typeof(Text))
	slot0.levelTF = findTF(slot0._tf, &quot;panel/frame/info/level/Text&quot;):GetComponent(typeof(Text))
	slot0.countTF = findTF(slot0._tf, &quot;panel/frame/info/count/Text&quot;):GetComponent(typeof(Text))
	slot0.flagName = findTF(slot0._tf, &quot;panel/frame/policy_container/name/Text&quot;):GetComponent(typeof(Text))
	slot0.policyTF = findTF(slot0._tf, &quot;panel/frame/policy_container/policy/Text&quot;):GetComponent(typeof(Text))
end

slot0.OnInit = function(slot0)
	onButton(slot0, slot0.applyBtn, function ()
		pg.MsgboxMgr.GetInstance():ShowMsgBox({
			hideNo = true,
			yesText = &quot;text_confirm&quot;,
			limit = 20,
			type = MSGBOX_TYPE_INPUT,
			placeholder = i18n(&quot;guild_request_msg_placeholder&quot;),
			title = i18n(&quot;guild_request_msg_title&quot;),
			onYes = function (slot0)
				uv0:emit(JoinGuildMediator.APPLY, uv0.guildVO.id, slot0)
			end
		})
	end, SFX_PANEL)
	onButton(slot0, slot0.cancelBtn, function ()
		uv0:Hide()
	end, SFX_PANEL)
end

slot0.Show = function(slot0, slot1)
	slot0.guildVO = slot1

	slot0:UpdateApplyPanel()
	pg.UIMgr.GetInstance():BlurPanel(slot0._tf)
	uv0.super.Show(slot0)
end

slot0.UpdateApplyPanel = function(slot0)
	slot1 = slot0.guildVO
	slot2 = Ship.New({
		configId = slot1:getCommader().icon
	})

	LoadSpriteAsync(&quot;QIcon/&quot; .. slot2:getPainting(), function (slot0)
		uv0.iconTF.sprite = slot0
	end)

	slot0.manifesto.text = slot1.manifesto

	for slot8 = slot0.starsTF.childCount, pg.ship_data_statistics[slot2.configId].star - 1 do
		cloneTplTo(slot0.starTF, slot0.starsTF)
	end

	for slot8 = 1, slot4 do
		setActive(slot0.starsTF:GetChild(slot8 - 1), slot8 &lt;= slot3.star)
	end

	slot0.nameTF.text = slot1.name
	slot0.levelTF.text = slot1.level &lt; 9 and &quot;0&quot; .. slot1.level or slot1.level
	slot0.countTF.text = slot1.memberCount .. &quot;/&quot; .. slot1:getMaxMember()
	slot0.flagName.text = slot1:getCommader().name
	slot0.policyTF.text = slot1:getPolicyName()
	slot5 = slot1:getCommader()
	slot6 = AttireFrame.attireFrameRes(slot5, slot5.id == getProxy(PlayerProxy):getRawData().id, AttireConst.TYPE_ICON_FRAME, slot5.propose)

	PoolMgr.GetInstance():GetPrefab(&quot;IconFrame/&quot; .. slot6, slot6, true, function (slot0)
		if IsNil(uv0._tf) then
			return
		end

		if uv0.circle then
			slot0.name = uv1
			findTF(slot0.transform, &quot;icon&quot;):GetComponent(typeof(Image)).raycastTarget = false

			setParent(slot0, uv0.circle, false)
		else
			PoolMgr.GetInstance():ReturnPrefab(&quot;IconFrame/&quot; .. uv1, uv1, slot0)
		end
	end)
end

slot0.Hide = function(slot0)
	uv0.super.Hide(slot0)
	pg.UIMgr:GetInstance():UnblurPanel(slot0._tf, slot0._parentTf)

	if slot0.circle.childCount &gt; 0 then
		slot1 = slot0.circle:GetChild(0).gameObject

		PoolMgr.GetInstance():ReturnPrefab(&quot;IconFrame/&quot; .. slot1.name, slot1.name, slot1)
	end
end

slot0.OnDestroy = function(slot0)
	if slot0:isShowing() then
		slot0:Hide()
	end
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>