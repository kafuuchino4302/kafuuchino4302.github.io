<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dorm3dfurnitureacesseswindow.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>dorm3dfurnitureacesseswindow.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;Dorm3dFurnitureAcessesWindow&quot;, import(&quot;view.base.BaseUI&quot;))

slot0.getUIName = function(slot0)
	return &quot;Dorm3dFurnitureAcessesWindow&quot;
end

slot0.init = function(slot0)
end

slot0.didEnter = function(slot0)
	onButton(slot0, slot0._tf:Find(&quot;Mask&quot;), function ()
		existCall(uv0.contextData.onClose)
		uv0:closeView()
	end)
	onButton(slot0, slot0._tf:Find(&quot;Window/Close&quot;), function ()
		existCall(uv0.contextData.onClose)
		uv0:closeView()
	end, SFX_CANCEL)
	setText(slot0._tf:Find(&quot;Window/Title&quot;), slot0.contextData.title)
	setText(slot0._tf:Find(&quot;Window/Acesses/Text&quot;), i18n(&quot;dorm3d_furniture_window_acesses&quot;))
	slot0:ShowSingleItemBox(slot0.contextData)
	slot0:ShowCommonObtainWindow(slot0.contextData)
end

slot0.ShowSingleItemBox = function(slot0, slot1)
	slot2 = slot0._tf:Find(&quot;Window/Icon&quot;)

	updateDrop(slot2, slot1.drop)
	GetImageSpriteFromAtlasAsync(&quot;weaponframes&quot;, &quot;dorm3d_&quot; .. ItemRarity.Rarity2Print(slot1.drop:getConfig(&quot;rarity&quot;)), slot2)
	setText(slot0._tf:Find(&quot;Window/Name&quot;), slot1.name or slot1.drop.cfg.name or &quot;&quot;)
	setText(slot0._tf:Find(&quot;Window/Count&quot;), i18n(&quot;child_msg_owned&quot;, setColorStr(slot1.drop.count, &quot;#39bfff&quot;)))
	setText(slot0._tf:Find(&quot;Window/Content&quot;), slot1.drop.cfg.desc)
end

slot0.ShowCommonObtainWindow = function(slot0, slot1)
	slot2 = defaultValue(slot1.showGOBtn, false)
	slot0.obtainSkipList = slot0.obtainSkipList or UIItemList.New(slot0._tf:Find(&quot;Window/List&quot;), slot0._tf:Find(&quot;Window/List&quot;):GetChild(0))

	slot0.obtainSkipList:make(function (slot0, slot1, slot2)
		if slot0 == UIItemList.EventUpdate then
			slot3 = uv0.list[slot1 + 1]
			slot5 = slot3[2]
			slot6 = slot3[3]

			slot2:Find(&quot;Mask/Text&quot;):GetComponent(&quot;ScrollText&quot;):SetText(HXSet.hxLan(slot3[1]))
			setActive(slot2:Find(&quot;Button&quot;), uv1 and slot5[1] ~= &quot;&quot; and slot5[1] ~= &quot;COLLECTSHIP&quot;)

			if slot5[1] ~= &quot;&quot; then
				onButton(uv2, slot2:Find(&quot;Button&quot;), function ()
					if uv0 and uv0 ~= 0 then
						if not getProxy(ActivityProxy):getActivityById(uv0) or slot0:isEnd() then
							pg.TipsMgr.GetInstance():ShowTips(i18n(&quot;collection_way_is_unopen&quot;))

							return
						end
					elseif uv1[1] == &quot;SHOP&quot; and uv1[2].warp == NewShopsScene.TYPE_MILITARY_SHOP and not pg.SystemOpenMgr.GetInstance():isOpenSystem(getProxy(PlayerProxy):getData().level, &quot;MilitaryExerciseMediator&quot;) then
						pg.TipsMgr.GetInstance():ShowTips(i18n(&quot;military_shop_no_open_tip&quot;))

						return
					elseif uv1[1] == &quot;LEVEL&quot; and uv1[2] then
						if getProxy(ChapterProxy):getChapterById(uv1[2].chapterid):isUnlock() then
							if slot1:getActiveChapter() and slot3.id ~= slot0 then
								pg.TipsMgr.GetInstance():ShowTips(i18n(&quot;collect_chapter_is_activation&quot;))

								return
							else
								slot4 = {
									mapIdx = slot2:getConfig(&quot;map&quot;)
								}

								if slot2.active then
									slot4.chapterId = slot2.id
								else
									slot4.openChapterId = slot0
								end

								pg.m02:sendNotification(GAME.GO_SCENE, SCENE.LEVEL, slot4)
							end
						else
							pg.TipsMgr.GetInstance():ShowTips(i18n(&quot;acquisitionmode_is_not_open&quot;))

							return
						end
					elseif uv1[1] == &quot;COLLECTSHIP&quot; then
						if uv2.mediatorName == CollectionMediator.__cname then
							pg.m02:sendNotification(CollectionMediator.EVENT_OBTAIN_SKIP, {
								toggle = 2,
								displayGroupId = uv1[2].shipGroupId
							})
						else
							pg.m02:sendNotification(GAME.GO_SCENE, SCENE.COLLECTSHIP, {
								toggle = 2,
								displayGroupId = uv1[2].shipGroupId
							})
						end
					elseif uv1[1] == &quot;SHOP&quot; then
						pg.m02:sendNotification(GAME.GO_SCENE, SCENE[uv1[1]], uv1[2])
					else
						pg.m02:sendNotification(GAME.GO_SCENE, SCENE[uv1[1]], uv1[2])
					end

					uv3:closeView()
				end, SFX_PANEL)
			end
		end
	end)
	slot0.obtainSkipList:align(#slot1.list)
end

slot0.willExit = function(slot0)
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>