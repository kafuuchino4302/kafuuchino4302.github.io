<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dorm3dphotoarlayer.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>dorm3dphotoarlayer.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;Dorm3dPhotoARLayer&quot;, import(&quot;view.base.BaseUI&quot;))

slot0.getUIName = function(slot0)
	return &quot;Dorm3dARPhotoUI&quot;
end

slot0.PANEL = {
	ACTION = 1,
	LIGHTING = 3,
	CAMERA = 2
}

slot0.init = function(slot0)
	slot0.centerPanel = slot0._tf:Find(&quot;Center&quot;)
	slot0.normalPanel = slot0._tf:Find(&quot;Center/Normal&quot;)

	setActive(slot0.normalPanel, true)

	slot0.settingPanel = slot0._tf:Find(&quot;Center/Settings&quot;)
	slot0.btnAction = slot0.settingPanel:Find(&quot;Action&quot;)
	slot0.btnCamera = slot0.settingPanel:Find(&quot;Camera&quot;)
	slot0.btnLighting = slot0.settingPanel:Find(&quot;Lighting&quot;)
	slot0.panelAction = slot0.settingPanel:Find(&quot;ActionSelect&quot;)

	setActive(slot0.panelAction, false)
	setActive(slot0.panelAction:Find(&quot;Mask&quot;), false)

	slot0.panelCamera = slot0.settingPanel:Find(&quot;CameraSettings&quot;)

	setActive(slot0.panelCamera, false)

	slot0.panelLightning = slot0.settingPanel:Find(&quot;LightningSettings&quot;)

	setActive(slot0.panelLightning, false)

	slot0.listZones = slot0._tf:Find(&quot;ZoneList&quot;)

	setActive(slot0.listZones, false)

	slot0.zoneMask = slot0.listZones:Find(&quot;Mask&quot;)
	slot0.btnHideUI = slot0._tf:Find(&quot;Center/HideUI&quot;)
	slot0.btnReset = slot0._tf:Find(&quot;Center/Reset&quot;)
	slot0.btnFreeze = slot0._tf:Find(&quot;Center/Freeze&quot;)
	slot0.btnZone = slot0._tf:Find(&quot;Center/Zone&quot;)
	slot0.btnAr = slot0._tf:Find(&quot;Center/Ar&quot;)
	slot0.btnAnimSpeed = slot0._tf:Find(&quot;Center/AnimSpeed&quot;)
	slot0.listAnimSpeed = slot0.btnAnimSpeed:Find(&quot;Bar&quot;)

	setActive(slot0.listAnimSpeed, false)

	slot0.textAnimSpeed = slot0.btnAnimSpeed:Find(&quot;Text&quot;)
	slot0.hideuiMask = slot0._tf:Find(&quot;RightTop/Mask&quot;)

	setActive(slot0.hideuiMask, false)

	slot0.btnFilm = slot0._tf:Find(&quot;RightTop/Film/Film&quot;)
	slot0.filmTime = slot0._tf:Find(&quot;RightTop/FilmTime&quot;)

	setActive(slot0.filmTime, false)

	slot0.shareUI = slot0._tf:Find(&quot;ShareUI&quot;)

	setActive(slot0.shareUI, false)

	slot0.ysScreenShoter = slot0._tf:Find(&quot;Shoter&quot;):GetComponent(typeof(YSTool.YSScreenShoter))

	setText(slot0.panelCamera:Find(&quot;Layout/DepthOfField/Title/Text&quot;), i18n(&quot;dorm3d_photo_len&quot;))
	setText(slot0.panelCamera:Find(&quot;Layout/DepthOfField/Switch/Title&quot;), i18n(&quot;dorm3d_photo_depthoffield&quot;))
	setText(slot0.panelCamera:Find(&quot;Layout/DepthOfField/DepthOfField/FocusDistance/Title&quot;), i18n(&quot;dorm3d_photo_focusdistance&quot;))
	setText(slot0.panelCamera:Find(&quot;Layout/DepthOfField/DepthOfField/BlurRadius/Title&quot;), i18n(&quot;dorm3d_photo_focusstrength&quot;))
	setText(slot0.panelCamera:Find(&quot;Layout/Paramaters/Title/Text&quot;), i18n(&quot;dorm3d_photo_paramaters&quot;))
	setText(slot0.panelCamera:Find(&quot;Layout/Paramaters/PostExposure/PostExposure/Title&quot;), i18n(&quot;dorm3d_photo_postexposure&quot;))
	setText(slot0.panelCamera:Find(&quot;Layout/Paramaters/Saturation/Saturation/Title&quot;), i18n(&quot;dorm3d_photo_saturation&quot;))
	setText(slot0.panelCamera:Find(&quot;Layout/Paramaters/Contrast/Contrast/Title&quot;), i18n(&quot;dorm3d_photo_contrast&quot;))
	setText(slot0.panelCamera:Find(&quot;Layout/Other/Title/Text&quot;), i18n(&quot;dorm3d_photo_Others&quot;))
	setText(slot0.panelCamera:Find(&quot;Layout/Other/HideCharacter/Title&quot;), i18n(&quot;dorm3d_photo_hidecharacter&quot;))
	setText(slot0.panelCamera:Find(&quot;Layout/Other/FaceCamera/Title&quot;), i18n(&quot;dorm3d_photo_facecamera&quot;))
	setText(slot0.panelLightning:Find(&quot;Layout/Title/Lighting/Name&quot;), i18n(&quot;dorm3d_photo_lighting&quot;))
	setText(slot0.panelLightning:Find(&quot;Layout/Title/Lighting/Selected&quot;), i18n(&quot;dorm3d_photo_lighting&quot;))
	setText(slot0.panelLightning:Find(&quot;Layout/Title/Filter/Name&quot;), i18n(&quot;dorm3d_photo_filter&quot;))
	setText(slot0.panelLightning:Find(&quot;Layout/Title/Filter/Selected&quot;), i18n(&quot;dorm3d_photo_filter&quot;))
	setText(slot0.panelLightning:Find(&quot;Layout/Lighting/Strength/Name&quot;), i18n(&quot;dorm3d_photo_strength&quot;))
	setText(slot0.panelAction:Find(&quot;Layout/Title/Regular/Name&quot;), i18n(&quot;dorm3d_photo_regular_anim&quot;))
	setText(slot0.panelAction:Find(&quot;Layout/Title/Regular/Selected&quot;), i18n(&quot;dorm3d_photo_regular_anim&quot;))
	setText(slot0.panelAction:Find(&quot;Layout/Title/Special/Name&quot;), i18n(&quot;dorm3d_photo_special_anim&quot;))
	setText(slot0.panelAction:Find(&quot;Layout/Title/Special/Selected&quot;), i18n(&quot;dorm3d_photo_special_anim&quot;))

	slot0.mainCamera = GameObject.Find(&quot;AR/XR Origin/Camera Offset/Main Camera&quot;):GetComponent(typeof(Camera))
	slot0.stopRecBtn = slot0:findTF(&quot;stopRec&quot;)
	slot0.videoTipPanel = slot0:findTF(&quot;videoTipPanel&quot;)

	setActive(slot0.videoTipPanel, false)
end

slot0.SetSceneRoot = function(slot0, slot1)
	slot0.scene = slot1
end

slot0.SetRoom = function(slot0, slot1)
	slot0.room = getProxy(ApartmentProxy):getRoom(slot1)
end

slot0.SetGroupId = function(slot0, slot1)
	slot0.groupId = slot1
end

slot0.onBackPressed = function(slot0)
	if slot0.recordState then
		triggerButton(slot0.btnFilm)

		return
	end

	if slot0.activeSetting then
		triggerButton(slot0._tf:Find(&quot;Center/Settings/Back&quot;))

		return
	end

	slot0:closeView()
end

slot0.didEnter = function(slot0)
	setActive(slot0._tf:Find(&quot;Center/Normal/Back&quot;), false)
	onButton(slot0, slot0._tf:Find(&quot;Center/Normal/Back&quot;), function ()
		uv0:onBackPressed()
	end, SFX_CANCEL)

	slot1 = slot0.normalPanel:Find(&quot;Zoom/Slider&quot;)

	setSlider(slot1, 0, 1, 0)
	onSlider(slot0, slot1, function (slot0)
		uv0:emit(Dorm3dPhotoARMediator.SCENE_CALL, &quot;SetPinchValue&quot;, (1 - slot0) * 0.5 + 0.5)
	end)

	slot0.activeSetting = false

	onButton(slot0, slot0._tf:Find(&quot;Center/Normal/Settings&quot;), function ()
		uv0.activeSetting = true

		quickPlayAnimation(uv0._tf:Find(&quot;Center&quot;), &quot;anim_dorm3d_photo_normal_out&quot;)
		uv0:emit(Dorm3dPhotoARMediator.ACTIVE_AR_UI, false)
		uv0:UpdateActionPanel()
	end, SFX_PANEL)
	onButton(slot0, slot0._tf:Find(&quot;Center/Settings/Back&quot;), function ()
		uv0.activeSetting = false

		quickPlayAnimation(uv0._tf:Find(&quot;Center&quot;), &quot;anim_dorm3d_photo_normal_in&quot;)
		uv0:emit(Dorm3dPhotoARMediator.ACTIVE_AR_UI, true)
	end, SFX_CANCEL)

	slot0.hideUI = false

	onButton(slot0, slot0.btnHideUI, function ()
		if uv0.hideUI then
			return
		end

		setActive(uv0.hideuiMask, true)
		setActive(uv0.centerPanel, false)

		uv0.hideUI = true
	end, SFX_PANEL)
	onButton(slot0, slot0.hideuiMask, function ()
		if not uv0.hideUI then
			return
		end

		setActive(uv0.centerPanel, true)
		setActive(uv0.hideuiMask, false)

		uv0.hideUI = false
	end)
	onButton(slot0, slot0.btnReset, function ()
		uv0:emit(Dorm3dPhotoARMediator.SCENE_CALL, &quot;ResetPhotoCameraPosition&quot;)
	end, SFX_PANEL)
	onButton(slot0, slot0.btnFilm, function ()
		slot0 = function(slot0)
			setActive(uv0.centerPanel, slot0)

			uv0:findTF(&quot;RightTop&quot;):GetComponent(&quot;CanvasGroup&quot;).alpha = slot0 and 1 or 0

			uv0:emit(Dorm3dPhotoARMediator.ACTIVE_AR_UI, slot0)
		end

		if not uv0.recordState then
			slot1 = function(slot0)
				if not slot0 then
					uv0(true)

					uv1.recordState = false

					LeanTween.moveX(uv1.stopRecBtn, uv1.stopRecBtn.rect.width, 0.15)
				else
					uv1.recordState = true
				end
			end

			slot2 = function()
				setActive(uv0.stopRecBtn, true)
				LeanTween.moveX(uv0.stopRecBtn, 0, 0.15):setOnComplete(System.Action(function ()
					uv0.SetMute(true)

					uv1.recordFilePath = YSNormalTool.RecordTool.GenRecordFilePath()

					YSNormalTool.RecordTool.StartRecording(uv2, uv1.recordFilePath)
				end))
			end

			seriesAsync({
				function (slot0)
					PermissionHelper.Request3DDorm(slot0, nil)
				end,
				function (slot0)
					uv0(false)

					if not PlayerPrefs.GetInt(&quot;hadShowForVideoTipDorm&quot;, 0) or slot1 &lt;= 0 then
						PlayerPrefs.SetInt(&quot;hadShowForVideoTipDorm&quot;, 1)

						uv1:findTF(&quot;Text&quot;, uv1.videoTipPanel):GetComponent(&quot;Text&quot;).text = i18n(&quot;word_take_video_tip&quot;)

						onButton(uv1, uv1.videoTipPanel, function ()
							setActive(uv0.videoTipPanel, false)
							uv1()
						end)
						setActive(uv1.videoTipPanel, true)
					else
						uv2()
					end
				end
			})
		end
	end, SFX_PANEL)
	onButton(slot0, slot0.stopRecBtn, function ()
		slot0 = function(slot0)
			if slot0 and PLATFORM == PLATFORM_ANDROID then
				pg.MsgboxMgr.GetInstance():ShowMsgBox({
					content = i18n(&quot;word_save_video&quot;),
					onNo = function ()
						if System.IO.File.Exists(uv0.recordFilePath) then
							System.IO.File.Delete(uv0.recordFilePath)
						end
					end,
					onYes = function ()
						YSNormalTool.MediaTool.SaveVideoToAlbum(uv0.recordFilePath, function (slot0, slot1)
							if slot0 then
								pg.TipsMgr.GetInstance():ShowTips(i18n(&quot;word_save_ok&quot;))

								if System.IO.File.Exists(uv0.recordFilePath) then
									System.IO.File.Delete(uv0.recordFilePath)
								end
							end
						end)
					end
				})
			end

			uv0.recordState = false
		end

		slot1 = function(slot0)
			setActive(uv0.centerPanel, slot0)

			uv0:findTF(&quot;RightTop&quot;):GetComponent(&quot;CanvasGroup&quot;).alpha = slot0 and 1 or 0

			uv0:emit(Dorm3dPhotoARMediator.ACTIVE_AR_UI, slot0)
		end

		if not LeanTween.isTweening(go(uv0.stopRecBtn)) then
			LeanTween.moveX(uv0.stopRecBtn, uv0.stopRecBtn.rect.width, 0.15):setOnComplete(System.Action(function ()
				setActive(uv0.stopRecBtn, false)
				seriesAsync({
					function (slot0)
						YSNormalTool.RecordTool.StopRecording(uv0)
						uv1(true)
						uv2.SetMute(false)
					end
				})
			end))
		end
	end)
	setActive(slot0.stopRecBtn, false)
	onButton(slot0, slot0._tf:Find(&quot;RightTop/Film/Switch&quot;), function ()
		GetOrAddComponent(uv0._tf:Find(&quot;RightTop/Film&quot;), typeof(CanvasGroup)).blocksRaycasts = false

		quickPlayAnimation(uv0._tf:Find(&quot;RightTop&quot;), &quot;anim_dorm3d_photo_FtoS&quot;)
	end, SFX_PANEL)

	slot4 = slot0._tf

	onButton(slot0, slot4:Find(&quot;RightTop/Shot/Shot&quot;), function ()
		slot0 = function(slot0)
			setActive(uv0.centerPanel, slot0)
			setActive(uv0._tf:Find(&quot;RightTop&quot;), slot0)

			if PlayerPrefs.GetInt(SHOW_TOUCH_EFFECT, 1) &gt; 0 then
				setActive(pg.UIMgr.GetInstance().OverlayEffect, slot0)
			end
		end

		slot1 = function(slot0)
			warning(&quot;截图结果：&quot; .. tostring(slot0))
		end

		slot2 = function(slot0, slot1)
			uv0:emit(Dorm3dPhotoARMediator.SHARE_PANEL, slot1, slot0)
			pg.m02:sendNotification(GAME.APARTMENT_TRACK, Dorm3dTrackCommand.BuildDataCamera(uv0.groupId, 3, uv0.room:GetConfigID(), Dorm3dCameraAnim.New({
				configId = uv0.animID
			}):GetStateName()))
		end

		slot3 = function(slot0)
			uv0(true)
			uv1(Tex2DExtension.EncodeToJPG(slot0), slot0)
		end

		BLHX.Rendering.HotUpdate.ScreenShooterPass.TakePhoto(uv0.mainCamera, callback)
	end, &quot;ui-dorm_photograph&quot;)

	GetOrAddComponent(slot0._tf:Find(&quot;RightTop/Film&quot;), typeof(CanvasGroup)).blocksRaycasts = false

	onButton(slot0, slot0._tf:Find(&quot;RightTop/Shot/Switch&quot;), function ()
		GetOrAddComponent(uv0._tf:Find(&quot;RightTop/Film&quot;), typeof(CanvasGroup)).blocksRaycasts = true

		quickPlayAnimation(uv0._tf:Find(&quot;RightTop&quot;), &quot;anim_dorm3d_photo_StoF&quot;)
	end, SFX_PANEL)
	onButton(slot0, slot0.btnAnimSpeed, function ()
		setActive(uv0.listAnimSpeed, not isActive(uv0.listAnimSpeed))
	end, SFX_PANEL)
	onButton(slot0, slot0.btnZone, function ()
		setActive(uv0.listZones, not isActive(uv0.listZones))
	end, SFX_PANEL)
	onButton(slot0, slot0.zoneMask, function ()
		setActive(uv0.listZones, false)
	end)
	onButton(slot0, slot0.btnAr, function ()
		uv0:emit(Dorm3dPhotoMediator.GO_AR)
	end)

	slot0.activePanel = 1
	slot3 = {
		{
			btn = slot0.btnAction,
			On = function ()
				uv0:UpdateActionPanel()
			end,
			Off = function ()
			end
		},
		{
			btn = slot0.btnCamera,
			On = function ()
			end,
			Off = function ()
			end
		},
		{
			btn = slot0.btnLighting,
			On = function ()
			end,
			Off = function ()
			end
		}
	}

	table.Ipairs(slot3, function (slot0, slot1)
		onToggle(uv0, slot1.btn, function (slot0)
			if not slot0 then
				return
			end

			table.Ipairs(uv0, function (slot0, slot1)
				if slot0 == uv0 then
					return
				end

				slot1.Off()
			end)

			uv2.activePanel = uv1

			uv3.On()
		end, SFX_PANEL)
	end)
	(function ()
		triggerToggle(({
			uv0.panelAction:Find(&quot;Layout/Title/Regular&quot;)
		})[1], true)
	end)()
	(function ()
		triggerToggle(({
			uv0.panelLightning:Find(&quot;Layout/Title/Lighting&quot;)
		})[1], true)
	end)()
	slot0:InitData()
	triggerToggle(slot3[slot0.activePanel].btn, true)
	slot0:emit(Dorm3dPhotoARMediator.AR_PHOTO_INITED)
end

slot0.InitData = function(slot0)
	slot0:RefreshData()
end

slot0.RefreshData = function(slot0)
	slot0.animID = slot0.room:getAllARAnimationListByShip(slot0.groupId)[1]:GetConfigID()
	slot0.animSpeed = 1
end

slot1 = 0.2

slot0.UpdateActionPanel = function(slot0)
	if not slot0.activeSetting then
		return
	end

	if slot0.activePanel ~= uv0.PANEL.ACTION then
		return
	end

	slot1 = slot0.room
	slot2 = slot0.panelAction
	slot2 = slot2:Find(&quot;Layout/Regular/Scroll/Viewport/Content&quot;)

	slot4 = function(slot0, slot1)
		if uv0.animPlaying then
			return
		end

		if uv0.animID == slot0:GetConfigID() then
			return
		end

		slot3 = uv0:GetAnimPlayList(slot2)
		slot4 = Dorm3dCameraAnim.New({
			configId = uv0.animID
		}):GetFinishAnimID()
		uv0.animID = slot2

		uv1()
		uv0:BlockActionPanel(true)

		uv0.animPlaying = true
		slot6 = table.indexof(slot3, _.detect(slot3, function (slot0)
			return slot0:GetConfigID() == uv0
		end)) or 0
		slot6 = slot1:Find(&quot;Slider&quot;):GetComponent(typeof(Slider))

		setActive(slot1:Find(&quot;Slider&quot;), true)

		slot7 = function()
			setActive(uv0:Find(&quot;Selected&quot;), true)
			setActive(uv0:Find(&quot;Slider&quot;), false)
			uv1:BlockActionPanel(false)

			uv1.animPlaying = nil
		end

		if #_.rest(slot3, slot6 + 1) == 0 then
			slot7()

			return
		end

		slot8 = _.reduce(slot3, 0, function (slot0, slot1)
			return slot0 + math.max(uv0, slot1:GetAnimTime())
		end)

		if uv0.timerAnim then
			uv0.timerAnim:Stop()
		end

		uv0.animInfo = {
			index = 1,
			passedTime = 0,
			ratio = 0,
			animPlayList = slot3,
			totalTime = slot8,
			startStamp = Time.time
		}
		uv0.timerAnim = FrameTimer.New(function ()
			slot0 = uv0.animInfo
			slot2 = math.max(uv1, slot0.animPlayList[slot0.index]:GetAnimTime())
			slot5 = math.min(1, slot0.ratio + (Time.time - slot0.startStamp) * uv0.animSpeed / slot2)
			uv2.value = (slot0.passedTime + slot2 * slot5) / uv3

			if slot5 &lt; 1 then
				return
			end

			slot0.index = slot0.index + 1
			slot0.ratio = 0
			slot0.passedTime = slot0.passedTime + slot2
			slot0.startStamp = slot4

			warning(slot0.startStamp)

			if slot0.index &gt; #slot0.animPlayList then
				uv4()
				uv0.timerAnim:Stop()

				uv0.timerAnim = nil
				uv0.animInfo = nil

				return
			end

			uv0:emit(Dorm3dPhotoARMediator.SCENE_CALL, &quot;PlaySingleAction&quot;, slot0.animPlayList[slot0.index]:GetStateName())
		end, 1, -1)
		slot9 = uv0.animInfo.animPlayList[1]

		if slot5 == 1 then
			slot10 = uv0

			slot10:emit(Dorm3dPhotoARMediator.SCENE_CALL, &quot;SwitchAnim&quot;, slot9:GetStateName())
			onNextTick(function ()
				uv0:emit(Dorm3dPhotoARMediator.SCENE_CALL, &quot;ResetCharPos&quot;)
			end)
		else
			uv0:emit(Dorm3dPhotoARMediator.SCENE_CALL, &quot;PlaySingleAction&quot;, slot9:GetStateName())
		end

		uv0.timerAnim:Start()
	end

	UIItemList.StaticAlign(slot2, slot2:GetChild(0), #slot1:getAllARAnimationListByShip(slot0.groupId), function (slot0, slot1, slot2)
		if slot0 ~= UIItemList.EventUpdate then
			return
		end

		slot3 = uv0[slot1 + 1]

		setText(slot2:Find(&quot;Name&quot;), slot3:GetName())
		GetImageSpriteFromAtlasAsync(string.format(&quot;Dorm3DPhoto/%s&quot;, slot3:GetZoneIcon()), &quot;&quot;, slot2:Find(&quot;Icon&quot;))
		setActive(slot2:Find(&quot;Slider&quot;), false)
		setActive(slot2:Find(&quot;Selected&quot;), false)
		onButton(uv1, slot2, function ()
			uv0(uv1, uv2)
		end)
	end)
	(function ()
		slot2 = uv0

		UIItemList.StaticAlign(uv0, slot2:GetChild(0), #uv1, function (slot0, slot1, slot2)
			if slot0 ~= UIItemList.EventUpdate then
				return
			end

			setActive(slot2:Find(&quot;Selected&quot;), uv0[slot1 + 1]:GetConfigID() == uv1.animID)
			setActive(slot2:Find(&quot;Slider&quot;), slot3:GetConfigID() == uv1.animID and tobool(uv1.timerAnim))
		end)
	end)()
end

slot0.BlockActionPanel = function(slot0, slot1)
end

slot0.SetPhotoUIActive = function(slot0, slot1)
	setActive(slot0._tf:Find(&quot;RightTop&quot;), slot1)
	setActive(slot0._tf:Find(&quot;Center&quot;), slot1)
end

slot0.GetAnimPlayList = function(slot0, slot1)
	slot2 = slot1
	slot3 = {}

	while true do
		if not Dorm3dCameraAnim.New({
			configId = slot2
		}) then
			return slot3
		end

		table.insert(slot3, 1, slot4)

		if slot4:GetPreAnimID() == 0 then
			return slot3
		end
	end
end

slot0.SetMute = function(slot0)
	if slot0 then
		CriWare.CriAtom.SetCategoryVolume(&quot;Category_CV&quot;, 0)
		CriWare.CriAtom.SetCategoryVolume(&quot;Category_BGM&quot;, 0)
		CriWare.CriAtom.SetCategoryVolume(&quot;Category_SE&quot;, 0)
	else
		CriWare.CriAtom.SetCategoryVolume(&quot;Category_CV&quot;, pg.CriMgr.GetInstance():getCVVolume())
		CriWare.CriAtom.SetCategoryVolume(&quot;Category_BGM&quot;, pg.CriMgr.GetInstance():getBGMVolume())
		CriWare.CriAtom.SetCategoryVolume(&quot;Category_SE&quot;, pg.CriMgr.GetInstance():getSEVolume())
	end
end

slot0.willExit = function(slot0)
	if slot0.timerAnim then
		slot0.timerAnim:Stop()

		slot0.timerAnim = nil
	end

	if slot0.filmTimer then
		slot0.filmTimer:Stop()

		slot0.filmTimer = nil
	end
end

slot0.SetCamaraPinchSliderValue = function(slot0, slot1)
	setSlider(slot0.normalPanel:Find(&quot;Zoom/Slider&quot;), 0, 1, 1 - (slot1 - 0.5) / 0.5)
end

slot0.ShowPhotoImage = function(slot0, slot1)
	slot2 = slot1 and 1 or 0
	slot0.normalPanel:GetComponent(&quot;CanvasGroup&quot;).alpha = slot2
	slot0._tf:Find(&quot;RightTop&quot;):GetComponent(&quot;CanvasGroup&quot;).alpha = slot2
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>