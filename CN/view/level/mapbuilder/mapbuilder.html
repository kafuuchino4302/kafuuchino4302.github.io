<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mapbuilder.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>mapbuilder.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;MapBuilder&quot;, import(&quot;view.base.BaseSubView&quot;))
slot0.TYPENORMAL = 1
slot0.TYPEESCORT = 2
slot0.TYPESHINANO = 3
slot0.TYPESKIRMISH = 4
slot0.TYPEBISMARCK = 5
slot0.TYPESSSS = 6
slot0.TYPEATELIER = 7
slot0.TYPESENRANKAGURA = 8
slot0.TYPESP = 9
slot0.TYPESPFULL = 10
slot0.TYPESPSERIES = 11
slot0.TYPESPSERIESFULL = 12
slot0.TYPEATELIERYUMIA = 13
slot0.TYPEEXSP = 14

slot0.Ctor = function(slot0, slot1, slot2)
	uv0.super.Ctor(slot0, slot1, slot2.event, slot2.contextData)

	slot0.sceneParent = slot2
	slot0.map = slot1:Find(&quot;maps&quot;)
	slot0.float = slot1:Find(&quot;float&quot;)
	slot0.tweens = {}
	slot3 = slot0.sceneParent._tf.rect.size
	slot0.mapHeight = slot3.y
	slot0.mapWidth = slot3.x
	slot0.buffer = setmetatable({}, {
		__index = function (slot0, slot1)
			return function (slot0, ...)
				if uv0 == &quot;UpdateMapItems&quot; and underscore.any(uv1._funcQueue, function (slot0)
					return slot0.funcName == uv0
				end) then
					errorMsg(&quot;Multiple Calls of function &#x27;UpdateMapItems&#x27; in Mapbuilder&quot;)

					return
				end

				uv1:ActionInvoke(uv0, ...)
			end
		end,
		__newindex = function ()
			errorMsg(&quot;Cant write Data in ActionInvoke buffer&quot;)
		end
	})
	slot0.isFrozen = nil

	slot0:bind(LevelUIConst.ON_FROZEN, function ()
		uv0.isFrozen = true
	end)
	slot0:bind(LevelUIConst.ON_UNFROZEN, function ()
		uv0.isFrozen = nil
	end)
end

slot0.Load = function(slot0)
	if slot0._state ~= uv0.STATES.NONE then
		return
	end

	slot0._state = uv0.STATES.LOADING
	slot1 = pg.UIMgr.GetInstance()

	slot1:LoadingOn()

	slot1 = PoolMgr.GetInstance()

	slot1:GetUI(slot0:getUIName(), true, function (slot0)
		uv0:Loaded(slot0)
		uv0:Init()
	end)
end

slot0.isfrozen = function(slot0)
	return slot0.isFrozen
end

slot0.GetType = function(slot0)
	return 0
end

slot0.Destroy = function(slot0)
	if slot0._state == uv0.STATES.INITED then
		slot0:Hide()
	end

	uv0.super.Destroy(slot0)
end

slot0.OnDestroy = function(slot0)
	slot0.tweens = nil
end

slot0.Show = function(slot0)
	uv0.super.Show(slot0)
	slot0:OnShow()
end

slot0.Hide = function(slot0)
	slot0:OnHide()
	uv0.super.Hide(slot0)
end

slot0.OnShow = function(slot0)
end

slot0.OnHide = function(slot0)
	for slot4, slot5 in pairs(slot0.tweens) do
		LeanTween.cancel(slot5)
	end

	slot0.tweens = {}
end

slot0.UpdateMapVO = function(slot0, slot1)
	slot0.data = slot1
end

slot0.UpdateView = function(slot0)
	slot0:UpdateButtons()
end

slot0.UpdateButtons = function(slot0)
end

slot0.UpdateMapItems = function(slot0)
end

slot0.HideFloat = function(slot0)
end

slot0.ShowFloat = function(slot0)
end

slot0.RecordTween = function(slot0, slot1, slot2)
	slot0.tweens[slot1] = slot2
end

slot0.DeleteTween = function(slot0, slot1)
	if slot0.tweens[slot1] then
		LeanTween.cancel(slot2)

		slot0.tweens[slot1] = nil
	end
end

slot0.UpdateChapterTF = function(slot0, slot1)
end

slot0.TryOpenChapter = function(slot0, slot1)
	errorMsg(&quot;Not Implent TryOpenChapter in &quot; .. slot0.__cname)
end

slot0.TryOpenChapterInfo = function(slot0, slot1, slot2, slot3)
	if slot0:isfrozen() then
		return
	end

	if getProxy(ChapterProxy):getChapterById(slot1, true).active then
		slot0.sceneParent:switchToChapter(slot4)

		return
	end

	if not slot4:isUnlock() then
		if #slot4:GetPrevChapterNames() == 1 then
			pg.TipsMgr.GetInstance():ShowTips(i18n(&quot;levelScene_tracking_error_pre&quot;, slot5[1]))
		else
			pg.TipsMgr.GetInstance():ShowTips(i18n(&quot;levelScene_tracking_error_pre_2&quot;, slot5[1], slot5[2]))
		end

		return
	end

	if not getProxy(ChapterProxy):getMapById(slot4:getConfig(&quot;map&quot;)):isRemaster() and not slot4:inActTime() then
		pg.TipsMgr.GetInstance():ShowTips(i18n(&quot;battle_levelScene_close&quot;))

		return
	end

	if getProxy(PlayerProxy):getRawData().level &lt; slot4:getConfig(&quot;unlocklevel&quot;) then
		pg.TipsMgr.GetInstance():ShowTips(i18n(&quot;levelScene_chapter_level_limit&quot;, slot6))

		return
	end

	if getProxy(ChapterProxy):getActiveChapter(true) and slot8.id ~= slot1 then
		slot0:emit(LevelMediator2.ON_STRATEGYING_CHAPTER)

		return
	end

	if slot4:IsSpChapter() then
		SettingsProxy.SetActivityMapSPTip()
		slot0:UpdateChapterTF(slot1)
	end

	if not slot3 then
		slot0.sceneParent:DisplayLevelInfoPanel(slot1, slot2)
	else
		slot0.sceneParent:DisplayLevelInfoSPPanel(slot1, slot3, slot2)
	end
end

slot0.OnSubmitTaskDone = function(slot0)
end

slot0.PlayEnterAnim = function(slot0)
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>