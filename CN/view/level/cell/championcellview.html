<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>championcellview.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>championcellview.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot2 = class(&quot;ChampionCellView&quot;, DecorateClass(import(&quot;.EnemyCellView&quot;), import(&quot;.SpineCellView&quot;)))

slot2.Ctor = function(slot0)
	uv0.Ctor(slot0)
	uv1.Ctor(slot0)

	slot0.autoLoader = AutoLoader.New()
end

slot2.InitChampionCellTransform = function(slot0)
	uv0.InitCellTransform(slot0)

	slot0.tfEffectFound = slot0.tf:Find(&quot;effect_found&quot;)
	slot0.tfFighting = slot0.tf:Find(&quot;fighting&quot;)

	setText(findTF(slot0.tfFighting, &quot;Text&quot;), i18n(&quot;ui_word_levelui2_inevent&quot;))

	slot0.tfDamageCount = slot0.tf:Find(&quot;damage_count&quot;)
	slot0.tfBufficons = slot0.tf:Find(&quot;random_buff_container&quot;)
end

slot2.UpdateChampionCell = function(slot0, slot1, slot2, slot3)
	slot4 = slot2.trait ~= ChapterConst.TraitLurk and slot2.flag == ChapterConst.CellFlagActive and not slot1:existFleet(FleetType.Transport, slot2.row, slot2.column)

	setActive(slot0.tfFighting, slot4 and slot1:existEnemy(ChapterConst.SubjectChampion, slot2.row, slot2.column))
	setActive(slot0.tfEffectFound, slot4 and slot2.trait == ChapterConst.TraitVirgin)
	setActive(slot0.tfDamageCount, slot4 and slot2.data &gt; 0)
	setActive(slot0.tf:Find(&quot;huoqiubaozha&quot;), false)

	if slot2.trait == ChapterConst.TraitVirgin then
		pg.CriMgr.GetInstance():PlaySoundEffect_V3(SFX_UI_WEIGHANCHOR_ENEMY)
	end

	slot0.tfShadow.localEulerAngles = Vector3(slot1.theme.angle, 0, 0)

	if slot4 then
		uv0.RefreshEnemyTplIcons(slot0, slot2:getConfigTable(), slot1)
	end

	slot0:SetActive(slot4)
	existCall(slot3)
end

slot2.LoadSpine = function(slot0, slot1, slot2, slot3, slot4)
	uv0.LoadSpine(slot0, slot1, slot2, nil, function ()
		existCall(uv0)
		uv1:LoadExtraEffects(uv2)
	end)
end

slot2.LoadExtraEffects = function(slot0, slot1)
	if slot1 and #slot1 &gt; 0 then
		slot3 = slot0.autoLoader

		slot3:LoadPrefab(&quot;effect/&quot; .. slot1, slot1, function (slot0)
			uv0._extraEffectList[uv1] = slot0

			setParent(slot0, uv0.tf, false)

			slot0.transform.localScale = slot0.transform.localScale

			uv0:ResetCanvasOrder()
		end)
	end
end

slot2.Clear = function(slot0)
	uv0.ClearSpine(slot0)
	uv1.Clear(slot0)

	if slot0.autoLoader then
		slot0.autoLoader:ClearRequests()
	end
end

return slot2
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>