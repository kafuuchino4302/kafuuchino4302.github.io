<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>neweducatedrophandler.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>neweducatedrophandler.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;NewEducateDropHandler&quot;)
slot1 = 1

slot0.Ctor = function(slot0, slot1)
	slot0._go = slot1
	slot0._tf = slot1.transform
	slot0.dropsTF = slot0._tf:Find(&quot;drops&quot;)
	slot0.dropUIList = UIItemList.New(slot0.dropsTF, slot0.dropsTF:Find(&quot;tpl&quot;))

	slot0.dropUIList:make(function (slot0, slot1, slot2)
		if slot0 == UIItemList.EventUpdate then
			LoadImageSpriteAsync(&quot;neweducateicon/&quot; .. (NewEducateHelper.GetDropConfig(uv0.drops[slot1 + 1]).icon or slot4.item_icon), slot2:Find(&quot;icon&quot;))
			setText(slot2:Find(&quot;name&quot;), slot4.name)

			if slot3.number &gt; 0 then
				setActive(slot2:Find(&quot;reduce&quot;), false)
				setActive(slot2:Find(&quot;increase&quot;), true)
				setText(slot2:Find(&quot;increase/value&quot;), &quot;+&quot; .. slot3.number)
			else
				setActive(slot2:Find(&quot;reduce&quot;), true)
				setActive(slot2:Find(&quot;increase&quot;), false)
				setText(slot2:Find(&quot;reduce/value&quot;), slot3.number)
			end

			setActive(slot2:Find(&quot;benefit&quot;), false)
		end
	end)

	slot0.polaroidTF = slot0._tf:Find(&quot;polaroid&quot;)
end

slot0.Play = function(slot0, slot1, slot2)
	setActive(slot0._go, true)
	setActive(slot0.dropsTF, true)
	setActive(slot0.polaroidTF, false)

	slot0.drops = slot0:FilterPersonality(slot1)

	slot0.dropUIList:align(#slot0.drops)

	slot0.timer = Timer.New(function ()
		existCall(uv0)
	end, uv0)

	slot0.timer:Start()
end

slot0.FilterPersonality = function(slot0, slot1)
	return underscore.select(slot1, function (slot0)
		return slot0.type ~= NewEducateConst.DROP_TYPE.ATTR or slot0.type == NewEducateConst.DROP_TYPE.ATTR and pg.child2_attr[slot0.id].type ~= NewEducateChar.ATTR_TYPE.PERSONALITY
	end)
end

slot0.PlayPolaroid = function(slot0, slot1, slot2)
	setActive(slot0._go, true)
	setActive(slot0.dropsTF, false)
	setActive(slot0.polaroidTF, true)
	seriesAsync({
		function (slot0)
			slot1 = pg.child2_polaroid[uv0.id]
			slot4 = uv1.polaroidTF

			LoadImageSpriteAsync(&quot;neweducateicon/&quot; .. slot1.pic, slot4:Find(&quot;content/mask/icon&quot;), true)

			slot3 = uv1.polaroidTF

			setText(slot3:Find(&quot;content/desc&quot;), slot1.title)
			onDelayTick(function ()
				uv0()
			end, uv2)
		end
	}, function ()
		existCall(uv0)
	end)
end

slot0.Reset = function(slot0)
	setActive(slot0._go, false)
	setActive(slot0.polaroidTF, false)
	setActive(slot0.dropsTF, false)

	slot0.drops = {}

	if slot0.timer ~= nil then
		slot0.timer:Stop()

		slot0.timer = nil
	end
end

slot0.Destroy = function(slot0)
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>