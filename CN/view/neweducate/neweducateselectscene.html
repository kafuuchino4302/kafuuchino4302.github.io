<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>neweducateselectscene.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>neweducateselectscene.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;NewEducateSelectScene&quot;, import(&quot;view.base.BaseUI&quot;))

slot0.getUIName = function(slot0)
	return &quot;NewEducateSelectUI&quot;
end

slot0.init = function(slot0)
	slot1 = slot0._tf
	slot0.rootTF = slot1:Find(&quot;root&quot;)
	slot1 = slot0.rootTF
	slot0.bgTF = slot1:Find(&quot;bg&quot;)
	slot1 = slot0.rootTF
	slot0.sureBtn = slot1:Find(&quot;window/sure_btn&quot;)
	slot2 = slot0.sureBtn

	setText(slot2:Find(&quot;Text&quot;), i18n(&quot;child2_enter&quot;))

	slot1 = slot0.rootTF
	slot1 = slot1:Find(&quot;window/info&quot;)
	slot0.nameTF = slot1:Find(&quot;name&quot;)
	slot0.progressTF = slot1:Find(&quot;progress&quot;)
	slot0.gameTF = slot1:Find(&quot;game&quot;)
	slot2 = slot0.rootTF
	slot0.topTF = slot2:Find(&quot;top&quot;)
	slot2 = slot0.rootTF
	slot0.contentTF = slot2:Find(&quot;window/view/content&quot;)

	eachChild(slot0.contentTF, function (slot0)
		onToggle(uv0, slot0, function (slot0)
			slot1 = tonumber(uv0.name)

			if slot0 then
				PlayerPrefs.SetInt(uv1:GetSelectedLocalKey(), slot1)

				uv1.selectedId = slot1

				uv1:UpdataInfo()
				uv0:SetAsLastSibling()
			end
		end, SFX_PANEL)
	end)
end

slot0.InitData = function(slot0)
	slot0.infos = {
		[0] = getProxy(EducateProxy):GetSelectInfo()
	}
	slot1 = getProxy(NewEducateProxy)

	for slot5, slot6 in ipairs(pg.child2_data.all) do
		slot0.infos[slot6] = slot1:GetChar(slot6):GetSelectInfo()
	end

	slot0.playerID = getProxy(PlayerProxy):getRawData().id

	if NewEducateHelper.IsShowNewChildTip() then
		slot0.newId = pg.child2_data.all[#pg.child2_data.all]

		NewEducateHelper.ClearShowNewChildTip()
	end
end

slot0.didEnter = function(slot0)
	onButton(slot0, slot0.topTF:Find(&quot;return_btn&quot;), function ()
		uv0:emit(NewEducateBaseUI.ON_HOME)
	end, SFX_PANEL)
	onButton(slot0, slot0.topTF:Find(&quot;btns/collect&quot;), function ()
		uv0:emit(NewEducateSelectMediator.GO_SUBLAYER, Context.New({
			mediator = NewEducateCollectEntranceMediator,
			viewComponent = NewEducateCollectEntranceLayer,
			data = {
				isSelect = true,
				id = uv0.selectedId
			}
		}))
	end, SFX_PANEL)
	onButton(slot0, slot0.sureBtn, function ()
		if uv0.selectedId == 0 then
			uv0:emit(NewEducateSelectMediator.GO_SCENE, SCENE.EDUCATE, {
				isMainEnter = true
			})
		else
			uv0:emit(NewEducateSelectMediator.GO_SCENE, SCENE.NEW_EDUCATE, {
				isMainEnter = true,
				id = uv0.selectedId
			})
		end
	end, SFX_PANEL)
	slot0:InitData()
	triggerToggle(slot0.contentTF:Find(tostring(slot0.newId or PlayerPrefs.GetInt(slot0:GetSelectedLocalKey()) or 0)), true)
end

slot0.GetSelectedLocalKey = function(slot0)
	return NewEducateConst.NEW_EDUCATE_SELECT_ID .. &quot;_&quot; .. slot0.playerID
end

slot0.UpdataInfo = function(slot0)
	slot1 = slot0.infos[slot0.selectedId]

	setText(slot0.nameTF, slot1.name)
	setText(slot0.progressTF, i18n(&quot;child2_game_cnt&quot;, slot1.gameCnt))
	setText(slot0.gameTF, slot1.progressStr)
	setImageSprite(slot0.bgTF, LoadSprite(&quot;bg/&quot; .. slot1.bg), false)
end

slot0.onBackPressed = function(slot0)
	slot0:emit(NewEducateBaseUI.ON_HOME)
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>