<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>minigamegoodscard.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>minigamegoodscard.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;MiniGameGoodsCard&quot;, import(&quot;.BaseGoodsCard&quot;))

slot0.Ctor = function(slot0, slot1)
	uv0.super.Ctor(slot0, slot1)
	setActive(slot0.selloutTag, true)
	onButton(slot0, slot0.mask, function ()
		pg.TipsMgr.GetInstance():ShowTips(uv0.maskTip)
	end, SFX_PANEL)
end

slot0.setGroupMask = function(slot0, slot1)
	slot3 = slot0.goodsVO:getConfig(&quot;group_limit&quot;) &gt; 0 and slot2 &lt;= slot1

	if isActive(slot0.mask) then
		return
	end

	setActive(slot0.mask, slot3)

	if slot2 &gt; 0 and slot2 &lt;= slot1 then
		setActive(slot0.selloutTag, true)
		setActive(slot0.levelTag, false)
	end
end

slot0.setLevelMask = function(slot0, slot1)
	slot2 = slot0.goodsVO:getLevelLimit(slot1)
	slot3 = slot0.goodsVO:isLevelLimit(slot1)

	if isActive(slot0.mask) then
		return
	end

	setActive(slot0.mask, slot3)

	if slot3 then
		setScrollText(slot0.levelTagText, tostring(slot2))
		setActive(slot0.levelTag, true)
		setActive(slot0.selloutTag, false)

		slot0.maskTip = i18n(&quot;charge_level_limit&quot;)
	end
end

slot0.update = function(slot0, slot1)
	slot0.goodsVO = slot1

	setActive(slot0.mask, not slot0.goodsVO:CanPurchase())
	setActive(slot0.stars, false)

	slot3 = slot1:GetDropInfo()

	updateDrop(slot0.itemTF, slot3)
	setScrollText(slot0.nameTxt, slot3:getConfig(&quot;name&quot;) or &quot;&quot;)

	slot5 = &quot;&quot;

	setText(slot0.limitCountLabelTF, i18n(&quot;activity_shop_exchange_count&quot;) .. slot1:GetMaxCnt() .. &quot;/&quot; .. slot1:getConfig(&quot;goods_purchase_limit&quot;))
	setActive(slot0.limitCountLabelTF, true)
	setActive(slot0.discountTF, false)
	setText(slot0.countTF, math.ceil(slot1:getConfig(&quot;price&quot;)))
	GetSpriteFromAtlasAsync(&quot;ui/ShopsUI_atlas&quot;, &quot;minigameRes&quot;, function (slot0)
		uv0.resIconTF:GetComponent(typeof(Image)).sprite = slot0
	end)
end

slot0.OnDispose = function(slot0)
	slot0.goodsVO = nil
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>