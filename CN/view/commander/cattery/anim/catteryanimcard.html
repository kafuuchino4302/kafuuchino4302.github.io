<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>catteryanimcard.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>catteryanimcard.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;CatteryAnimCard&quot;, import(&quot;..CatterySettlementCard&quot;))
slot1 = 1

slot0.Ctor = function(slot0, slot1)
	slot0._tf = slot1
	slot0.emptyTF = findTF(slot0._tf, &quot;empty&quot;)
	slot0.commanderTF = findTF(slot0._tf, &quot;commander&quot;)
	slot0.char = slot0.commanderTF:Find(&quot;mask/char&quot;)
	slot0.slider = slot0.commanderTF:Find(&quot;slider&quot;):GetComponent(typeof(Slider))
	slot0.nameTxt = slot0.commanderTF:Find(&quot;name/Text&quot;):GetComponent(typeof(Text))
	slot0.levelTxt = slot0.commanderTF:Find(&quot;name/level&quot;):GetComponent(typeof(Text))
	slot0.expTxt = slot0.commanderTF:Find(&quot;exp&quot;):GetComponent(typeof(Text))
	slot0.addition = slot0.commanderTF:Find(&quot;addition&quot;)
	slot0.additionTxt = slot0.addition:Find(&quot;Text&quot;):GetComponent(typeof(Text))
	slot0.additionY = slot0.addition.localPosition.y
end

slot0.UpdateCommander = function(slot0)
	uv0.super.UpdateCommander(slot0)

	slot0.additionTxt.text = slot0.exp .. &quot;&lt;size=40&gt;EXP&lt;/size&gt;&quot;
end

slot0.Action = function(slot0, slot1)
	setActive(slot0.addition, false)

	if not slot0.commander or slot0.exp &lt;= 0 then
		slot1()

		return
	end

	slot2 = {}

	slot0:InitAnim(slot2)
	table.insert(slot2, function (slot0)
		uv0:AdditionAnim(uv1, slot0)
	end)
	parallelAsync(slot2, slot1)
end

slot0.Clear = function(slot0)
	uv0.super.Clear(slot0)

	if LeanTween.isTweening(go(slot0.addition)) then
		LeanTween.cancel(go(slot0.addition))
	end
end

slot0.LoadCommander = function(slot0, slot1)
	slot0:ReturnCommander()

	slot0.painting = slot1:getPainting()

	setCommanderPaintingPrefab(slot0.char, slot0.painting, &quot;result1&quot;)
end

slot0.AdditionAnim = function(slot0, slot1, slot2)
	setActive(slot0.addition, true)

	slot3 = slot0.additionY
	slot4 = LeanTween.value(go(slot0.addition), slot3, slot3 + 25, slot1)
	slot4 = slot4:setOnUpdate(System.Action_float(function (slot0)
		uv0.addition.localPosition = Vector3(uv0.addition.localPosition.x, slot0, 0)
	end))

	slot4:setOnComplete(System.Action(function ()
		setActive(uv0.addition, false)
		uv1()

		uv0.addition.localPosition = Vector3(uv0.addition.localPosition.x, uv2, 0)
	end))
end

slot0.GetColor = function(slot0)
	return &quot;#ffffff&quot;
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>