<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>commanderhomelevelcard.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>commanderhomelevelcard.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;CommanderHomeLevelCard&quot;)
slot1 = &quot;#9A9898&quot;
slot2 = &quot;#a59897&quot;
slot3 = &quot;#6a5a5a&quot;

slot0.Ctor = function(slot0, slot1, slot2)
	slot0._go = slot1
	slot0._tf = slot1.transform
	slot0.view = slot2
	slot0.mask = findTF(slot0._tf, &quot;mask&quot;):GetComponent(typeof(RectMask2D))
	slot0.progress = findTF(slot0._tf, &quot;mask/progress/bar&quot;)
	slot0.unlockTF = findTF(slot0._tf, &quot;unlock&quot;)
	slot0.doingTF = findTF(slot0._tf, &quot;doing&quot;)
	slot0.lockTF = findTF(slot0._tf, &quot;lock&quot;)
	slot0.levelTxt = findTF(slot0._tf, &quot;level&quot;):GetComponent(typeof(Text))
	slot0.descUnLockIcon = findTF(slot0._tf, &quot;desc/icon_pass&quot;)
	slot0.descDoingIcon = findTF(slot0._tf, &quot;desc/icon_doing&quot;)
	slot0.descTxt = findTF(slot0._tf, &quot;desc/Text&quot;):GetComponent(typeof(Text))
	slot0.expTxt = findTF(slot0._tf, &quot;exp&quot;):GetComponent(typeof(Text))
end

slot0.Update = function(slot0, slot1, slot2)
	slot0:Clear()

	slot0.home = slot1
	slot0.config = slot2
	slot3 = slot2.level
	slot0.mask.enabled = slot2.tail == true

	setActive(slot0.unlockTF, false)
	setActive(slot0.doingTF, false)
	setActive(slot0.lockTF, false)
	setActive(slot0.descUnLockIcon, false)
	setActive(slot0.descDoingIcon, false)

	slot4 = nil

	if slot1.level + 1 == slot2.level then
		slot0:UpdateDoingState()

		slot4 = uv0
	elseif slot1.level &lt; slot2.level then
		slot0:UpdateLockState()

		slot4 = uv1
	elseif slot2.level &lt;= slot1.level then
		slot0:UpdateUnlockState()

		slot4 = uv2
	end

	slot0.levelTxt.text = setColorStr(&quot;LV.&quot; .. slot2.level, slot4)
	slot0.descTxt.text = setColorStr(shortenString(slot2.desc, 12), slot4)
	slot0.expTxt.text = setColorStr(slot2.totalExp, slot4)
end

slot0.UpdateLockState = function(slot0)
	setFillAmount(slot0.progress, 0)
	setActive(slot0.lockTF, true)
	onButton(nil, slot0.lockTF, function ()
		uv0:ShowDesc()
	end, SFX_PANEL)
end

slot0.UpdateDoingState = function(slot0)
	slot2 = 0

	if pg.commander_home[slot0.config.level - 1] then
		slot2 = slot1.home_exp
	end

	setFillAmount(slot0.progress, slot0.home.exp / slot2)
	setActive(slot0.doingTF, true)
	setActive(slot0.descDoingIcon, true)
	onButton(nil, slot0.doingTF, function ()
		uv0:ShowDesc()
	end, SFX_PANEL)
end

slot0.UpdateUnlockState = function(slot0)
	setFillAmount(slot0.progress, 1)
	setActive(slot0.unlockTF, true)
	setActive(slot0.descUnLockIcon, true)
	onButton(nil, slot0.unlockTF, function ()
		uv0:ShowDesc()
	end, SFX_PANEL)
end

slot0.ShowDesc = function(slot0)
	slot0.view:ShowDescWindow(slot0.config.desc, slot0.config.level)
end

slot0.Clear = function(slot0)
	removeOnButton(slot0.lockTF)
	removeOnButton(slot0.doingTF)
	removeOnButton(slot0.unlockTF)
end

slot0.Dispose = function(slot0)
	slot0:Clear()
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>