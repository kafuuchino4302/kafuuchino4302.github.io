<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ltn12.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>ltn12.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = require(&quot;string&quot;)
slot2 = unpack or require(&quot;table&quot;).unpack
slot3 = _G
slot4 = {}

if module then
	ltn12 = slot4
end

slot4.filter = {}
slot4.source = {}
slot4.sink = {}
slot4.pump = {}
slot9 = slot2 or slot1.unpack
slot10 = slot3.select
slot4.BLOCKSIZE = 2048
slot4._VERSION = &quot;LTN12 1.0.3&quot;

slot5.cycle = function(slot0, slot1, slot2)
	uv0.assert(slot0)

	return function (slot0)
		slot1 = nil
		slot2, uv0 = uv1(uv0, slot0, uv2)

		return slot2
	end
end

slot5.chain = function(...)
	slot0 = {
		...
	}
	slot1 = uv0.select(&quot;#&quot;, ...)
	slot2 = 1
	slot3 = 1
	slot4 = &quot;&quot;

	return function (slot0)
		uv0 = slot0 and uv0

		while true do
			if uv1 == uv2 then
				if uv3[uv1](slot0) == &quot;&quot; or uv2 == uv4 then
					return slot0
				elseif slot0 then
					uv1 = uv1 + 1
				else
					uv2 = uv2 + 1
					uv1 = uv2
				end
			elseif uv3[uv1](slot0 or &quot;&quot;) == &quot;&quot; then
				uv1 = uv1 - 1
				slot0 = uv0
			elseif slot0 then
				if uv1 == uv4 then
					return slot0
				else
					uv1 = uv1 + 1
				end
			else
				uv5.error(&quot;filter returned inappropriate nil&quot;)
			end
		end
	end
end

slot11 = function()
	return nil
end

slot6.empty = function()
	return uv0
end

slot6.error = function(slot0)
	return function ()
		return nil, uv0
	end
end

slot6.file = function(slot0, slot1)
	if slot0 then
		return function ()
			if not uv0:read(uv1.BLOCKSIZE) then
				uv0:close()
			end

			return slot0
		end
	else
		return uv1.error(slot1 or &quot;unable to open file&quot;)
	end
end

slot6.simplify = function(slot0)
	uv0.assert(slot0)

	return function ()
		slot0, slot1 = uv0()
		uv0 = slot1 or uv0

		if not slot0 then
			return nil, slot1
		else
			return slot0
		end
	end
end

slot6.string = function(slot0)
	if slot0 then
		slot1 = 1

		return function ()
			uv2 = uv2 + uv3.BLOCKSIZE

			if uv0.sub(uv1, uv2, uv2 + uv3.BLOCKSIZE - 1) ~= &quot;&quot; then
				return slot0
			else
				return nil
			end
		end
	else
		return uv2.empty()
	end
end

slot6.rewind = function(slot0)
	uv0.assert(slot0)

	slot1 = {}

	return function (slot0)
		if not slot0 then
			if not uv0.remove(uv1) then
				return uv2()
			else
				return slot0
			end
		else
			uv0.insert(uv1, slot0)
		end
	end
end

slot6.chain = function(slot0, slot1, ...)
	if ... then
		slot1 = uv0.chain(slot1, ...)
	end

	uv1.assert(slot0 and slot1)

	slot2 = &quot;&quot;
	slot3 = &quot;&quot;
	slot4 = &quot;feeding&quot;
	slot5 = nil

	return function ()
		if not uv0 then
			uv1.error(&quot;source is empty!&quot;, 2)
		end

		while true do
			if uv2 == &quot;feeding&quot; then
				uv3, uv4 = uv5()

				if uv4 then
					return nil, uv4
				end

				uv0 = uv6(uv3)

				if not uv0 then
					if uv3 then
						uv1.error(&quot;filter returned inappropriate nil&quot;)
					else
						return nil
					end
				elseif uv0 ~= &quot;&quot; then
					uv2 = &quot;eating&quot;

					if uv3 then
						uv3 = &quot;&quot;
					end

					return uv0
				end
			else
				uv0 = uv6(uv3)

				if uv0 == &quot;&quot; then
					if uv3 == &quot;&quot; then
						uv2 = &quot;feeding&quot;
					else
						uv1.error(&quot;filter returned \&quot;\&quot;&quot;)
					end
				elseif not uv0 then
					if uv3 then
						uv1.error(&quot;filter returned inappropriate nil&quot;)
					else
						return nil
					end
				else
					return uv0
				end
			end
		end
	end
end

slot6.cat = function(...)
	slot1 = uv0.remove({
		...
	}, 1)

	return function ()
		while uv0 do
			slot0, slot1 = uv0()

			if slot0 then
				return slot0
			end

			if slot1 then
				return nil, slot1
			end

			uv0 = uv1.remove(uv2, 1)
		end
	end
end

slot7.table = function(slot0)
	return function (slot0, slot1)
		if slot0 then
			uv0.insert(uv1, slot0)
		end

		return 1
	end, slot0 or {}
end

slot7.simplify = function(slot0)
	uv0.assert(slot0)

	return function (slot0, slot1)
		slot2, slot3 = uv0(slot0, slot1)

		if not slot2 then
			return nil, slot3
		end

		uv0 = slot3 or uv0

		return 1
	end
end

slot7.file = function(slot0, slot1)
	if slot0 then
		return function (slot0, slot1)
			if not slot0 then
				uv0:close()

				return 1
			else
				return uv0:write(slot0)
			end
		end
	else
		return uv0.error(slot1 or &quot;unable to open file&quot;)
	end
end

slot12 = function()
	return 1
end

slot7.null = function()
	return uv0
end

slot7.error = function(slot0)
	return function ()
		return nil, uv0
	end
end

slot7.chain = function(slot0, slot1, ...)
	if ... then
		slot2 = {
			slot0,
			slot1,
			...
		}
		slot1 = uv0.remove(slot2, #slot2)
		slot0 = uv1.chain(uv2(slot2))
	end

	uv3.assert(slot0 and slot1)

	return function (slot0, slot1)
		if slot0 ~= &quot;&quot; then
			slot2 = uv0(slot0)
			slot3 = slot0 and &quot;&quot;

			while true do
				slot4, slot5 = uv1(slot2, slot1)

				if not slot4 then
					return nil, slot5
				end

				if slot2 == slot3 then
					return 1
				end

				slot2 = uv0(slot3)
			end
		else
			return 1
		end
	end
end

slot8.step = function(slot0, slot1)
	slot2, slot3 = slot0()
	slot4, slot5 = slot1(slot2, slot3)

	if slot2 and slot4 then
		return 1
	else
		return nil, slot3 or slot5
	end
end

slot8.all = function(slot0, slot1, slot2)
	uv0.assert(slot0 and slot1)

	slot2 = slot2 or uv1.step

	while true do
		slot3, slot4 = slot2(slot0, slot1)

		if not slot3 then
			if slot4 then
				return nil, slot4
			else
				return 1
			end
		end
	end
end

return slot4
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>