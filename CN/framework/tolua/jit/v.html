<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>v.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>v.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">assert(require(&quot;jit&quot;).version_num == 20100, &quot;LuaJIT core/library version mismatch&quot;)

slot1 = require(&quot;jit.util&quot;)
slot2 = require(&quot;jit.vmdef&quot;)
slot3 = slot1.funcinfo
slot4 = slot1.traceinfo
slot5 = type
slot6 = string.format
slot7 = io.stdout
slot8 = io.stderr
slot9, slot10, slot11, slot12 = nil

slot13 = function(slot0, slot1)
	if uv0(slot0, slot1).loc then
		return slot2.loc
	elseif slot2.ffid then
		return uv1.ffnames[slot2.ffid]
	elseif slot2.addr then
		return uv2(&quot;C:%x&quot;, slot2.addr)
	else
		return &quot;(?)&quot;
	end
end

slot14 = function(slot0, slot1)
	if uv0(slot0) == &quot;number&quot; then
		if uv0(slot1) == &quot;function&quot; then
			slot1 = uv1(slot1)
		end

		slot0 = uv2(uv3.traceerr[slot0], slot1)
	end

	return slot0
end

slot15 = function(slot0, slot1, slot2, slot3, slot4, slot5)
	if slot0 == &quot;start&quot; then
		uv0 = uv1(slot2, slot3)
		uv2 = slot4 and &quot;(&quot; .. slot4 .. &quot;/&quot; .. (slot5 == -1 and &quot;stitch&quot; or slot5) .. &quot;) &quot; or &quot;&quot;
	else
		if slot0 == &quot;abort&quot; then
			if uv1(slot2, slot3) ~= uv0 then
				print(uv3(&quot;[TRACE --- %s%s -- %s at %s]\n&quot;, uv2, uv0, uv4(slot4, slot5), slot6))
			else
				print(uv3(&quot;[TRACE --- %s%s -- %s]\n&quot;, uv2, uv0, uv4(slot4, slot5)))
			end
		elseif slot0 == &quot;stop&quot; then
			slot6 = uv5(slot1)
			slot7 = slot6.link

			if slot6.linktype == &quot;interpreter&quot; then
				print(uv3(&quot;[TRACE %3s %s%s -- fallback to interpreter]\n&quot;, slot1, uv2, uv0))
			elseif slot8 == &quot;stitch&quot; then
				print(uv3(&quot;[TRACE %3s %s%s %s %s]\n&quot;, slot1, uv2, uv0, slot8, uv1(slot2, slot3)))
			elseif slot7 == slot1 or slot7 == 0 then
				print(uv3(&quot;[TRACE %3s %s%s %s]\n&quot;, slot1, uv2, uv0, slot8))
			elseif slot8 == &quot;root&quot; then
				print(uv3(&quot;[TRACE %3s %s%s -&gt; %d]\n&quot;, slot1, uv2, uv0, slot7))
			else
				print(uv3(&quot;[TRACE %3s %s%s -&gt; %d %s]\n&quot;, slot1, uv2, uv0, slot7, slot8))
			end
		else
			print(uv3(&quot;[TRACE %s]\n&quot;, slot0))
		end

		uv6:flush()
	end
end

slot17 = function(slot0)
	if uv0 then
		uv1()
	end

	if slot0 or os.getenv(&quot;LUAJIT_VERBOSEFILE&quot;) then
		uv2 = slot0 == &quot;-&quot; and uv3 or assert(io.open(slot0, &quot;w&quot;))
	else
		uv2 = uv4
	end

	uv5.attach(uv6, &quot;trace&quot;)

	uv0 = true
end

return {
	on = slot17,
	off = function ()
		if uv0 then
			uv0 = false

			uv1.attach(uv2)

			if uv3 and uv3 ~= uv4 and uv3 ~= uv5 then
				uv3:close()
			end

			uv3 = nil
		end
	end,
	start = slot17
}
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>