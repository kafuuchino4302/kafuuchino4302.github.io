<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sixthanniversaryislandproxy.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>sixthanniversaryislandproxy.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;SixthAnniversaryIslandProxy&quot;, import(&quot;.NetProxy&quot;))

slot0.register = function(slot0)
	slot0.nodeDic = nil
	slot0.timeStamp = 0
end

slot0.CheckValid = function(slot0)
	slot1 = pg.TimeMgr.GetInstance()

	return slot0.nodeDic and slot1:IsSameDay(slot0.timeStamp, slot1:GetServerTime())
end

slot0.GetNodeDic = function(slot0)
	if slot0:CheckValid() then
		return slot0.nodeDic
	else
		return {}
	end
end

slot0.CheckAndRequest = function(slot0, slot1)
	slot2 = {}

	if getProxy(ActivityProxy):getActivityByType(ActivityConst.ACTIVITY_TYPE_ISLAND) and not slot3:isEnd() and not slot0:CheckValid() then
		table.insert(slot2, function (slot0)
			uv0:sendNotification(GAME.REQUEST_NODE_LIST, {
				act_id = uv1.id,
				callback = slot0
			})
		end)
	end

	seriesAsync(slot2, slot1)
end

slot0.GetNode = function(slot0, slot1)
	return slot0.nodeDic[slot1]
end

slot0.GetNodeIds = function(slot0)
	slot1 = underscore.keys(slot0.nodeDic)

	table.sort(slot1)

	return slot1
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>