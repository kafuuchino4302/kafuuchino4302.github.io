<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>settingsproxy.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>settingsproxy.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;SettingsProxy&quot;, pm.Proxy)

slot0.onRegister = function(slot0)
	slot0._isBgmEnble = PlayerPrefs.GetInt(&quot;ShipSkinBGM&quot;, 1) &gt; 0
	slot0._ShowBg = PlayerPrefs.GetInt(&quot;disableBG&quot;, 1) &gt; 0
	slot0._ShowLive2d = PlayerPrefs.GetInt(&quot;disableLive2d&quot;, 1) &gt; 0
	slot0._selectedShipId = PlayerPrefs.GetInt(&quot;playerShipId&quot;)
	slot0._backyardFoodRemind = PlayerPrefs.GetString(&quot;backyardRemind&quot;)
	slot0._userAgreement = PlayerPrefs.GetInt(&quot;userAgreement&quot;, 0)
	slot0._showMaxLevelHelp = PlayerPrefs.GetInt(&quot;maxLevelHelp&quot;, 0) &gt; 0
	slot0._nextTipAutoBattleTime = PlayerPrefs.GetInt(&quot;AutoBattleTip&quot;, 0)
	slot0._setFlagShip = PlayerPrefs.GetInt(&quot;setFlagShip&quot;, 0) &gt; 0
	slot0._setFlagShipForSkinAtlas = PlayerPrefs.GetInt(&quot;setFlagShipforskinatlas&quot;, 0) &gt; 0
	slot0._setFlagRandom = PlayerPrefs.GetInt(&quot;setFlagRandom&quot;, 0) &gt; 0
	slot0._screenRatio = PlayerPrefs.GetFloat(&quot;SetScreenRatio&quot;, ADAPT_TARGET)
	slot0.storyAutoPlayCode = PlayerPrefs.GetInt(&quot;story_autoplay_flag&quot;, 0)
	NotchAdapt.CheckNotchRatio = slot0._screenRatio
	slot0._nextTipActBossTime = PlayerPrefs.GetInt(&quot;ActBossTipLastTime&quot;, 0)

	if GetZeroTime() &lt;= slot0._nextTipActBossTime then
		slot0.nextTipActBossExchangeTicket = PlayerPrefs.GetInt(&quot;ActBossTip&quot;, 0)
	end

	slot0:resetEquipSceneIndex()

	slot0._isShowCollectionHelp = PlayerPrefs.GetInt(&quot;collection_Help&quot;, 0) &gt; 0
	slot0.showMainSceneWordTip = PlayerPrefs.GetInt(&quot;main_scene_word_toggle&quot;, 1) &gt; 0
	slot0.lastRequestVersionTime = nil
	slot0.worldBossFlag = {}
	slot0.worldFlag = {}
end

slot0.SetWorldBossFlag = function(slot0, slot1, slot2)
	if slot0.worldBossFlag[slot1] ~= slot2 then
		slot0.worldBossFlag[slot1] = slot2

		PlayerPrefs.SetInt(&quot;worldBossFlag&quot; .. slot1, slot2 and 1 or 0)
		PlayerPrefs.Save()
	end
end

slot0.GetWorldBossFlag = function(slot0, slot1)
	if not slot0.worldBossFlag[slot1] then
		slot0.worldBossFlag[slot1] = PlayerPrefs.GetInt(&quot;worldBossFlag&quot; .. slot1, 1) &gt; 0
	end

	return slot0.worldBossFlag[slot1]
end

slot0.SetWorldFlag = function(slot0, slot1, slot2)
	if slot0.worldFlag[slot1] ~= slot2 then
		slot0.worldFlag[slot1] = slot2

		PlayerPrefs.SetInt(&quot;world_flag_&quot; .. slot1, slot2 and 1 or 0)
		PlayerPrefs.Save()
	end
end

slot0.GetWorldFlag = function(slot0, slot1)
	if not slot0.worldFlag[slot1] then
		slot0.worldFlag[slot1] = PlayerPrefs.GetInt(&quot;world_flag_&quot; .. slot1, 0) &gt; 0
	end

	return slot0.worldFlag[slot1]
end

slot0.GetDockYardLockBtnFlag = function(slot0)
	if not slot0.dockYardLockFlag then
		slot0.dockYardLockFlag = PlayerPrefs.GetInt(&quot;DockYardLockFlag&quot; .. getProxy(PlayerProxy):getRawData().id, 0) &gt; 0
	end

	return slot0.dockYardLockFlag
end

slot0.SetDockYardLockBtnFlag = function(slot0, slot1)
	if slot0.dockYardLockFlag ~= slot1 then
		PlayerPrefs.SetInt(&quot;DockYardLockFlag&quot; .. getProxy(PlayerProxy):getRawData().id, slot1 and 1 or 0)
		PlayerPrefs.Save()

		slot0.dockYardLockFlag = slot1
	end
end

slot0.GetDockYardLevelBtnFlag = function(slot0)
	if not slot0.dockYardLevelFlag then
		slot0.dockYardLevelFlag = PlayerPrefs.GetInt(&quot;DockYardLevelFlag&quot; .. getProxy(PlayerProxy):getRawData().id, 0) &gt; 0
	end

	return slot0.dockYardLevelFlag
end

slot0.SetDockYardLevelBtnFlag = function(slot0, slot1)
	if slot0.dockYardLevelFlag ~= slot1 then
		PlayerPrefs.SetInt(&quot;DockYardLevelFlag&quot; .. getProxy(PlayerProxy):getRawData().id, slot1 and 1 or 0)
		PlayerPrefs.Save()

		slot0.dockYardLevelFlag = slot1
	end
end

slot0.IsShowCollectionHelp = function(slot0)
	return slot0._isShowCollectionHelp
end

slot0.SetCollectionHelpFlag = function(slot0, slot1)
	if slot0._isShowCollectionHelp ~= slot1 then
		slot0._isShowCollectionHelp = slot1

		PlayerPrefs.SetInt(&quot;collection_Help&quot;, slot1 and 1 or 0)
		PlayerPrefs.Save()
	end
end

slot0.IsBGMEnable = function(slot0)
	return slot0._isBgmEnble
end

slot0.SetBgmFlag = function(slot0, slot1)
	if slot0._isBgmEnble ~= slot1 then
		slot0._isBgmEnble = slot1

		PlayerPrefs.SetInt(&quot;ShipSkinBGM&quot;, slot1 and 1 or 0)
		PlayerPrefs.Save()
	end
end

slot0.IsEnableMainMusicPlayer = function(slot0)
	return true
end

slot0.getSkinPosSetting = function(slot0, slot1)
	if PlayerPrefs.HasKey(slot0:GetCurrMainUIStyleKeyForSkinShop() .. tostring(slot1:GetRecordPosKey()) .. &quot;_scale&quot;) then
		return PlayerPrefs.GetFloat(slot3 .. tostring(slot2) .. &quot;_x&quot;, 0), PlayerPrefs.GetFloat(slot3 .. tostring(slot2) .. &quot;_y&quot;, 0), PlayerPrefs.GetFloat(slot3 .. tostring(slot2) .. &quot;_scale&quot;, 1)
	else
		return nil
	end
end

slot0.setSkinPosSetting = function(slot0, slot1, slot2, slot3, slot4)
	slot5 = slot1:GetRecordPosKey()
	slot6 = slot0:GetCurrMainUIStyleKeyForSkinShop()

	PlayerPrefs.SetFloat(slot6 .. tostring(slot5) .. &quot;_x&quot;, slot2)
	PlayerPrefs.SetFloat(slot6 .. tostring(slot5) .. &quot;_y&quot;, slot3)
	PlayerPrefs.SetFloat(slot6 .. tostring(slot5) .. &quot;_scale&quot;, slot4)
	PlayerPrefs.Save()
end

slot0.setSkinScaleSetting = function(slot0, slot1, slot2, slot3, slot4)
	slot5 = slot1:GetRecordPosKey()
	slot6 = tostring(slot5) .. slot2 .. &quot;_&quot; .. slot3 .. &quot;_part_scale&quot;

	PlayerPrefs.SetFloat(tostring(slot5) .. slot2 .. &quot;_&quot; .. slot3 .. &quot;_part_scale&quot;, slot4)
end

slot0.getSkinScaleSetting = function(slot0, slot1, slot2, slot3)
	slot4 = nil

	if PlayerPrefs.HasKey(tostring(slot1:GetRecordPosKey()) .. slot2 .. &quot;_&quot; .. slot3 .. &quot;_part_scale&quot;) then
		slot4 = PlayerPrefs.GetFloat(slot6, 1)
	else
		return 1
	end

	return slot4
end

slot0.GetCurrMainUIStyleKeyForSkinShop = function(slot0)
	if slot0:GetMainSceneThemeStyle() == NewMainScene.THEME_CLASSIC then
		return &quot;&quot;
	else
		return slot1
	end
end

slot0.resetSkinPosSetting = function(slot0, slot1)
	slot2 = slot1:GetRecordPosKey()

	PlayerPrefs.DeleteKey(tostring(slot2) .. &quot;_x&quot;)
	PlayerPrefs.DeleteKey(tostring(slot2) .. &quot;_y&quot;)
	PlayerPrefs.DeleteKey(tostring(slot2) .. &quot;_scale&quot;)
	PlayerPrefs.Save()
end

slot0.getCharacterSetting = function(slot0, slot1, slot2)
	return PlayerPrefs.GetInt(tostring(slot1) .. &quot;_&quot; .. slot2, 1) &gt; 0
end

slot0.setCharacterSetting = function(slot0, slot1, slot2, slot3)
	PlayerPrefs.SetInt(tostring(slot1) .. &quot;_&quot; .. slot2, slot3 and 1 or 0)
	PlayerPrefs.Save()
end

slot0.getCurrentSecretaryIndex = function(slot0)
	if PlayerVitaeShipsPage.GetAllUnlockSlotCnt() &lt; PlayerPrefs.GetInt(&quot;currentSecretaryIndex&quot;, 1) then
		slot0:setCurrentSecretaryIndex(1)

		return 1
	else
		return PlayerVitaeShipsPage.GetSlotIndexList()[slot1]
	end
end

slot0.rotateCurrentSecretaryIndex = function(slot0)
	slot1 = function()
		return getProxy(PlayerProxy):getRawData():ExistEducateChar() and getProxy(SettingsProxy):GetFlagShipDisplayMode() ~= FlAG_SHIP_DISPLAY_ONLY_SHIP
	end

	if PlayerVitaeShipsPage.GetAllUnlockSlotCnt() &lt; PlayerPrefs.GetInt(&quot;currentSecretaryIndex&quot;, 1) + 1 or slot2 == PlayerVitaeShipsPage.EDUCATE_CHAR_SLOT_ID and not slot1() then
		slot2 = 1
	end

	slot0:setCurrentSecretaryIndex(slot2)
	pg.m02:sendNotification(GAME.ROTATE_PAINTING_INDEX)
end

slot0.setCurrentSecretaryIndex = function(slot0, slot1)
	PlayerPrefs.SetInt(&quot;currentSecretaryIndex&quot;, slot1)
	PlayerPrefs.Save()
end

slot0.SetFlagShip = function(slot0, slot1)
	if slot0._setFlagShip ~= slot1 then
		slot0._setFlagShip = slot1

		PlayerPrefs.SetInt(&quot;setFlagShip&quot;, slot1 and 1 or 0)
		PlayerPrefs.Save()
	end
end

slot0.GetSetFlagShip = function(slot0)
	return slot0._setFlagShip
end

slot0.SetFlagShipForSkinAtlas = function(slot0, slot1)
	if slot0._setFlagShipForSkinAtlas ~= slot1 then
		slot0._setFlagShipForSkinAtlas = slot1

		PlayerPrefs.SetInt(&quot;setFlagShipforskinatlas&quot;, slot1 and 1 or 0)
		PlayerPrefs.Save()
	end
end

slot0.GetSetFlagShipForSkinAtlas = function(slot0)
	return slot0._setFlagShipForSkinAtlas
end

slot0.SetFlagRandom = function(slot0, slot1)
	if slot0._setFlagRandom ~= slot1 then
		slot0._setFlagRandom = slot1

		PlayerPrefs.SetInt(&quot;setFlagRandom&quot;, slot1 and 1 or 0)
		PlayerPrefs.Save()
	end
end

slot0.GetFlagRandom = function(slot0)
	return slot0._setFlagRandom
end

slot0.CheckNeedUserAgreement = function(slot0)
	if PLATFORM_CODE == PLATFORM_KR then
		return false
	elseif PLATFORM_CODE == PLATFORM_CH then
		return false
	elseif PLATFORM_CODE == PLATFORM_JP then
		return false
	else
		return slot0._userAgreement &lt; slot0:GetUserAgreementFlag()
	end
end

slot0.GetUserAgreementFlag = function(slot0)
	slot1 = USER_AGREEMENT_FLAG_DEFAULT

	if PLATFORM_CODE == PLATFORM_CHT then
		slot1 = USER_AGREEMENT_FLAG_TW
	end

	return slot1
end

slot0.SetUserAgreement = function(slot0)
	if slot0:CheckNeedUserAgreement() then
		slot1 = slot0:GetUserAgreementFlag()

		PlayerPrefs.SetInt(&quot;userAgreement&quot;, slot1)
		PlayerPrefs.Save()

		slot0._userAgreement = slot1
	end
end

slot0.IsLive2dEnable = function(slot0)
	return slot0._ShowLive2d
end

slot0.IsBGEnable = function(slot0)
	return slot0._ShowBg
end

slot0.SetSelectedShipId = function(slot0, slot1)
	if slot0._selectedShipId ~= slot1 then
		slot0._selectedShipId = slot1

		PlayerPrefs.SetInt(&quot;playerShipId&quot;, slot1)
		PlayerPrefs.Save()
	end
end

slot0.GetSelectedShipId = function(slot0)
	return slot0._selectedShipId
end

slot0.setEquipSceneIndex = function(slot0, slot1)
	slot0._equipSceneIndex = slot1
end

slot0.getEquipSceneIndex = function(slot0)
	return slot0._equipSceneIndex
end

slot0.resetEquipSceneIndex = function(slot0)
	slot0._equipSceneIndex = StoreHouseConst.WARP_TO_MATERIAL
end

slot0.setActivityLayerIndex = function(slot0, slot1)
	slot0._activityLayerIndex = slot1
end

slot0.getActivityLayerIndex = function(slot0)
	return slot0._activityLayerIndex
end

slot0.resetActivityLayerIndex = function(slot0)
	slot0._activityLayerIndex = 1
end

slot0.setBackyardRemind = function(slot0)
	if slot0._backyardFoodRemind ~= tostring(GetZeroTime()) then
		PlayerPrefs.SetString(&quot;backyardRemind&quot;, slot1)
		PlayerPrefs.Save()

		slot0._backyardFoodRemind = slot1
	end
end

slot0.getBackyardRemind = function(slot0)
	if not slot0._backyardFoodRemind or slot0._backyardFoodRemind == &quot;&quot; then
		return 0
	else
		return tonumber(slot0._backyardFoodRemind)
	end
end

slot0.getMaxLevelHelp = function(slot0)
	return slot0._showMaxLevelHelp
end

slot0.setMaxLevelHelp = function(slot0, slot1)
	if slot0._showMaxLevelHelp ~= slot1 then
		slot0._showMaxLevelHelp = slot1

		PlayerPrefs.SetInt(&quot;maxLevelHelp&quot;, slot1 and 1 or 0)
		PlayerPrefs.Save()
	end
end

slot0.setStopBuildSpeedupRemind = function(slot0)
	slot0.isStopBuildSpeedupReamind = true
end

slot0.getStopBuildSpeedupRemind = function(slot0)
	return slot0.isStopBuildSpeedupReamind
end

slot0.checkReadHelp = function(slot0, slot1)
	if not getProxy(PlayerProxy):getData() then
		return true
	end

	if slot1 == &quot;help_backyard&quot; then
		return true
	elseif pg.SeriesGuideMgr.GetInstance():isEnd() then
		slot4 = PlayerPrefs.GetInt(slot1, 0)

		return PlayerPrefs.GetInt(slot1, 0) &gt; 0
	end

	return true
end

slot0.recordReadHelp = function(slot0, slot1)
	PlayerPrefs.SetInt(slot1, 1)
	PlayerPrefs.Save()
end

slot0.clearAllReadHelp = function(slot0)
	PlayerPrefs.DeleteKey(&quot;tactics_lesson_system_introduce&quot;)
	PlayerPrefs.DeleteKey(&quot;help_shipinfo_equip&quot;)
	PlayerPrefs.DeleteKey(&quot;help_shipinfo_detail&quot;)
	PlayerPrefs.DeleteKey(&quot;help_shipinfo_intensify&quot;)
	PlayerPrefs.DeleteKey(&quot;help_shipinfo_upgrate&quot;)
	PlayerPrefs.DeleteKey(&quot;help_backyard&quot;)
	PlayerPrefs.DeleteKey(&quot;has_entered_class&quot;)
	PlayerPrefs.DeleteKey(&quot;help_commander_info&quot;)
	PlayerPrefs.DeleteKey(&quot;help_commander_play&quot;)
	PlayerPrefs.DeleteKey(&quot;help_commander_ability&quot;)
end

slot0.setAutoBattleTip = function(slot0)
	slot1 = GetZeroTime()
	slot0._nextTipAutoBattleTime = slot1

	PlayerPrefs.SetInt(&quot;AutoBattleTip&quot;, slot1)
	PlayerPrefs.Save()
end

slot0.isTipAutoBattle = function(slot0)
	return slot0._nextTipAutoBattleTime &lt; pg.TimeMgr.GetInstance():GetServerTime()
end

slot0.setActBossExchangeTicketTip = function(slot0, slot1)
	if slot0.nextTipActBossExchangeTicket == slot1 then
		return
	end

	slot0.nextTipActBossExchangeTicket = slot1

	if slot0._nextTipActBossTime &lt; GetZeroTime() then
		slot0._nextTipActBossTime = slot2

		PlayerPrefs.SetInt(&quot;ActBossTipLastTime&quot;, slot2)
	end

	PlayerPrefs.SetInt(&quot;ActBossTip&quot;, slot1)
	PlayerPrefs.Save()
end

slot0.isTipActBossExchangeTicket = function(slot0)
	if slot0._nextTipActBossTime &lt; pg.TimeMgr.GetInstance():GetServerTime() then
		return nil
	end

	return slot0.nextTipActBossExchangeTicket
end

slot0.SetScreenRatio = function(slot0, slot1)
	if slot0._screenRatio ~= slot1 then
		slot0._screenRatio = slot1

		PlayerPrefs.SetFloat(&quot;SetScreenRatio&quot;, slot1)
		PlayerPrefs.Save()
	end
end

slot0.GetScreenRatio = function(slot0)
	return slot0._screenRatio
end

slot0.CheckLargeScreen = function(slot0)
	return Screen.width / Screen.height &gt; 2
end

slot0.IsShowBeatMonseterNianCurtain = function(slot0)
	return tonumber(PlayerPrefs.GetString(&quot;HitMonsterNianLayer2020&quot; .. getProxy(PlayerProxy):getRawData().id, &quot;0&quot;)) &lt; pg.TimeMgr.GetInstance():GetServerTime()
end

slot0.SetBeatMonseterNianFlag = function(slot0)
	PlayerPrefs.SetString(&quot;HitMonsterNianLayer2020&quot; .. getProxy(PlayerProxy):getRawData().id, GetZeroTime())
	PlayerPrefs.Save()
end

slot0.ShouldShowEventActHelp = function(slot0)
	if not slot0.actEventFlag then
		slot0.actEventFlag = PlayerPrefs.GetInt(&quot;event_act_help1&quot; .. getProxy(PlayerProxy):getRawData().id, 0) &gt; 0
	end

	return not slot0.actEventFlag
end

slot0.MarkEventActHelpFlag = function(slot0)
	if not slot0.actEventFlag then
		slot0.actEventFlag = true

		PlayerPrefs.SetInt(&quot;event_act_help1&quot; .. getProxy(PlayerProxy):getRawData().id, 1)
		PlayerPrefs.Save()
	end
end

slot0.SetStorySpeed = function(slot0, slot1)
	slot0.storySpeed = slot1
	slot2 = nil

	PlayerPrefs.SetInt(&quot;story_speed_flag&quot; .. ((not getProxy(PlayerProxy) or getProxy(PlayerProxy):getRawData().id) and 1), slot1)
	PlayerPrefs.Save()
end

slot0.GetStorySpeed = function(slot0)
	if not slot0.storySpeed then
		slot1 = nil
		slot0.storySpeed = PlayerPrefs.GetInt(&quot;story_speed_flag&quot; .. ((not getProxy(PlayerProxy) or getProxy(PlayerProxy):getRawData().id) and 1), 0)
	end

	return slot0.storySpeed
end

slot0.GetStoryAutoPlayFlag = function(slot0)
	return slot0.storyAutoPlayCode &gt; 0
end

slot0.SetStoryAutoPlayFlag = function(slot0, slot1)
	if slot0.storyAutoPlayCode ~= slot1 then
		PlayerPrefs.SetInt(&quot;story_autoplay_flag&quot;, slot1)
		PlayerPrefs.Save()

		slot0.storyAutoPlayCode = slot1
	end
end

slot0.GetPaintingDownloadPrefs = function(slot0)
	return PlayerPrefs.GetInt(&quot;Painting_Download_Prefs&quot;, 0)
end

slot0.SetPaintingDownloadPrefs = function(slot0, slot1)
	PlayerPrefs.SetInt(&quot;Painting_Download_Prefs&quot;, slot1)
end

slot0.ShouldShipMainSceneWord = function(slot0)
	return slot0.showMainSceneWordTip
end

slot0.SaveMainSceneWordFlag = function(slot0, slot1)
	if slot0.showMainSceneWordTip ~= slot1 then
		slot0.showMainSceneWordTip = slot1

		PlayerPrefs.SetInt(&quot;main_scene_word_toggle&quot;, slot1 and 1 or 0)
		PlayerPrefs.Save()
	end
end

slot0.RecordFrameRate = function(slot0)
	if not slot0.originalFrameRate then
		slot0.originalFrameRate = Application.targetFrameRate
	end
end

slot0.RestoreFrameRate = function(slot0)
	if slot0.originalFrameRate then
		Application.targetFrameRate = slot0.originalFrameRate
		slot0.originalFrameRate = nil
	end
end

slot0.ResetTimeLimitSkinShopTip = function(slot0)
	slot0.isTipLimitSkinShop = PlayerPrefs.GetInt(&quot;tipLimitSkinShopTime_&quot;, 0) &lt;= pg.TimeMgr.GetInstance():GetServerTime()

	if slot0.isTipLimitSkinShop then
		slot0.nextTipLimitSkinShopTime = GetZeroTime()
	end
end

slot0.ShouldTipTimeLimitSkinShop = function(slot0)
	return slot0.isTipLimitSkinShop
end

slot0.SetNextTipTimeLimitSkinShop = function(slot0)
	if slot0.isTipLimitSkinShop and slot0.nextTipLimitSkinShopTime then
		PlayerPrefs.SetInt(&quot;tipLimitSkinShopTime_&quot;, slot0.nextTipLimitSkinShopTime)
		PlayerPrefs.Save()

		slot0.nextTipLimitSkinShopTime = nil
		slot0.isTipLimitSkinShop = false
	end
end

slot0.WorldBossProgressTipFlag = function(slot0, slot1)
	if slot0.WorldBossProgressTipValue ~= slot1 then
		slot0.WorldBossProgressTipValue = slot1

		PlayerPrefs.SetString(&quot;_WorldBossProgressTipFlag_&quot;, slot1)
		PlayerPrefs.Save()
	end
end

slot0.GetWorldBossProgressTipFlag = function(slot0)
	if not slot0.WorldBossProgressTipValue then
		slot1 = pg.gameset.joint_boss_ticket.description
		slot4 = PlayerPrefs.GetString(&quot;_WorldBossProgressTipFlag_&quot;, slot1[1] .. &quot;&amp;&quot; .. slot1[1] + slot1[2])
		slot0.WorldBossProgressTipValue = slot4

		return slot4
	else
		return slot0.WorldBossProgressTipValue
	end
end

slot0.GetWorldBossProgressTipTable = function(slot0)
	if not slot0:GetWorldBossProgressTipFlag() or slot1 == &quot;&quot; then
		return {}
	end

	return string.split(slot1, &quot;&amp;&quot;)
end

slot0.GetChatFlag = function(slot0)
	if not slot0.chatFlag then
		slot1 = {
			ChatConst.ChannelWorld,
			ChatConst.ChannelPublic,
			ChatConst.ChannelFriend
		}

		if getProxy(GuildProxy):getRawData() then
			table.insert(slot1, ChatConst.ChannelGuild)
		end

		slot0.chatFlag = PlayerPrefs.GetInt(&quot;chat__setting&quot;, IndexConst.Flags2Bits(slot1))
	end

	return slot0.chatFlag
end

slot0.SetChatFlag = function(slot0, slot1)
	if slot0.chatFlag ~= slot1 then
		slot0.chatFlag = slot1

		PlayerPrefs.SetInt(&quot;chat__setting&quot;, slot1)
		PlayerPrefs.Save()
	end
end

slot0.IsShowActivityMapSPTip = function()
	return PlayerPrefs.GetInt(&quot;ActivityMapSPTip&quot; .. getProxy(PlayerProxy):getRawData().id, 0) &lt; pg.TimeMgr.GetInstance():GetServerTime()
end

slot0.SetActivityMapSPTip = function()
	PlayerPrefs.SetInt(&quot;ActivityMapSPTip&quot; .. getProxy(PlayerProxy):getRawData().id, GetZeroTime())
	PlayerPrefs.Save()
end

slot0.IsTipNewTheme = function(slot0)
	slot1 = pg.backyard_theme_template
	slot2 = slot1.all[#slot1.all]
	slot4 = pg.furniture_shop_template[slot1[slot2].ids[1]]

	if slot4 and slot4.new == 1 and pg.TimeMgr.GetInstance():inTime(slot4.time) and PlayerPrefs.GetInt(getProxy(PlayerProxy):getRawData().id .. &quot;IsTipNewTheme&quot; .. slot2, 0) == 0 then
		slot0.lastThemeId = slot2
	else
		slot0.lastThemeId = nil
	end

	return slot0.lastThemeId ~= nil
end

slot0.UpdateNewThemeValue = function(slot0)
	if slot0.lastThemeId then
		PlayerPrefs.SetInt(getProxy(PlayerProxy):getRawData().id .. &quot;IsTipNewTheme&quot; .. slot0.lastThemeId, 1)
		PlayerPrefs.Save()
	end
end

slot0.GetNewGemFurnitureLocalCache = function(slot0)
	if not slot0.cacheGemFuruitures then
		slot0.cacheGemFuruitures = {}

		if PlayerPrefs.GetString(getProxy(PlayerProxy):getRawData().id .. &quot;IsTipNewGenFurniture&quot;) ~= &quot;&quot; then
			for slot7, slot8 in ipairs(string.split(slot2, &quot;#&quot;)) do
				slot0.cacheGemFuruitures[tonumber(slot8)] = true
			end
		end
	end

	return slot0.cacheGemFuruitures
end

slot0.IsTipNewGemFurniture = function(slot0)
	slot1 = slot0:GetNewGemFurnitureLocalCache()
	slot2 = getProxy(DormProxy)

	if _.any(slot2:GetTag7Furnitures(), function (slot0)
		return pg.furniture_shop_template[slot0].new == 1 and not uv0[slot0]
	end) then
		slot0.newGemFurniture = slot2
	else
		slot0.newGemFurniture = nil
	end

	return slot0.newGemFurniture ~= nil
end

slot0.UpdateNewGemFurnitureValue = function(slot0)
	if slot0.newGemFurniture then
		for slot4, slot5 in pairs(slot0.newGemFurniture) do
			slot0.cacheGemFuruitures[slot5] = true
		end

		PlayerPrefs.SetString(getProxy(PlayerProxy):getRawData().id .. &quot;IsTipNewGenFurniture&quot;, table.concat(slot0.newGemFurniture, &quot;#&quot;))
		PlayerPrefs.Save()
	end
end

slot0.GetRandomFlagShipList = function(slot0)
	if slot0.randomFlagShipList then
		return slot0.randomFlagShipList
	end

	if PlayerPrefs.GetString(&quot;RandomFlagShipList&quot; .. getProxy(PlayerProxy):getRawData().id, &quot;&quot;) == &quot;&quot; then
		slot0.randomFlagShipList = {}
	else
		slot0.randomFlagShipList = string.split(slot2, &quot;#&quot;)
	end

	return slot0.randomFlagShipList
end

slot0.IsRandomFlagShip = function(slot0, slot1)
	if not slot0.randomFlagShipMap then
		slot0.randomFlagShipMap = {}

		for slot5, slot6 in ipairs(slot0:GetRandomFlagShipList()) do
			slot0.randomFlagShipMap[slot6] = true
		end
	end

	return slot0.randomFlagShipMap[slot1] == true
end

slot0.IsOpenRandomFlagShip = function(slot0)
	slot2 = getProxy(BayProxy)

	return #slot0:GetRandomFlagShipList() &gt; 0 and _.any(slot1, function (slot0)
		slot1, slot2 = ShipPhantom.UnpackMark(slot0)

		return uv0:RawGetShipById(slot1) ~= nil
	end)
end

slot0.UpdateRandomFlagShipList = function(slot0, slot1)
	slot0.randomFlagShipMap = nil
	slot0.randomFlagShipList = slot1

	for slot5, slot6 in ipairs(slot1) do
		if getProxy(BayProxy):GetShipPhantom(slot6) and slot7.phantomId &gt; 0 then
			pg.GameTrackerMgr.GetInstance():Record(GameTrackerBuilder.BuildPhantom(slot7:getSkinId()))
		end
	end

	PlayerPrefs.SetString(&quot;RandomFlagShipList&quot; .. getProxy(PlayerProxy):getRawData().id, table.concat(slot1, &quot;#&quot;))
	PlayerPrefs.Save()
end

slot0.GetPrevRandomFlagShipTime = function(slot0)
	if slot0.prevRandomFlagShipTime then
		return slot0.prevRandomFlagShipTime
	end

	slot0.prevRandomFlagShipTime = PlayerPrefs.GetInt(&quot;RandomFlagShipTime&quot; .. getProxy(PlayerProxy):getRawData().id, 0)

	return slot0.prevRandomFlagShipTime
end

slot0.SetPrevRandomFlagShipTime = function(slot0, slot1)
	if slot0.prevRandomFlagShipTime == slot1 then
		return
	end

	slot0.prevRandomFlagShipTime = slot1

	PlayerPrefs.SetInt(&quot;RandomFlagShipTime&quot; .. getProxy(PlayerProxy):getRawData().id, slot1)
	PlayerPrefs.Save()
end

slot0.GetFlagShipDisplayMode = function(slot0)
	if not slot0.flagShipDisplayMode then
		slot0.flagShipDisplayMode = PlayerPrefs.GetInt(&quot;flag-ship-display-mode&quot; .. getProxy(PlayerProxy):getRawData().id, FlAG_SHIP_DISPLAY_ALL)
	end

	return slot0.flagShipDisplayMode
end

slot0.SetFlagShipDisplayMode = function(slot0, slot1)
	if slot0.flagShipDisplayMode ~= slot1 then
		slot0.flagShipDisplayMode = slot1

		PlayerPrefs.SetInt(&quot;flag-ship-display-mode&quot; .. getProxy(PlayerProxy):getRawData().id, slot1)
		PlayerPrefs.Save()
	end
end

slot0.RecordContinuousOperationAutoSubStatus = function(slot0, slot1)
	if slot1 then
		return
	end

	PlayerPrefs.SetInt(&quot;AutoBotCOFlag&quot; .. getProxy(PlayerProxy):getRawData().id, 1)
	PlayerPrefs.Save()
end

slot0.ResetContinuousOperationAutoSub = function(slot0)
	if PlayerPrefs.GetInt(&quot;AutoBotCOFlag&quot; .. getProxy(PlayerProxy):getRawData().id, 0) == 0 then
		return
	end

	pg.m02:sendNotification(GAME.AUTO_SUB, {
		isActiveSub = true,
		system = SYSTEM_ACT_BOSS
	})
	PlayerPrefs.SetInt(&quot;AutoBotCOFlag&quot; .. slot1, 0)
	PlayerPrefs.Save()
end

slot0.SetWorkbenchDailyTip = function(slot0)
	PlayerPrefs.SetInt(&quot;WorkbenchDailyTip&quot; .. getProxy(PlayerProxy):getRawData().id, GetZeroTime())
	PlayerPrefs.Save()
end

slot0.IsTipWorkbenchDaily = function(slot0)
	return PlayerPrefs.GetInt(&quot;WorkbenchDailyTip&quot; .. getProxy(PlayerProxy):getRawData().id, 0) &lt; pg.TimeMgr.GetInstance():GetServerTime()
end

slot0.IsDisplayResultPainting = function(slot0)
	slot2 = false

	if PlayerPrefs.HasKey(BATTLERESULT_SKIP_DISPAY_PAINTING) then
		PlayerPrefs.DeleteKey(BATTLERESULT_SKIP_DISPAY_PAINTING)
		PlayerPrefs.SetInt(BATTLERESULT_DISPAY_PAINTING, PlayerPrefs.GetInt(BATTLERESULT_SKIP_DISPAY_PAINTING) &lt;= 0 and 1 or 0)
		PlayerPrefs.Save()
	else
		slot2 = PlayerPrefs.GetInt(BATTLERESULT_DISPAY_PAINTING, 0) &gt;= 1
	end

	return slot2
end

slot0.IsDisplayCommanderCatCustomName = function(slot0)
	if not slot0.customFlag then
		slot0.customFlag = PlayerPrefs.GetInt(&quot;DisplayCommanderCatCustomName&quot; .. getProxy(PlayerProxy):getRawData().id, 0) == 0
	end

	return slot0.customFlag
end

slot0.SetDisplayCommanderCatCustomName = function(slot0, slot1)
	if slot1 == slot0.customFlag then
		return
	end

	slot0.customFlag = slot1

	PlayerPrefs.SetInt(&quot;DisplayCommanderCatCustomName&quot; .. getProxy(PlayerProxy):getRawData().id, slot0.customFlag and 0 or 1)
	PlayerPrefs.Save()
end

slot0.GetCommanderQuicklyToolRarityConfig = function(slot0)
	if not slot0.quicklyToolRarityConfig then
		slot1 = getProxy(PlayerProxy)
		slot0.quicklyToolRarityConfig = _.map(string.split(PlayerPrefs.GetString(&quot;CommanderQuicklyToolRarityConfig&quot; .. slot1:getRawData().id, &quot;1#1#1&quot;), &quot;#&quot;), function (slot0)
			return tonumber(slot0) == 1
		end)
	end

	return slot0.quicklyToolRarityConfig
end

slot0.SaveCommanderQuicklyToolRarityConfig = function(slot0, slot1)
	slot2 = false

	for slot6, slot7 in ipairs(slot0.quicklyToolRarityConfig) do
		if slot1[slot6] ~= slot7 then
			slot2 = true

			break
		end
	end

	if slot2 then
		slot0.quicklyToolRarityConfig = slot1
		slot5 = getProxy(PlayerProxy)

		PlayerPrefs.SetString(&quot;CommanderQuicklyToolRarityConfig&quot; .. slot5:getRawData().id, table.concat(_.map(slot0.quicklyToolRarityConfig, function (slot0)
			return slot0 and &quot;1&quot; or &quot;0&quot;
		end), &quot;#&quot;))
		PlayerPrefs.Save()
	end
end

slot0.GetCommanderLockFlagRarityConfig = function(slot0)
	if not slot0.lockFlagRarityConfig then
		slot1 = getProxy(PlayerProxy)
		slot0.lockFlagRarityConfig = _.map(string.split(PlayerPrefs.GetString(&quot;CommanderLockFlagRarityConfig_&quot; .. slot1:getRawData().id, &quot;1#0#0&quot;), &quot;#&quot;), function (slot0)
			return tonumber(slot0) == 1
		end)
	end

	return slot0.lockFlagRarityConfig
end

slot0.SaveCommanderLockFlagRarityConfig = function(slot0, slot1)
	slot2 = false

	for slot6, slot7 in ipairs(slot0.lockFlagRarityConfig) do
		if slot1[slot6] ~= slot7 then
			slot2 = true

			break
		end
	end

	if slot2 then
		slot0.lockFlagRarityConfig = slot1
		slot5 = getProxy(PlayerProxy)

		PlayerPrefs.SetString(&quot;CommanderLockFlagRarityConfig_&quot; .. slot5:getRawData().id, table.concat(_.map(slot0.lockFlagRarityConfig, function (slot0)
			return slot0 and &quot;1&quot; or &quot;0&quot;
		end), &quot;#&quot;))
		PlayerPrefs.Save()
	end
end

slot0.GetCommanderLockFlagTalentConfig = function(slot0)
	if not slot0.lockFlagTalentConfig then
		slot3 = {}

		if PlayerPrefs.GetString(&quot;CommanderLockFlagTalentConfig&quot; .. getProxy(PlayerProxy):getRawData().id, &quot;&quot;) == &quot;&quot; then
			for slot7, slot8 in ipairs(CommanderCatUtil.GetAllTalentNames()) do
				slot3[slot8.id] = true
			end
		else
			slot7 = &quot;#&quot;

			for slot7, slot8 in ipairs(string.split(slot2, slot7)) do
				if #string.split(slot8, &quot;*&quot;) == 2 then
					slot3[tonumber(slot9[1])] = tonumber(slot9[2]) == 1
				end
			end
		end

		slot0.lockFlagTalentConfig = slot3
	end

	return slot0.lockFlagTalentConfig
end

slot0.SaveCommanderLockFlagTalentConfig = function(slot0, slot1)
	slot0.lockFlagTalentConfig = slot1
	slot2 = {}

	for slot6, slot7 in pairs(slot1) do
		table.insert(slot2, slot6 .. &quot;*&quot; .. (slot7 and &quot;1&quot; or &quot;0&quot;))
	end

	PlayerPrefs.SetString(&quot;CommanderLockFlagTalentConfig&quot; .. getProxy(PlayerProxy):getRawData().id, table.concat(slot2, &quot;#&quot;))
	PlayerPrefs.Save()
end

slot0.GetMainPaintingVariantFlag = function(slot0, slot1)
	if not slot0.mainPaintingVariantFlag then
		slot0.mainPaintingVariantFlag = {}
	end

	if not slot0.mainPaintingVariantFlag[slot1] then
		slot0.mainPaintingVariantFlag[slot1] = PlayerPrefs.GetInt(slot1 .. &quot;_mainMeshImagePainting_ex_&quot; .. getProxy(PlayerProxy):getRawData().id, 0)
	end

	return slot0.mainPaintingVariantFlag[slot1]
end

slot0.SwitchMainPaintingVariantFlag = function(slot0, slot1)
	slot3 = 1 - slot0:GetMainPaintingVariantFlag(slot1)
	slot0.mainPaintingVariantFlag[slot1] = slot3

	PlayerPrefs.SetInt(slot1 .. &quot;_mainMeshImagePainting_ex_&quot; .. getProxy(PlayerProxy):getRawData().id, slot3)
	PlayerPrefs.Save()
end

slot0.IsTipDay = function(slot0, slot1, slot2, slot3)
	return PlayerPrefs.GetInt(getProxy(PlayerProxy):getRawData().id .. &quot;educate_char_&quot; .. slot1 .. slot2 .. slot3, 0) == 1
end

slot0.RecordTipDay = function(slot0, slot1, slot2, slot3)
	PlayerPrefs.SetInt(getProxy(PlayerProxy):getRawData().id .. &quot;educate_char_&quot; .. slot1 .. slot2 .. slot3, 1)
	PlayerPrefs.Save()
end

slot0.UpdateEducateCharTip = function(slot0, slot1)
	slot2 = getProxy(PlayerProxy):getRawData().id
	slot3 = NewEducateHelper.GetAllUnlockSecretaryIds()
	slot4 = {}
	slot5 = ipairs
	slot6 = slot1 or {}

	for slot8, slot9 in slot5(slot6) do
		slot4[slot9] = true
	end

	slot5 = ipairs
	slot6 = slot3 or {}

	for slot8, slot9 in slot5(slot6) do
		slot10 = slot2 .. &quot;educate_char_tip&quot; .. slot9

		if slot4[slot9] ~= true then
			PlayerPrefs.SetInt(slot10, 1)
			PlayerPrefs.Save()
		end
	end

	slot0:RefillEducateCharTipList()
end

slot0.RefillEducateCharTipList = function(slot0)
	slot1 = getProxy(PlayerProxy):getRawData().id
	slot0.educateCharTipList = {}

	if LOCK_EDUCATE_SYSTEM then
		return
	end

	slot3 = ipairs
	slot4 = NewEducateHelper.GetAllUnlockSecretaryIds() or {}

	for slot6, slot7 in slot3(slot4) do
		if PlayerPrefs.GetInt(slot1 .. &quot;educate_char_tip&quot; .. slot7, 0) == 1 then
			table.insert(slot0.educateCharTipList, slot7)
		end
	end
end

slot0.ShouldEducateCharTip = function(slot0)
	if NewEducateHelper.GetEducateCharSlotMaxCnt() == 0 then
		return false
	end

	if not slot0.educateCharTipList or #slot0.educateCharTipList == 0 then
		slot0:RefillEducateCharTipList()
	end

	return _.any(slot0.educateCharTipList, function (slot0)
		return NewEducateHelper.IsUnlockDefaultShip(slot0)
	end)
end

slot0._ShouldEducateCharTip = function(slot0, slot1)
	if not slot0.educateCharTipList or #slot0.educateCharTipList == 0 then
		slot0:RefillEducateCharTipList()
	end

	if table.contains(slot0.educateCharTipList, slot1) and NewEducateHelper.IsUnlockDefaultShip(slot1) then
		return true
	end

	return false
end

slot0.ClearEducateCharTip = function(slot0, slot1)
	if not slot0:_ShouldEducateCharTip(slot1) then
		return false
	end

	table.removebyvalue(slot0.educateCharTipList, slot1)

	if PlayerPrefs.HasKey(getProxy(PlayerProxy):getRawData().id .. &quot;educate_char_tip&quot; .. slot1) then
		PlayerPrefs.DeleteKey(slot3)
		PlayerPrefs.Save()
	end

	pg.m02:sendNotification(GAME.CLEAR_EDUCATE_TIP, {
		id = slot1
	})

	return true
end

slot0.GetMainSceneThemeStyle = function(slot0)
	if PlayerPrefs.GetInt(USAGE_NEW_MAINUI, 1) == 1 then
		return NewMainScene.THEME_MELLOW
	else
		return NewMainScene.THEME_CLASSIC
	end
end

slot0.IsMellowStyle = function(slot0)
	return NewMainScene.THEME_MELLOW == slot0:GetMainSceneThemeStyle()
end

slot0.GetMainSceneScreenSleepTime = function(slot0)
	if pg.NewGuideMgr.GetInstance():IsBusy() then
		return SleepTimeout.SystemSetting
	end

	if PlayerPrefs.GetInt(pg.settings_other_template[20].name, 1) == 1 then
		return SleepTimeout.NeverSleep
	else
		return SleepTimeout.SystemSetting
	end
end

slot0.ShowL2dResetInMainScene = function(slot0)
	return PlayerPrefs.GetInt(pg.settings_other_template[21].name, 0) == 1
end

slot0.Reset = function(slot0)
	slot0:resetEquipSceneIndex()
	slot0:resetActivityLayerIndex()

	slot0.isStopBuildSpeedupReamind = false

	slot0:RestoreFrameRate()

	slot0.randomFlagShipList = nil
	slot0.prevRandomFlagShipTime = nil
	slot0.randomFlagShipMap = nil
	slot0.educateCharTipList = {}
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>