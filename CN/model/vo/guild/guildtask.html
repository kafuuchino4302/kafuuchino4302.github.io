<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>guildtask.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>guildtask.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;GuildTask&quot;, import(&quot;..BaseVO&quot;))
slot0.STATE_EMPTY = 0
slot0.STATE_ONGOING = 2
slot0.STATE_FINISHED = 3
slot0.PRIVATE_TASK_TYPE_EVENT = {
	400
}
slot0.PRIVATE_TASK_TYPE_BATTLE = {
	20,
	11
}

slot0.Ctor = function(slot0, slot1)
	slot0.id = slot1.id or 0
	slot0.configId = slot0.id
	slot0.progress = slot1.progress or 0
	slot0.endTime = 0

	if (slot1.monday_0clock or 0) &gt; 0 then
		slot0.endTime = slot2 + 604800
	end
end

slot0.bindConfigTable = function(slot0)
	return pg.guild_mission_template
end

slot0.GetLivenessAddition = function(slot0)
	return slot0:getConfig(&quot;guild_active&quot;)
end

slot0.isExpire = function(slot0)
	return slot0.endTime &gt; 0 and slot0:isEnd()
end

slot0.getProgress = function(slot0)
	return slot0.progress
end

slot0.updateProgress = function(slot0, slot1)
	slot0.progress = slot1
end

slot0.isEnd = function(slot0)
	return slot0.endTime &lt;= pg.TimeMgr.GetInstance():GetServerTime()
end

slot0.getState = function(slot0)
	if slot0.id == 0 or slot0:isEnd() then
		return uv0.STATE_EMPTY
	elseif slot0:isFinished() then
		return uv0.STATE_FINISHED
	else
		return uv0.STATE_ONGOING
	end
end

slot0.GetPresonTaskId = function(slot0)
	return slot0:getConfig(&quot;task_id&quot;)
end

slot0.GetPrivateTaskName = function(slot0)
	return pg.task_data_template[slot0:GetPresonTaskId()].desc
end

slot0.IsSamePrivateTask = function(slot0, slot1)
	return slot1 and slot1.id == slot0:GetPresonTaskId()
end

slot0.isFinished = function(slot0)
	return slot0:getMaxProgress() &lt;= slot0.progress
end

slot0.getMaxProgress = function(slot0)
	return slot0:getConfig(&quot;max_num&quot;)
end

slot0.isRemind = function(slot0, slot1)
	return pg.TimeMgr.GetInstance():GetServerWeek() &lt;= slot0:getConfig(&quot;warning_time&quot;)[slot1]
end

slot0.GetScale = function(slot0)
	return slot0:getConfig(&quot;task_scale&quot;)
end

slot0.GetDesc = function(slot0)
	return slot0:getConfig(&quot;name&quot;)
end

slot0.GetPrivateAward = function(slot0)
	return slot0:getConfig(&quot;award_display&quot;)
end

slot0.GetCaptailAward = function(slot0)
	return slot0:getConfig(&quot;award_capital_display&quot;) * slot0:getMaxProgress()
end

slot0.GetCurrCaptailAward = function(slot0)
	return slot0.progress * slot0:getConfig(&quot;award_capital_display&quot;)
end

slot0.PrivateBeFinished = function(slot0)
	if uv0.STATE_ONGOING == slot0:getState() then
		slot3 = getProxy(TaskProxy):getTaskById(slot0:GetPresonTaskId()) or slot2:getFinishTaskById(slot1)

		return slot3 and slot3:isFinish() and not slot3:isReceive()
	end

	return false
end

slot0.SamePrivateTaskType = function(slot0, slot1)
	slot3 = pg.task_data_template[slot0:GetPresonTaskId()].sub_type

	return _.any(slot1, function (slot0)
		return slot0 == uv0
	end)
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>