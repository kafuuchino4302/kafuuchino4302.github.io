<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>workbenchformula.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>workbenchformula.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;WorkBenchFormula&quot;, import(&quot;model.vo.BaseVO&quot;))

slot0.bindConfigTable = function(slot0)
	return pg.activity_workbench_recipe
end

slot0.Ctor = function(slot0, ...)
	uv0.super.Ctor(slot0, ...)

	slot0.times = slot0.times or 0
	slot0.unlock = true
end

slot0.GetName = function(slot0)
	return slot0:getConfig(&quot;name&quot;)
end

slot0.GetIconPath = function(slot0)
	return slot0:getConfig(&quot;icon&quot;)
end

slot0.GetLockLimit = function(slot0)
	return FilterVarchar(slot0:getConfig(&quot;recipe_lock&quot;))
end

slot0.GetLockDesc = function(slot0)
	return slot0:getConfig(&quot;lock_display&quot;)
end

slot0.BuildFromActivity = function(slot0)
	slot0.unlock = (function ()
		if uv0:GetLockLimit() and slot0[1] == 1 then
			slot1 = getProxy(ActivityProxy):getActivityByType(ActivityConst.ACTIVITY_TYPE_BUILDING_BUFF_2)

			assert(slot1)

			return slot0[3] &lt;= slot1:GetBuildingLevel(slot0[2])
		end

		return true
	end)()
	slot2 = getProxy(ActivityProxy):getActivityByType(ActivityConst.ACTIVITY_TYPE_WORKBENCH)

	assert(slot2)

	slot0.times = slot2:GetFormulaUseCount(slot0:GetConfigID())
end

slot0.IsUnlock = function(slot0)
	return slot0.unlock
end

slot0.GetMaxLimit = function(slot0)
	return slot0:getConfig(&quot;item_num&quot;)
end

slot0.SetUsedCount = function(slot0, slot1)
	slot0.times = slot1
end

slot0.GetUsedCount = function(slot0)
	return slot0.times
end

slot0.IsAvaliable = function(slot0)
	return slot0:GetMaxLimit() &lt;= 0 or slot0:GetUsedCount() &lt; slot0:GetMaxLimit()
end

slot0.GetProduction = function(slot0)
	return slot0:getConfig(&quot;item_id&quot;)
end

slot0.GetMaterials = function(slot0)
	return slot0:getConfig(&quot;recipe&quot;)
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>