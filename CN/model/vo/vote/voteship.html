<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>voteship.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>voteship.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;VoteShip&quot;, import(&quot;..BaseVO&quot;))

slot0.Ctor = function(slot0, slot1, slot2)
	slot0.voteId = slot2
	slot0.group = slot1.key
	slot0.totalVotes = slot1.value1
	slot0.votes = slot1.value2
	slot0.netVotes = slot1.value3
	slot0.configId = slot0:GenConfigId(slot0.group)

	assert(slot0.configId)
end

slot0.GenConfigId = function(slot0, slot1)
	for slot5 = 4, 1, -1 do
		if pg.ship_data_statistics[tonumber(slot1 .. slot5)] then
			return slot6
		end
	end
end

slot0.bindConfigTable = function(slot0)
	return pg.ship_data_statistics
end

slot0.getRarity = function(slot0)
	return slot0:getConfig(&quot;rarity&quot;)
end

slot0.getShipName = function(slot0)
	if slot0.group == 30507 then
		slot1, slot2 = i18n(&quot;name_zhanliejahe&quot;)

		return slot1
	end

	return slot0:getConfig(&quot;name&quot;)
end

slot0.getEnName = function(slot0)
	return slot0:getConfig(&quot;english_name&quot;)
end

slot0.getTeamType = function(slot0)
	return TeamType.GetTeamFromShipType(slot0:getShipType())
end

slot0.getPainting = function(slot0)
	return pg.ship_skin_template[slot0:getConfig(&quot;skin_id&quot;)].painting
end

slot0.GetDesc = function(slot0)
	return ShipWordHelper.RawGetWord(slot0:getConfig(&quot;skin_id&quot;), ShipWordHelper.WORD_TYPE_PROFILE)
end

slot0.getShipType = function(slot0)
	if slot0:IsFunRace() then
		return &quot;&quot;
	else
		return slot0:getConfig(&quot;type&quot;)
	end
end

slot0.getShipTypeName = function(slot0)
	if slot0:IsFunRace() then
		return &quot;&quot;
	else
		return pg.ship_data_by_type[slot0:getConfig(&quot;type&quot;)].type_name
	end
end

slot0.IsFunRace = function(slot0)
	return pg.activity_vote[slot0.voteId].type == VoteConst.RACE_TYPE_FUN
end

slot0.getNationality = function(slot0)
	if slot0:IsFunRace() then
		return nil
	else
		return slot0:getConfig(&quot;nationality&quot;)
	end
end

slot0.getNation = function(slot0)
	return slot0:getNationality()
end

slot0.IsMatchSearchKey = function(slot0, slot1)
	if not slot1 or slot1 == &quot;&quot; then
		return true
	end

	return string.find(string.lower(slot0:getShipName()), string.lower(string.gsub(slot1, &quot;%.&quot;, &quot;%%.&quot;)))
end

slot0.UpdateVoteCnt = function(slot0, slot1)
	slot0.votes = slot0.votes + slot1
end

slot0.getScore = function(slot0)
	return slot0.votes
end

slot0.GetTotalScore = function(slot0)
	return slot0.totalVotes
end

slot0.isSamaGroup = function(slot0, slot1)
	return slot0.group == slot1
end

slot0.GetGameVotes = function(slot0)
	if slot0.votes &gt;= 100000 then
		return math.floor(slot0.votes / 1000) .. &quot;K&quot;
	else
		return slot0.votes
	end
end

slot0.getTotalVotes = function(slot0)
	if slot0.totalVotes &gt;= 100000 then
		return math.floor(slot0.totalVotes / 1000) .. &quot;K&quot;
	else
		return slot0.totalVotes
	end
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>