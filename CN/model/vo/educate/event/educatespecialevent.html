<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>educatespecialevent.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>educatespecialevent.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;EducateSpecialEvent&quot;, import(&quot;model.vo.BaseVO&quot;))
slot0.TYPE_PLAN = 1
slot0.TYPE_SITE = 2
slot0.TYPE_BUBBLE_MIND = 3
slot0.TYPE_BUBBLE_DISCOUNT = 4
slot0.TAG_ING = 1
slot0.TAG_COMING = 2
slot0.TAG_END = 3
slot0.TAG2NAME = {
	[slot0.TAG_ING] = &quot;ING&quot;,
	[slot0.TAG_COMING] = &quot;COMING&quot;,
	[slot0.TAG_END] = &quot;END&quot;
}

slot0.Ctor = function(slot0, slot1)
	slot0.id = slot1
	slot0.configId = slot0.id

	slot0:initTime()
end

slot0.bindConfigTable = function(slot0)
	return pg.child_event_special
end

slot0.GetType = function(slot0)
	return slot0:getConfig(&quot;type&quot;)
end

slot0.IsPlanType = function(slot0)
	return slot0:GetType() == uv0.TYPE_PLAN
end

slot0.GetGridIndexs = function(slot0)
	slot1 = {}

	for slot5 = slot0.startTime.day, slot0.endTime.day do
		slot9 = &quot;date&quot;

		for slot9 = slot0:getConfig(&quot;date&quot;)[1][4], slot0:getConfig(slot9)[2][4] do
			table.insert(slot1, {
				slot5,
				slot9
			})
		end
	end

	return slot1
end

slot0.IsSiteType = function(slot0)
	return slot0:GetType() == uv0.TYPE_SITE
end

slot0.IsMatchSite = function(slot0, slot1)
	return table.contains(slot0:getConfig(&quot;type_param&quot;), slot1)
end

slot0.initTime = function(slot0)
	slot0.startTime, slot0.endTime = EducateHelper.CfgTime2Time(slot0:getConfig(&quot;date&quot;))
end

slot0.InTime = function(slot0, slot1)
	return EducateHelper.InTime(slot1, slot0.startTime, slot0.endTime)
end

slot0.IsMatch = function(slot0, slot1)
	if slot0:getConfig(&quot;child_attr2&quot;) == 0 then
		return true
	end

	return slot0:getConfig(&quot;child_attr2&quot;) == slot1
end

slot0.IsUnlockSite = function(slot0)
	if not slot0:IsSiteType() then
		return true
	end

	return EducateHelper.IsSiteUnlock(slot0:getConfig(&quot;type_param&quot;)[1], getProxy(EducateProxy):IsFirstGame())
end

slot0.InNextWeekTime = function(slot0, slot1)
	return slot0.startTime.month &lt;= EducateHelper.GetTimeAfterDays(slot1, 7).month and slot2.month &lt;= slot0.endTime.month and slot0.startTime.week &lt;= slot2.week and slot2.week &lt;= slot0.endTime.week
end

slot0.GetPerformance = function(slot0)
	return slot0:getConfig(&quot;performance&quot;)
end

slot0.GetResult = function(slot0)
	return slot0:getConfig(&quot;result_display&quot;) or {}
end

slot0.InMonth = function(slot0, slot1)
	return slot1 &lt;= slot0.startTime.month and slot0.endTime.month &lt;= slot1
end

slot0.IsShow = function(slot0)
	return slot0:getConfig(&quot;show&quot;) ~= 0
end

slot0.IsImport = function(slot0)
	return slot0:getConfig(&quot;show&quot;) == 1
end

slot0.IsOther = function(slot0)
	return slot0:getConfig(&quot;show&quot;) == 2
end

slot0.GetTag = function(slot0, slot1, slot2)
	if table.contains(slot1, slot0.id) or slot0.endTime.week &lt; slot2 then
		return uv0.TAG_END
	else
		return slot0.startTime.week &lt;= slot2 and uv0.TAG_ING or uv0.TAG_COMING
	end
end

slot0.GetTimeDesc = function(slot0)
	if slot0.startTime.week == slot0.endTime.week then
		return i18n(&quot;word_which_week&quot;, slot0.startTime.week)
	else
		return i18n(&quot;word_which_week&quot;, slot0.startTime.week) .. &quot;-&quot; .. i18n(&quot;word_which_week&quot;, slot0.endTime.week)
	end
end

slot0.GetDiscountShopId = function(slot0)
	if slot0:getConfig(&quot;type&quot;) == uv0.TYPE_BUBBLE_DISCOUNT then
		return pg.child_site_option[slot0:getConfig(&quot;type_param&quot;)[1]].param[1]
	end

	assert(nil, &quot;not discount type:&quot; .. slot0.id)
end

slot0.GetDiscountRatio = function(slot0)
	if slot0:getConfig(&quot;type&quot;) == uv0.TYPE_BUBBLE_DISCOUNT then
		return slot0:getConfig(&quot;type_param&quot;)[2]
	end

	assert(nil, &quot;not discount type:&quot; .. slot0.id)
end

slot0.InDiscountTime = function(slot0, slot1)
	if slot0:getConfig(&quot;type&quot;) == uv0.TYPE_BUBBLE_DISCOUNT then
		return EducateHelper.InTime(slot1, slot0.startTime, EducateHelper.GetTimeAfterWeeks(slot1, slot0:getConfig(&quot;type_param&quot;)[3]))
	end

	assert(nil, &quot;not discount type:&quot; .. slot0.id)
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>