<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>camerartmgr.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>camerartmgr.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">pg = pg or {}
pg.CameraRTMgr = singletonClass(&quot;CameraRTMgr&quot;)
slot0 = pg.CameraRTMgr
slot0.CONFIG = {
	rotX = 0,
	height = 500,
	posX = -500,
	autoResize = false,
	posY = 200,
	rotY = 0,
	camera = &quot;TestCamera&quot;,
	rotZ = 0,
	id = 1,
	width = 500
}

slot0.Init = function(slot0, slot1)
	print(&quot;initializing camera rt manager...&quot;)

	slot0.mainTransform = pg.UIMgr.GetInstance().UIMain.transform
	slot0.uiList = {}

	slot1()
end

slot0.Bind = function(slot0, slot1, slot2)
	assert(slot1 and slot2)

	slot1.RenderCamera = slot2

	setActive(slot2, true)
end

slot0.Clean = function(slot0, slot1)
	assert(slot1)
	slot1:CleanRenderTexture()
	setActive(slot1.RenderCamera, false)

	slot1.RenderCamera = nil
end

slot0.Create = function(slot0, slot1)
	slot2 = GameObject.Find(&quot;[RTCamera]&quot;)

	assert(slot2, &quot;不存在[RTCamera]&quot;)

	slot3 = findTF(slot2, slot1.camera)

	assert(slot3, &quot;不存在相机&quot; .. slot1.camera)

	slot4 = &quot;CameraRTUI&quot; .. slot1.id
	slot5 = GameObject(slot4)
	slot6 = GetOrAddComponent(slot5, &quot;CameraRTUI&quot;)

	setActive(slot3, true)
	setParent(slot5, slot0.mainTransform, false)
	setSizeDelta(slot5, {
		x = slot1.width,
		y = slot1.height
	})
	setLocalEulerAngles(slot5, {
		x = slot1.rotX,
		y = slot1.rotY,
		z = slot1.rotZ
	})
	setAnchoredPosition(slot5, {
		x = slot1.posX,
		y = slot1.posY
	})

	slot6.autoResize = slot1.autoResize
	slot6.RenderCamera = slot3:GetComponent(typeof(Camera))
	slot0.uiList[slot4] = slot5

	return slot5
end

slot0.ShowOrHide = function(slot0, slot1, slot2)
	if not slot0.uiList[&quot;CameraRTUI&quot; .. slot1] then
		warning(&quot;不存在CameraRTUI id=&quot; .. slot1)

		return
	end

	setActive(slot4:GetComponent(&quot;CameraRTUI&quot;).RenderCamera, slot2)
	setActive(slot4, slot2)
end

slot0.Destroy = function(slot0, slot1)
	if not slot0.uiList[&quot;CameraRTUI&quot; .. slot1] then
		warning(&quot;不存在CameraRTUI id=&quot; .. slot1)

		return
	end

	setActive(slot3:GetComponent(&quot;CameraRTUI&quot;).RenderCamera, false)
	Destroy(slot3)

	slot0.uiList[slot2] = nil
end
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>