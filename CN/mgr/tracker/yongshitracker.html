<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>yongshitracker.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>yongshitracker.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;YongshiTracker&quot;)

slot0.Ctor = function(slot0)
	slot0.mapping = {
		[TRACKING_ROLE_CREATE] = &quot;role_create&quot;,
		[TRACKING_ROLE_LOGIN] = &quot;role_login&quot;,
		[TRACKING_TUTORIAL_COMPLETE_1] = &quot;tutorial_complete_1&quot;,
		[TRACKING_TUTORIAL_COMPLETE_2] = &quot;tutorial_complete_2&quot;,
		[TRACKING_TUTORIAL_COMPLETE_3] = &quot;tutorial_complete_3&quot;,
		[TRACKING_TUTORIAL_COMPLETE_4] = &quot;tutorial_complete_4&quot;,
		[TRACKING_USER_LEVELUP] = &quot;user_levelup&quot;,
		[TRACKING_ROLE_LOGOUT] = &quot;role_logout&quot;,
		[TRACKING_PURCHASE_FIRST] = &quot;purchase_first&quot;,
		[TRACKING_PURCHASE_CLICK] = &quot;purchase_click&quot;,
		[TRACKING_PURCHASE_CLICK_MONTHLYCARD] = &quot;purchase_click_monthlycard&quot;,
		[TRACKING_PURCHASE_CLICK_GIFTBAG] = &quot;purchase_click_giftbag&quot;,
		[TRACKING_PURCHASE_CLICK_DIAMOND] = &quot;purchase_click_diamond&quot;,
		[TRACKING_2D_RETENTION] = &quot;2d_retention&quot;,
		[TRACKING_7D_RETENTION] = &quot;7d_retention&quot;
	}
end

slot0.Tracking = function(slot0, slot1, slot2, slot3)
	if slot0.mapping[slot1] == nil then
		return
	end

	if slot1 == TRACKING_USER_LEVELUP then
		originalPrint(&quot;tracking lvl:&quot; .. slot3)

		slot5 = YongshiUserEvent.New(slot4)

		slot5:AddParam(&quot;lvl&quot;, slot3)
		slot5:AddParam(&quot;user_id&quot;, slot2)
		pg.SdkMgr.GetInstance():UserEventUpload(slot5)
	elseif slot1 == TRACKING_PURCHASE_CLICK then
		slot5 = YongshiUserEvent.New(slot4)

		slot5:AddParam(&quot;user_id&quot;, slot2)
		pg.SdkMgr.GetInstance():UserEventUpload(slot5)
	elseif slot1 == TRACKING_PURCHASE_FIRST then
		originalPrint(&quot;order id : &quot; .. slot3)

		slot5 = YongshiUserEvent.New(slot4)

		slot5:AddParam(&quot;user_id&quot;, slot2)
		slot5:AddParam(&quot;order_id&quot;, slot3)
		pg.SdkMgr.GetInstance():UserEventUpload(slot5)
	elseif slot1 == TRACKING_2D_RETENTION or slot1 == TRACKING_7D_RETENTION then
		slot5 = YongshiUserEvent.New(slot4)

		slot5:AddParam(&quot;user_id&quot;, slot2)
		pg.SdkMgr.GetInstance():UserEventUpload(slot5)
	elseif slot1 == TRACKING_ROLE_LOGIN then
		slot5 = YongshiUserEvent.New(slot4)

		slot5:AddParam(&quot;user_id&quot;, slot2)
		slot5:AddParam(&quot;airi_uid&quot;, pg.SdkMgr.GetInstance().airi_uid)
		pg.SdkMgr.GetInstance():UserEventUpload(slot5)
	else
		slot5 = YongshiUserEvent.New(slot4)

		slot5:AddParam(&quot;user_id&quot;, slot2)
		pg.SdkMgr.GetInstance():UserEventUpload(slot5)
	end
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>