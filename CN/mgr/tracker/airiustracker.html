<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>airiustracker.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>airiustracker.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;AiriUSTracker&quot;)
slot0.DEV_TOKEN = &quot;2KtJzaeLzGnPUhtOY4-LYw&quot;
slot0.ANDROID_LINK_ID = &quot;DE31AE06D3CE21EE3A9E1A1BCEB506E1&quot;
slot0.IOS_LINK_ID = &quot;F7FE029D3F957A107D358D2BB93CA7E2&quot;

slot0.Ctor = function(slot0)
	slot0.mapping = {
		[TRACKING_ROLE_CREATE] = &quot;role_create&quot;,
		[TRACKING_ROLE_LOGIN] = &quot;role_login&quot;,
		[TRACKING_TUTORIAL_COMPLETE_1] = &quot;tutorial_complete_1&quot;,
		[TRACKING_TUTORIAL_COMPLETE_2] = &quot;tutorial_complete_2&quot;,
		[TRACKING_TUTORIAL_COMPLETE_3] = &quot;tutorial_complete_3&quot;,
		[TRACKING_TUTORIAL_COMPLETE_4] = &quot;tutorial_complete_4&quot;,
		[TRACKING_USER_LEVELUP] = &quot;user_levelup&quot;,
		[TRACKING_ROLE_LOGOUT] = &quot;role_logout&quot;,
		[TRACKING_PURCHASE_FIRST] = &quot;purchase_first&quot;,
		[TRACKING_PURCHASE_CLICK] = &quot;purchase_click&quot;,
		[TRACKING_PURCHASE_CLICK_MONTHLYCARD] = &quot;purchase_click_monthlycard&quot;,
		[TRACKING_PURCHASE_CLICK_GIFTBAG] = &quot;purchase_click_giftbag&quot;,
		[TRACKING_PURCHASE_CLICK_DIAMOND] = &quot;purchase_click_diamond&quot;,
		[TRACKING_PURCHASE] = &quot;purchase&quot;,
		[TRACKING_2D_RETENTION] = &quot;2d_retention&quot;,
		[TRACKING_7D_RETENTION] = &quot;7d_retention&quot;
	}
end

slot0.Tracking = function(slot0, slot1, slot2, slot3)
	if slot0.mapping[slot1] == nil then
		return
	end

	if slot1 == TRACKING_USER_LEVELUP then
		originalPrint(&quot;tracking lvl:&quot; .. slot3)

		slot5 = AiriUserEvent.New(slot4)

		slot5:AddParam(&quot;lvl&quot;, slot3)
		slot5:AddParam(&quot;user_id&quot;, slot2)
		pg.SdkMgr.GetInstance():UserEventUpload(slot5)
	elseif slot1 == TRACKING_PURCHASE_CLICK then
		slot5 = AiriUserEvent.New(slot4)

		slot5:AddParam(&quot;user_id&quot;, slot2)
		pg.SdkMgr.GetInstance():UserEventUpload(slot5)
	elseif slot1 == TRACKING_PURCHASE_FIRST then
		originalPrint(&quot;order id : &quot; .. slot3)

		slot5 = AiriUserEvent.New(slot4)

		slot5:AddParam(&quot;user_id&quot;, slot2)
		slot5:AddParam(&quot;order_id&quot;, slot3)
		pg.SdkMgr.GetInstance():UserEventUpload(slot5)
	elseif slot1 == TRACKING_2D_RETENTION or slot1 == TRACKING_7D_RETENTION then
		slot5 = AiriUserEvent.New(slot4)

		slot5:AddParam(&quot;user_id&quot;, slot2)
		pg.SdkMgr.GetInstance():UserEventUpload(slot5)
	elseif slot1 ~= TRACKING_PURCHASE then
		slot5 = AiriUserEvent.New(slot4)

		slot5:AddParam(&quot;user_id&quot;, slot2)
		pg.SdkMgr.GetInstance():UserEventUpload(slot5)
	end

	if pg.SdkMgr.GetInstance():GetChannelUID() == &quot;0&quot; then
		if slot1 == TRACKING_PURCHASE_CLICK then
			slot0:YS_S2S(uv0.DEV_TOKEN, &quot;DE31AE06D3CE21EE3A9E1A1BCEB506E1&quot;, &quot;Azur Lane (Android) S2S_purchase_click&quot;, &quot;&quot;, tostring(slot0:transMoney(pg.pay_data_display[slot3].money)), pg.SdkMgr.GetInstance():GetDeviceId(), tostring(pg.TimeMgr.GetInstance():GetServerTime()))
		elseif slot1 == TRACKING_PURCHASE_CLICK_MONTHLYCARD then
			slot0:YS_S2S(uv0.DEV_TOKEN, &quot;DE31AE06D3CE21EE3A9E1A1BCEB506E1&quot;, &quot;Azur Lane (Android) S2S_purchase_click_monthlycard&quot;, &quot;&quot;, tostring(slot0:transMoney(pg.pay_data_display[slot3].money)), pg.SdkMgr.GetInstance():GetDeviceId(), tostring(pg.TimeMgr.GetInstance():GetServerTime()))
		elseif slot1 == TRACKING_PURCHASE_CLICK_DIAMOND then
			slot0:YS_S2S(uv0.DEV_TOKEN, &quot;DE31AE06D3CE21EE3A9E1A1BCEB506E1&quot;, &quot;Azur Lane (Android) S2S_purchase_click_diamond&quot;, &quot;&quot;, tostring(slot0:transMoney(pg.pay_data_display[slot3].money)), pg.SdkMgr.GetInstance():GetDeviceId(), tostring(pg.TimeMgr.GetInstance():GetServerTime()))
		elseif slot1 == TRACKING_PURCHASE_CLICK_GIFTBAG then
			slot0:YS_S2S(uv0.DEV_TOKEN, &quot;DE31AE06D3CE21EE3A9E1A1BCEB506E1&quot;, &quot;Azur Lane (Android) S2S_purchase_click_giftbag&quot;, &quot;&quot;, tostring(slot0:transMoney(pg.pay_data_display[slot3].money)), pg.SdkMgr.GetInstance():GetDeviceId(), tostring(pg.TimeMgr.GetInstance():GetServerTime()))
		elseif slot1 == TRACKING_PURCHASE then
			slot0:YS_S2S(uv0.DEV_TOKEN, &quot;DE31AE06D3CE21EE3A9E1A1BCEB506E1&quot;, &quot;Azur Lane (Android) S2S_purchase&quot;, &quot;&quot;, tostring(slot0:transMoney(pg.pay_data_display[slot3].money)), pg.SdkMgr.GetInstance():GetDeviceId(), tostring(pg.TimeMgr.GetInstance():GetServerTime()))
		end
	elseif slot1 == TRACKING_PURCHASE_CLICK then
		YS2S.S2S(uv0.DEV_TOKEN, &quot;F7FE029D3F957A107D358D2BB93CA7E2&quot;, &quot;Azur Lane (iOS) S2S_purchase_click&quot;, &quot;&quot;, tostring(slot0:transMoney(pg.pay_data_display[slot3].money)), pg.SdkMgr.GetInstance():GetDeviceId(), tostring(pg.TimeMgr.GetInstance():GetServerTime()))
	elseif slot1 == TRACKING_PURCHASE_CLICK_MONTHLYCARD then
		YS2S.S2S(uv0.DEV_TOKEN, &quot;F7FE029D3F957A107D358D2BB93CA7E2&quot;, &quot;Azur Lane (iOS) S2S_purchase_click_monthlycard&quot;, &quot;&quot;, tostring(slot0:transMoney(pg.pay_data_display[slot3].money)), pg.SdkMgr.GetInstance():GetDeviceId(), tostring(pg.TimeMgr.GetInstance():GetServerTime()))
	elseif slot1 == TRACKING_PURCHASE_CLICK_DIAMOND then
		YS2S.S2S(uv0.DEV_TOKEN, &quot;F7FE029D3F957A107D358D2BB93CA7E2&quot;, &quot;Azur Lane (iOS) S2S_purchase_click_diamond&quot;, &quot;&quot;, tostring(slot0:transMoney(pg.pay_data_display[slot3].money)), pg.SdkMgr.GetInstance():GetDeviceId(), tostring(pg.TimeMgr.GetInstance():GetServerTime()))
	elseif slot1 == TRACKING_PURCHASE_CLICK_GIFTBAG then
		YS2S.S2S(uv0.DEV_TOKEN, &quot;F7FE029D3F957A107D358D2BB93CA7E2&quot;, &quot;Azur Lane (iOS) S2S_purchase_click_giftbag&quot;, &quot;&quot;, tostring(slot0:transMoney(pg.pay_data_display[slot3].money)), pg.SdkMgr.GetInstance():GetDeviceId(), tostring(pg.TimeMgr.GetInstance():GetServerTime()))
	elseif slot1 == TRACKING_PURCHASE then
		YS2S.S2S(uv0.DEV_TOKEN, &quot;F7FE029D3F957A107D358D2BB93CA7E2&quot;, &quot;Azur Lane (iOS) S2S_purchase&quot;, &quot;&quot;, tostring(slot0:transMoney(pg.pay_data_display[slot3].money)), pg.SdkMgr.GetInstance():GetDeviceId(), tostring(pg.TimeMgr.GetInstance():GetServerTime()))
	end

	originalPrint(&quot;track done.&quot;)
end

slot0.YS_S2S = function(slot0, slot1, slot2, slot3, slot4, slot5, slot6, slot7)
	slot8 = pg.SdkMgr.GetInstance():GetChannelUID() == &quot;0&quot;
	slot9 = &quot;https://www.googleadservices.com/pagead/conversion/app/1.0?&quot;
	slot10 = {
		dev_token = slot1,
		link_id = slot2,
		app_event_type = &quot;custom&quot;,
		app_event_name = slot3
	}

	if slot4 then
		slot10.app_event_data = slot4
	end

	slot10.rdid = slot6

	if slot8 then
		slot10.id_type = &quot;advertisingid&quot;
	else
		slot10.id_type = &quot;idfa&quot;
	end

	slot10.lat = &quot;0&quot;
	slot10.app_version = Application.version
	slot10.os_version = SystemInfo.operatingSystem
	slot10.sdk_version = &quot;1.9.5r6&quot;
	slot10.timestamp = slot7 .. &quot;.000001&quot;
	slot10.value = slot5
	slot10.currency_code = &quot;USD&quot;

	for slot14, slot15 in pairs(slot10) do
		slot9 = slot9 .. slot14 .. &quot;=&quot; .. slot15 .. &quot;&amp;&quot;
	end

	originalPrint(slot9)

	slot12 = VersionMgr.Inst

	slot12:WebRequest(string.sub(slot9, 1, -2), function (slot0, slot1)
		originalPrint(&quot;code:&quot; .. slot0 .. &quot; content:&quot; .. slot1)
	end)
end

slot0.transMoney = function(slot0, slot1)
	return string.format(&quot;%.2f&quot;, slot1 / 100)
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>