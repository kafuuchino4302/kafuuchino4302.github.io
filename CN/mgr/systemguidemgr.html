<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>systemguidemgr.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>systemguidemgr.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">pg = pg or {}
pg.SystemGuideMgr = singletonClass(&quot;SystemGuideMgr&quot;)
slot0 = pg.SystemGuideMgr
slot1 = nil

slot0.Init = function(slot0, slot1)
	uv0 = require(&quot;GameCfg.guide.newguide.SSG001&quot;)

	slot1()
end

slot2 = function(slot0)
	if getProxy(PlayerProxy) then
		return pg.NewStoryMgr.GetInstance():IsPlayed(slot0)
	end

	return false
end

slot3 = function(slot0)
	if slot0 then
		slot0()
	end
end

slot4 = function(slot0, slot1, slot2)
	if pg.SeriesGuideMgr.GetInstance():isRunning() then
		uv0(slot2)

		return
	end

	if uv1(slot0) then
		uv0(slot2)

		return
	end

	if not pg.NewGuideMgr.GetInstance():CanPlay() then
		uv0(slot2)

		return
	end

	if slot0 == &quot;SYG001&quot; then
		pg.TrackerMgr.GetInstance():Tracking(TRACKING_TUTORIAL_COMPLETE_2)
	elseif slot0 == &quot;SYG003&quot; then
		pg.TrackerMgr.GetInstance():Tracking(TRACKING_TUTORIAL_COMPLETE_3)
	elseif slot0 == &quot;SYG006&quot; then
		pg.TrackerMgr.GetInstance():Tracking(TRACKING_TUTORIAL_COMPLETE_4)
	end

	pg.m02:sendNotification(GAME.STORY_UPDATE, {
		storyId = slot0
	})
	pg.NewGuideMgr.GetInstance():Play(slot0, slot1, slot2)
end

slot0.Play = function(slot0, slot1, slot2)
	if IsUnityEditor and not ENABLE_GUIDE then
		if slot2 then
			slot2()
		end

		return
	end

	if slot1.exited then
		return
	end

	if not uv0[slot1.__cname] then
		uv1(slot2)

		return
	end

	if not _.detect(slot3, function (slot0)
		return not uv0(slot0.id) and slot0.condition(uv1)
	end) then
		uv1(slot2)

		return
	end

	uv3(slot4.id, slot4.args(slot1), slot2)
end

slot0.PlayChapter = function(slot0, slot1, slot2)
	if slot1.id == 1160002 then
		slot0:PlayByGuideId(&quot;NG0011&quot;, nil, slot2)
	elseif slot1:isTypeDefence() then
		slot0:PlayByGuideId(&quot;NG0016&quot;, nil, slot2)
	else
		existCall(slot2)
	end
end

slot0.PlayByGuideId = function(slot0, slot1, slot2, slot3)
	uv0(slot1, slot2, slot3)
end

slot0.FixGuide = function(slot0, slot1)
	if not uv0(&quot;FixGuide&quot;) then
		uv1(&quot;FixGuide&quot;)
		slot1()
	end
end

slot0.PlayDailyLevel = function(slot0, slot1)
	if not uv0(&quot;NG0015&quot;) then
		pg.m02:sendNotification(GAME.STORY_UPDATE, {
			storyId = &quot;NG0015&quot;
		})
		slot1()
	end
end

slot0.PlayCommander = function(slot0)
	slot1 = {
		&quot;ZHIHUIMIAO2&quot;,
		&quot;NG006&quot;,
		&quot;NG007&quot;,
		&quot;ZHIHUIMIAO3&quot;,
		&quot;NG008&quot;,
		&quot;ZHIHUIMIAO4&quot;,
		&quot;NG009&quot;
	}

	if not LOCK_CATTERY then
		table.insert(slot1, &quot;NG0029&quot;)
	end

	slot3 = {}
	slot4 = nil

	for slot8, slot9 in ipairs(_.select(slot1, function (slot0)
		return not uv0(slot0)
	end)) do
		table.insert(slot3, function (slot0)
			if uv0 == &quot;NG006&quot; and table.getCount(getProxy(CommanderProxy):getData()) &gt;= 1 or uv0 == &quot;NG007&quot; and getProxy(BagProxy):getItemCountById(20012) &lt; 1 or uv0 == &quot;NG008&quot; and getProxy(CommanderProxy):getBoxes()[1]:getState() ~= CommanderBox.STATE_FINISHED or uv0 == &quot;NG009&quot; and table.getCount(getProxy(CommanderProxy):getData()) ~= 1 then
				pg.m02:sendNotification(GAME.STORY_UPDATE, {
					storyId = uv0
				})
				slot0()
			elseif uv0 == &quot;ZHIHUIMIAO2&quot; or uv0 == &quot;ZHIHUIMIAO3&quot; or uv0 == &quot;ZHIHUIMIAO4&quot; then
				pg.NewStoryMgr.GetInstance():Play(uv0, slot0, true)
			elseif uv0 == &quot;NG0029&quot; then
				if uv1 == &quot;NG009&quot; then
					uv2(uv0, {
						1
					}, slot0)
				else
					uv2(uv0, {
						2
					}, slot0)
				end
			else
				uv1 = uv0

				uv2(uv0, {}, slot0)
			end
		end)
	end

	seriesAsync(slot3)
end

slot0.PlayGuildAssaultFleet = function(slot0, slot1)
	slot0:PlayByGuideId(&quot;GNG001&quot;, {}, slot1)
end
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>