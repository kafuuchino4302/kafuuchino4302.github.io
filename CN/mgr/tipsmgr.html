<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tipsmgr.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>tipsmgr.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">pg = pg or {}
slot0 = pg
slot0.TipsMgr = singletonClass(&quot;TipsMgr&quot;)
slot1 = slot0.TipsMgr

slot1.Ctor = function(slot0)
	slot0._go = nil
end

slot1.Init = function(slot0, slot1)
	print(&quot;initializing tip manager...&quot;)

	slot0._count = 0
	slot0._tipTable = {}

	LoadAndInstantiateAsync(&quot;ui&quot;, &quot;TipPanel&quot;, function (slot0)
		uv0._go = slot0

		uv0._go:SetActive(false)
		uv0._go.transform:SetParent(GameObject.Find(&quot;Overlay/UIOverlay&quot;).transform, false)

		uv0._tips = uv0._go.transform:Find(&quot;toolTip&quot;)
		uv0._picTips = uv0._go.transform:Find(&quot;toolPicTip&quot;)
		uv0._grid = uv0._go.transform:Find(&quot;Grid&quot;)

		uv1()
	end, true)
end

slot1.ShowTips = function(slot0, slot1, slot2, slot3)
	slot4 = uv0.CriMgr.GetInstance()

	slot4:PlaySoundEffect_V3(slot3 or SFX_UI_TIP)
	slot0._go.transform:SetAsLastSibling()
	SetActive(slot0._go, true)

	slot0._count = slot0._count + 1
	slot4 = cloneTplTo(slot0._tips, slot0._grid)

	setText(slot4.transform:Find(&quot;Text&quot;), &quot;&lt;color=&quot; .. (slot2 or &quot;white&quot;) .. &quot;&gt;&quot; .. slot1 .. &quot;&lt;/color&gt;&quot;)

	slot4.transform.localScale = Vector3(0, 0.1, 1)

	LeanTween.scale(slot4, Vector3(1.8, 0.1, 1), 0.1):setUseEstimatedTime(true)
	LeanTween.scale(slot4, Vector3(1.1, 1.1, 1), 0.1):setDelay(0.1):setUseEstimatedTime(true)

	slot6 = function(slot0, slot1)
		slot2 = GetOrAddComponent(slot0, &quot;CanvasGroup&quot;)

		Timer.New(function ()
			if IsNil(uv0) then
				return
			end

			LeanTween.scale(uv0, Vector3(0.1, 1.5, 1), 0.1):setUseEstimatedTime(true):setOnComplete(System.Action(function ()
				LeanTween.scale(uv0, Vector3.zero, 0.1):setUseEstimatedTime(true):setOnComplete(System.Action(function ()
					Destroy(uv0)

					for slot3, slot4 in pairs(uv1._tipTable) do
						if slot4 == uv0 then
							table.remove(uv1._tipTable, slot3)
						end
					end

					uv1._count = uv1._count - 1

					if uv1._count == 0 then
						SetActive(uv1._go, false)
					end
				end))
			end))
		end, 3):Start()
	end

	if slot0._count &lt;= 3 then
		slot0._tipTable[slot0._count] = slot4

		slot6(slot4, slot0._count)
	else
		Destroy(slot0._tipTable[1])
		table.remove(slot0._tipTable, 1)

		slot0._count = 3
		slot0._tipTable[3] = slot4

		slot6(slot4, slot0._count)
	end
end

slot1.ShowPicTips = function(slot0, slot1, slot2, slot3, slot4)
	slot5 = uv0.CriMgr.GetInstance()

	slot5:PlaySoundEffect_V3(slot4 or SFX_UI_TIP)
	slot0._go.transform:SetAsLastSibling()
	SetActive(slot0._go, true)

	slot0._count = slot0._count + 1

	setText(cloneTplTo(slot0._picTips, slot0._grid).transform:Find(&quot;Text&quot;), &quot;&lt;color=&quot; .. (slot3 or &quot;white&quot;) .. &quot;&gt;\&quot;&quot; .. slot1 .. &quot;\&quot; x&quot; .. slot2 .. &quot;&lt;/color&gt;&quot;)

	slot7 = function(slot0)
		slot1 = GetOrAddComponent(slot0, &quot;CanvasGroup&quot;)
		slot1.alpha = 1
		slot2 = LeanTween.alphaCanvas(slot1, 0, 5):setUseEstimatedTime(true):setOnComplete(System.Action(function ()
			Destroy(uv0)

			for slot3, slot4 in pairs(uv1._tipTable) do
				if slot4 == uv0 then
					table.remove(uv1._tipTable, slot3)
				end
			end

			uv1._count = uv1._count - 1

			if uv1._count == 0 then
				SetActive(uv1._go, false)
			end
		end))
	end

	if slot0._count &lt;= 3 then
		slot0._tipTable[slot0._count] = slot5

		slot7(slot5)
	else
		Destroy(slot0._tipTable[1])
		table.remove(slot0._tipTable, 1)

		slot0._count = 3
		slot0._tipTable[3] = slot5

		slot7(slot5)
	end
end
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>