<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>poolplural.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>poolplural.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = require(&quot;Mgr/Pool/PoolUtil&quot;)
slot1 = class(&quot;PoolPlural&quot;)
slot2 = &quot;UnityEngine.GameObject&quot;

slot1.Ctor = function(slot0, slot1, slot2)
	if not getmetatable(slot1) or slot3[&quot;.name&quot;] ~= uv0 then
		warning(&quot;Poolplural should use gameobject as prefab not transform &quot; .. (slot1 and slot1.name or &quot;NIL&quot;))
	end

	slot0.prefab = slot1
	slot0.capacity = slot2
	slot0.index = 0
	slot0.items = {}
	slot0.balance = 0
end

slot1.Enqueue = function(slot0, slot1, slot2)
	slot0.balance = slot0.balance - 1

	if slot2 or slot0.capacity &lt;= #slot0.items then
		uv0.Destroy(slot1)

		return true
	else
		table.insert(slot0.items, slot1)

		return false
	end
end

slot1.Dequeue = function(slot0)
	slot0.balance = slot0.balance + 1
	slot1 = nil

	while IsNil(slot1) and #slot0.items &gt; 0 do
		slot1 = table.remove(slot0.items)
	end

	if IsNil(slot1) then
		slot1 = slot0:NewItem()
	end

	return slot1
end

slot1.NewItem = function(slot0)
	return Object.Instantiate(slot0.prefab)
end

slot1.AllReturned = function(slot0)
	return slot0.balance == 0
end

slot1.ClearPrefab = function(slot0)
	uv0.Destroy(slot0.prefab)

	slot0.prefab = nil
end

slot1.ClearItems = function(slot0)
	for slot4 = 1, #slot0.items do
		uv0.Destroy(slot0.items[slot4])
	end

	table.clear(slot0.items)

	slot0.balance = 0
end

slot1.Clear = function(slot0)
	slot0:ClearPrefab()
	slot0:ClearItems()
end

return slot1
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>