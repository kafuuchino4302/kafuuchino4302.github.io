<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cardpuzzlehandcardbutton.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>cardpuzzlehandcardbutton.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">ys = ys or {}
slot0 = ys
slot1 = slot0.Battle.BattleConfig
slot0.Battle.CardPuzzleHandCardButton = class(&quot;CardPuzzleHandCardButton&quot;)
slot2 = slot0.Battle.CardPuzzleHandCardButton
slot2.__name = &quot;CardPuzzleHandCardButton&quot;

slot2.Ctor = function(slot0, slot1)
	slot0._go = slot1

	slot0:init()
end

slot2.SetCardInfo = function(slot0, slot1)
	slot0._cardInfo = slot1

	slot0:updateCardView()
end

slot2.UpdateTotalCost = function(slot0)
	if slot0._cardInfo then
		setText(slot0._costTxt, slot0._cardInfo:GetTotalCost())
	end
end

slot2.ConfigCallback = function(slot0, slot1)
	slot0._callback = slot1
end

slot2.init = function(slot0)
	slot0._btnTF = slot0._go.transform
	slot0._icon = slot0._btnTF:Find(&quot;skill_icon/unfill&quot;)
	slot0._costTxt = slot0._btnTF:Find(&quot;cost/cost_label&quot;)
	slot0._cardName = slot0._btnTF:Find(&quot;name&quot;)
	slot0._cardType = slot0._btnTF:Find(&quot;icon_bg&quot;)
	slot0._cardTypeList = {}

	for slot4 = 1, 3 do
		table.insert(slot0._cardTypeList, slot0._cardType:Find(&quot;card_type_&quot; .. slot4))
	end

	slot0._cardRarity = slot0._btnTF:Find(&quot;bg&quot;)
	slot0._cardRarityList = {}

	for slot4 = 0, 4 do
		table.insert(slot0._cardRarityList, slot0._cardRarity:Find(&quot;rarity_&quot; .. slot4))
	end

	slot0._tag = slot0._btnTF:Find(&quot;tag&quot;)

	GetComponent(slot0._btnTF, &quot;EventTriggerListener&quot;):AddPointUpFunc(function ()
		if uv0._cardInfo then
			uv0._callback(uv0._cardInfo)
		end
	end)
end

slot2.updateCardView = function(slot0)
	if slot0._cardInfo then
		setActive(slot0._btnTF, true)
		setText(slot0._costTxt, slot0._cardInfo:GetTotalCost())
		setText(slot0._cardName, slot0._cardInfo:GetCardTemplate().name)
		setText(slot0._tag, &quot;词缀功能TODO&quot;)

		slot1 = slot0._cardInfo:GetRarity()
		slot2 = slot0._cardInfo:GetCardType()

		for slot6, slot7 in ipairs(slot0._cardRarityList) do
			setActive(slot7, slot6 == slot1 + 1)
		end

		for slot6, slot7 in ipairs(slot0._cardTypeList) do
			setActive(slot7, slot6 == slot2)
		end

		GetImageSpriteFromAtlasAsync(&quot;skillicon/&quot; .. slot0._cardInfo:GetIconID(), &quot;&quot;, slot0._icon)
	else
		setActive(slot0._btnTF, false)
	end
end

slot2.Dispose = function(slot0)
end
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>