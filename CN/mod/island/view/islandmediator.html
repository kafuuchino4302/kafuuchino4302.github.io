<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>islandmediator.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>islandmediator.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;IslandMediator&quot;, import(&quot;.base.IslandBaseMediator&quot;))
slot0.SET_NAME = &quot;IslandMediator:SET_NAME&quot;
slot0.ON_EDIT_MANIFESTO = &quot;IslandMediator:ON_EDIT_MANIFESTO&quot;
slot0.GET_PROSPERITY_AWARD = &quot;IslandMediator:GET_PROSPERITY_AWARD&quot;
slot0.ON_UPGRADE_INVENTORY = &quot;IslandMediator:ON_UPGRADE_INVENTORY&quot;
slot0.ON_REPLACE_ORDER = &quot;IslandMediator:ON_REPLACE_ORDER&quot;
slot0.ON_SUBMIT_ORDER = &quot;IslandMediator:ON_SUBMIT_ORDER&quot;
slot0.ON_GET_ORDER_EXP_AWARD = &quot;IslandMediator:ON_GET_ORDER_EXP_AWARD&quot;
slot0.ON_GEN_NEW_ORDER = &quot;IslandMediator:ON_GEN_NEW_ORDER&quot;
slot0.ON_USE_ITEM = &quot;IslandMediator:ON_USE_ITEM&quot;
slot0.ON_ACCEPT_TASK = &quot;IslandMediator.ON_ACCEPT_TASK&quot;
slot0.ON_SUBMIT_TASK = &quot;IslandMediator.ON_SUBMIT_TASK&quot;
slot0.ON_SUBMIT_TASK_ONE_STEP = &quot;IslandMediator.ON_SUBMIT_TASK_ONE_STEP&quot;
slot0.ON_CLIENT_UPDATE_TASK = &quot;IslandMediator.ON_CLIENT_UPDATE_TASK&quot;
slot0.ON_SET_TRACE_ID = &quot;IslandMediator.ON_SET_TRACE_ID&quot;
slot0.ON_RESET_SEASON = &quot;IslandMediator.ON_RESET_SEASON&quot;
slot0.ON_GET_SEASON_RANK = &quot;IslandMediator.ON_GET_SEASON_RANK&quot;
slot0.ON_CONVERT_SEASON_PT = &quot;IslandMediator.ON_CONVERT_SEASON_PT&quot;
slot0.ON_CONVERT_SEASON_PT_4_OVERFLOW = &quot;IslandMediator.ON_CONVERT_SEASON_PT_4_OVERFLOW&quot;
slot0.ON_GET_SEASON_PT_AWARD = &quot;IslandMediator.ON_GET_SEASON_PT_AWARD&quot;
slot0.OPEN_RESTAURANT = &quot;IslandMediator.OPEN_RESTAURANT&quot;
slot0.CLOSE_RESTAURANT = &quot;IslandMediator.CLOSE_RESTAURANT&quot;
slot0.GET_ACHIEVEMENT_AWARD = &quot;IslandMediator.GET_ACHIEVEMENT_AWARD&quot;
slot0.OPEN_SHIP_INDEX = &quot;IslandMediator:OPEN_SHIP_INDEX&quot;
slot0.UPGRADE_SKILL = &quot;IslandMediator:UPGRADE_SKILL&quot;
slot0.ON_GIVE_GIFT = &quot;IslandMediator:ON_GIVE_GIFT&quot;
slot0.ON_UNLOCK_BUILDING = &quot;IslandMediator:ON_UNLOCK_BUILDING&quot;
slot0.ON_UPGRADE_BUILDING = &quot;IslandMediator:ON_UPGRADE_BUILDING&quot;
slot0.ON_GET_COMMISSION_AWARD = &quot;IslandMediator:ON_GET_COMMISSION_AWARD&quot;
slot0.ON_CHANGE_COMMISSION_FORMULA = &quot;IslandMediator:ON_CHANGE_COMMISSION_FORMULA&quot;
slot0.ON_CHANGE_COMMISSION_SHIP = &quot;IslandMediator:ON_CHANGE_COMMISSION_SHIP&quot;
slot0.ON_KICK_PLAYER = &quot;IslandMediator:ON_KICK_PLAYER&quot;
slot0.SAVE_AGORA = &quot;IslandMediator:SAVE_AGORA&quot;
slot0.SAVE_AGORA_THEME = &quot;IslandMediator:SAVE_AGORA_THEME&quot;
slot0.DEL_AGORA_THEME = &quot;IslandMediator:DEL_AGORA_THEME&quot;
slot0.UPGRADE_AGORA = &quot;IslandMediator:UPGRADE_AGORA&quot;
slot0.INVITE_SHIP = &quot;IslandMediator:INVITE_SHIP&quot;
slot0.ONE_KEY = &quot;IslandMediator:ONE_KEY&quot;
slot0.ON_UNLOCK_TECH = &quot;IslandMediator:ON_UNLOCK_TECH&quot;
slot0.ON_FINISH_TECH_IMMD = &quot;IslandMediator:ON_FINISH_TECH_IMMD&quot;
slot0.SET_ORDER_TENDENCY = &quot;IslandMediator:SET_ORDER_TENDENCY&quot;
slot0.SUBMIT_SHIP_ORDER_ITME = &quot;IslandMediator:SUBMIT_SHIP_ORDER_ITME&quot;
slot0.SUBMIT_SHIP_ORDER_ITME_ONEKEY = &quot;IslandMediator:SUBMIT_SHIP_ORDER_ITME_ONEKEY&quot;
slot0.GET_SHIP_ORDER_AWARD = &quot;IslandMediator:GET_SHIP_ORDER_AWARD&quot;
slot0.UNLOKC_SHIP_ORDER = &quot;IslandMediator:UNLOKC_SHIP_ORDER&quot;
slot0.OPEN_PAGE = &quot;IslandMediator:OPEN_PAGE&quot;
slot0.OPEN_SHOP = &quot;IslandMediator:OPEN_SHOP&quot;
slot0.GET_SHOP_DATA = &quot;IslandMediator:GET_SHOP_DATA&quot;
slot0.BUY_COMMODITY = &quot;IslandMediator:BUY_COMMODITY&quot;
slot0.REFRESH_SHOP_BY_PLAYER = &quot;IslandMediator:REFRESH_SHOP_BY_PLAYER&quot;
slot0.USE_SHIP_EXP_BOOK = &quot;IslandMediator:USE_SHIP_EXP_BOOK&quot;
slot0.SHIP_BREAKOUT = &quot;IslandMediator:SHIP_BREAKOUT&quot;
slot0.SHIP_ATTR_UPGRADE = &quot;IslandMediator:SHIP_ATTR_UPGRADE&quot;
slot0.SHIP_ATTR_LIMIT_UNLOCK = &quot;IslandMediator:SHIP_ATTR_LIMIT_UNLOCK&quot;
slot0.SHIP_SKILL_UPGRADE = &quot;IslandMediator:SHIP_SKILL_UPGRADE&quot;
slot0.START_DELEGATION = &quot;IslandMediator:START_DELEGATION&quot;
slot0.STOP_DELEGATION = &quot;IslandMediator:STOP_DELEGATION&quot;
slot0.GET_DELEGATION_AWARD = &quot;IslandMediator:GET_DELEGATION_AWARD&quot;
slot0.USE_SPEEDUPCARD = &quot;IslandMediator:USE_SPEEDUPCARD&quot;
slot0.SIGNIN = &quot;IslandMediator.SIGNIN&quot;
slot0.SELECT_GIFT = &quot;IslandMediator.SELECT_GIFT&quot;
slot0.SIGN_IN_INVITATION = &quot;IslandMediator.SIGN_IN_INVITATION&quot;
slot0.SHARE_SIGNIN = &quot;IslandMediator:SHARE_SIGNIN&quot;
slot0.ENTER_ISLAND = &quot;IslandMediator:ENTER_ISLAND&quot;
slot0.ENTER_ISLAND_BY_CODE = &quot;IslandMediator:ENTER_ISLAND_BY_CODE&quot;
slot0.ADD_FRIEND = &quot;IslandMediator:ADD_FRIEND&quot;
slot0.REMOVE_FRIEND = &quot;IslandMediator:REMOVE_FRIEND&quot;
slot0.SEARCH_FRIEND = &quot;IslandMediator:SEARCH_FRIEND&quot;
slot0.BATCH_GET_FRIEND = &quot;IslandMediator:BATCH_GET_FRIEND&quot;
slot0.ADD_WHITE_LIST = &quot;IslandMediator:ADD_WHITE_LIST&quot;
slot0.ADD_BLACK_LIST = &quot;IslandMediator:ADD_BLACK_LIST&quot;
slot0.REMOVE_BLACK_LIST = &quot;IslandMediator:REMOVE_BLACK_LIST&quot;
slot0.REMOVE_WHITE_LIST = &quot;IslandMediator:REMOVE_WHITE_LIST&quot;
slot0.SET_ACCESS_FLAG = &quot;IslandMediator:SET_ACCESS_FLAG&quot;
slot0.REFRESH_INVITECODE = &quot;IslandMediator:REFRESH_INVITECODE&quot;
slot0.KICK_ALL_VISITOR = &quot;IslandMediator:KICK_ALL_VISITOR&quot;
slot0.GET_RESUME = &quot;IslandMediator:GET_RESUME&quot;
slot0.GET_GIFT_TAG = &quot;IslandMediator:GET_GIFT_TAG&quot;
slot0.GET_THEMES = &quot;IslandMediator:GET_THEMES&quot;
slot0.PREVIEW_FURNITURE = &quot;IslandMediator:PREVIEW_FURNITURE&quot;
slot0.REFUSE_REQUEST = &quot;IslandMediator:REFUSE_REQUEST&quot;
slot0.ACCEPT_REQUEST = &quot;IslandMediator:ACCEPT_REQUEST&quot;

slot0._register = function(slot0)
	slot0:bind(uv0.ACCEPT_REQUEST, function (slot0, slot1)
		uv0:sendNotification(GAME.FRIEND_ACCEPT_REQUEST, slot1)
	end)
	slot0:bind(uv0.REFUSE_REQUEST, function (slot0, slot1)
		uv0:sendNotification(GAME.FRIEND_REJECT_REQUEST, slot1)
	end)
	slot0:bind(uv0.PREVIEW_FURNITURE, function (slot0, slot1)
		slot2 = uv0.viewComponent:GetIsland()
		slot5, slot6 = _IslandCore:GetView().player:LastGroundedPosition()

		slot2:SetMapId(IslandConst.AGORA_MAP_ID)
		uv0:UnloadScene()

		_IslandCore = IslandPreviewCore.New(uv0.viewComponent:GetPoolMgr(), slot2, true, slot1, {
			mapId = slot2:GetMapId(),
			position = slot5,
			rotation = slot6
		})
	end)
	slot0:bind(uv0.GET_THEMES, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_GET_AGORA_THEME, {
			callback = slot1
		})
	end)
	slot0:bind(uv0.GET_GIFT_TAG, function (slot0, slot1, slot2)
		uv0:sendNotification(GAME.ISLAND_GET_GIFT_TAG, {
			list = slot1,
			callback = slot2
		})
	end)
	slot0:bind(uv0.GET_RESUME, function (slot0, slot1, slot2)
		uv0:sendNotification(GAME.ISLAND_GET_FRIEND_RESUME, {
			id = slot1,
			callback = slot2
		})
	end)
	slot0:bind(uv0.KICK_ALL_VISITOR, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_ACCESS_OP, {
			op = IslandConst.ACCESS_OP_KICK,
			list = slot1
		})
	end)
	slot0:bind(uv0.ADD_BLACK_LIST, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_ACCESS_OP, {
			op = IslandConst.ACCESS_OP_ADD_BLACKLIST,
			list = {
				slot1
			}
		})
	end)
	slot0:bind(uv0.REMOVE_BLACK_LIST, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_ACCESS_OP, {
			op = IslandConst.ACCESS_OP_DEL_BLACKLIST,
			list = {
				slot1
			}
		})
	end)
	slot0:bind(uv0.ADD_WHITE_LIST, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_ACCESS_OP, {
			op = IslandConst.ACCESS_OP_ADD_WHITELIST,
			list = {
				slot1
			}
		})
	end)
	slot0:bind(uv0.REMOVE_WHITE_LIST, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_ACCESS_OP, {
			op = IslandConst.ACCESS_OP_DEL_WHITELIST,
			list = {
				slot1
			}
		})
	end)
	slot0:bind(uv0.REFRESH_INVITECODE, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_REFRESH_INVITECODE, {
			auto = slot1
		})
	end)
	slot0:bind(uv0.SET_ACCESS_FLAG, function (slot0, slot1, slot2)
		uv0:sendNotification(GAME.ISLAND_SET_ACCESS_TYPE, {
			openList = slot1,
			closeList = slot2
		})
	end)
	slot0:bind(uv0.BATCH_GET_FRIEND, function (slot0, slot1, slot2)
		uv0:sendNotification(GAME.BATCH_GET_FRIEND, {
			list = slot1,
			callback = slot2
		})
	end)
	slot0:bind(uv0.SEARCH_FRIEND, function (slot0, slot1, slot2)
		uv0:sendNotification(GAME.FRIEND_SEARCH, {
			type = slot1,
			keyword = slot2
		})
	end)
	slot0:bind(uv0.ADD_FRIEND, function (slot0, slot1, slot2)
		uv0:sendNotification(GAME.FRIEND_SEND_REQUEST, {
			id = slot1,
			msg = slot2
		})
	end)
	slot0:bind(uv0.REMOVE_FRIEND, function (slot0, slot1)
		uv0:sendNotification(GAME.FRIEND_DELETE, slot1)
	end)
	slot0:bind(uv0.ENTER_ISLAND, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_ENTER, {
			id = slot1
		})
	end)
	slot0:bind(uv0.ENTER_ISLAND_BY_CODE, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_ENTER, {
			code = slot1
		})
	end)
	slot0:bind(uv0.SHARE_SIGNIN, function (slot0)
		uv0:sendNotification(GAME.ISLAND_SIGN_SHARE_SIGNIN)
	end)
	slot0:bind(uv0.SIGN_IN_INVITATION, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_SIGN_IN_INVITATION, {
			list = slot1
		})
	end)
	slot0:bind(uv0.SELECT_GIFT, function (slot0, slot1, slot2)
		uv0:sendNotification(GAME.ISLAND_SELECT_GIFT, {
			islandId = slot1,
			pos = slot2
		})
	end)
	slot0:bind(uv0.SIGNIN, function (slot0)
		uv0.viewComponent:PlayStory({
			name = &quot;ISLANDSTORY100&quot;,
			callback = function ()
				uv0:sendNotification(GAME.ISLAND_SIGN_IN)
			end
		})
	end)
	slot0:bind(uv0.INVITE_SHIP, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_INVITE_SHIP, {
			id = slot1
		})
	end)
	slot0:bind(uv0.SHIP_SKILL_UPGRADE, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_SHIP_SKILL_UPGRADE, {
			id = slot1
		})
	end)
	slot0:bind(uv0.SHIP_ATTR_LIMIT_UNLOCK, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLNAD_SHIP_ATTR_LIMIT_UNLOCK, {
			id = slot1
		})
	end)
	slot0:bind(uv0.SHIP_ATTR_UPGRADE, function (slot0, slot1, slot2, slot3)
		uv0:sendNotification(GAME.ISLNAD_SHIP_ATTR_UPGRADE, {
			id = slot1,
			attrKy = slot2,
			list = slot3
		})
	end)
	slot0:bind(uv0.SHIP_BREAKOUT, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_SHIP_BREAKOUT, {
			id = slot1
		})
	end)
	slot0:bind(uv0.USE_SHIP_EXP_BOOK, function (slot0, slot1, slot2)
		uv0:sendNotification(GAME.ISLAND_USE_SHIP_EXP_BOOK, {
			id = slot1,
			list = slot2
		})
	end)
	slot0:bind(uv0.OPEN_PAGE, function (slot0, slot1, slot2)
		uv0.viewComponent:OpenPage(_G[slot1], slot2 and unpack(slot2))
	end)
	slot0:bind(uv0.UNLOKC_SHIP_ORDER, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_SHIP_ORDER_OP, {
			op = IslandShipOrder.OP_TYPE_UNLOCK,
			slotId = slot1
		})
	end)
	slot0:bind(uv0.GET_SHIP_ORDER_AWARD, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_SHIP_ORDER_OP, {
			op = IslandShipOrder.OP_TYPE_GET_AWARD,
			slotId = slot1
		})
	end)
	slot0:bind(uv0.SUBMIT_SHIP_ORDER_ITME, function (slot0, slot1, slot2)
		uv0:sendNotification(GAME.ISLAND_SHIP_ORDER_OP, {
			op = IslandShipOrder.OP_TYPE_LOADUP,
			slotId = slot1,
			index = slot2
		})
	end)
	slot0:bind(uv0.SUBMIT_SHIP_ORDER_ITME_ONEKEY, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_SHIP_ORDER_OP, {
			op = IslandShipOrder.OP_TYPE_LOADUP_ALL,
			slotId = slot1
		})
	end)
	slot0:bind(uv0.SET_ORDER_TENDENCY, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_SET_ORDER_TENDENCY, {
			value = slot1
		})
	end)
	slot0:bind(uv0.ONE_KEY, function (slot0)
		uv0:sendNotification(GAME.ISLAND_GET_OVERFLOW_ITEM)
	end)
	slot0:bind(uv0.UPGRADE_AGORA, function (slot0)
		uv0:sendNotification(GAME.ISLAND_UPGRADE_AGORA)
	end)
	slot0:bind(uv0.SAVE_AGORA, function (slot0, slot1, slot2, slot3)
		uv0:sendNotification(GAME.ISLAND_SAVE_AGORA, {
			list = slot1,
			floorList = slot2,
			tileList = slot3
		})
	end)
	slot0:bind(uv0.SAVE_AGORA_THEME, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_SAVE_AGORA_THEME, {
			themeData = slot1
		})
	end)
	slot0:bind(uv0.DEL_AGORA_THEME, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_DEL_AGORA_THEME, {
			id = slot1
		})
	end)
	slot0:bind(uv0.ON_KICK_PLAYER, function (slot0, slot1, slot2)
		uv0:sendNotification(GAME.ISLAND_ACCESS_OP, {
			op = slot1,
			list = {
				slot2
			}
		})
	end)
	slot0:bind(uv0.ON_GIVE_GIFT, function (slot0, slot1, slot2, slot3)
		uv0:sendNotification(GAME.ISLAND_GIVE_GIFT, {
			id = slot3,
			itemId = slot1
		})
	end)
	slot0:bind(uv0.UPGRADE_SKILL, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_UPGRADE_SKILL, {
			id = slot1
		})
	end)
	slot0:bind(uv0.OPEN_SHIP_INDEX, function (slot0, slot1)
		uv0:addSubLayers(Context.New({
			viewComponent = IslandShipIndexLayer,
			mediator = CustomIndexMediator,
			data = slot1
		}))
	end)
	slot0:bind(uv0.ON_USE_ITEM, function (slot0, slot1, slot2)
		uv0:sendNotification(GAME.ISLAND_USE_ITEM, {
			id = slot1,
			count = slot2
		})
	end)
	slot0:bind(uv0.ON_GEN_NEW_ORDER, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_GEN_NEW_ORDER, {
			slotId = slot1
		})
	end)
	slot0:bind(uv0.ON_GET_ORDER_EXP_AWARD, function (slot0, slot1, slot2)
		uv0:sendNotification(GAME.ISLAND_GET_ORDER_EXP_AWARD, {
			level = slot1,
			callback = slot2
		})
	end)
	slot0:bind(uv0.ON_REPLACE_ORDER, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_REPLACE_ORDER, {
			slotId = slot1
		})
	end)
	slot0:bind(uv0.ON_SUBMIT_ORDER, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_SUBMIT_ORDER, {
			slotId = slot1
		})
	end)
	slot0:bind(uv0.ON_UPGRADE_INVENTORY, function (slot0)
		uv0:sendNotification(GAME.ISLAND_UPGRADE_INVENTORY)
	end)
	slot0:bind(uv0.GET_PROSPERITY_AWARD, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_PROSPERITY_AWARD, {
			level = slot1
		})
	end)
	slot0:bind(uv0.ON_EDIT_MANIFESTO, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_SET_MANIFESTO, {
			manifesto = slot1
		})
	end)
	slot0:bind(uv0.SET_NAME, function (slot0, slot1, slot2)
		uv0:sendNotification(GAME.ISLAND_SET_NAME, {
			name = slot1,
			currency = slot2
		})
	end)
	slot0:bind(uv0.ON_ACCEPT_TASK, function (slot0, slot1, slot2)
		uv0:sendNotification(GAME.ISLAND_ACCEPT_TASK, {
			taskIds = slot1,
			callback = slot2
		})
	end)
	slot0:bind(uv0.ON_SUBMIT_TASK, function (slot0, slot1, slot2)
		uv0:sendNotification(GAME.ISLAND_SUBMIT_TASK, {
			taskId = slot1,
			callback = slot2
		})
	end)
	slot0:bind(uv0.ON_SUBMIT_TASK_ONE_STEP, function (slot0, slot1, slot2)
		uv0:sendNotification(GAME.ISLAND_SUBMIT_TASK_ONE_STEP, {
			taskIds = slot1,
			callback = slot2
		})
	end)
	slot0:bind(uv0.ON_CLIENT_UPDATE_TASK, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_UPDATE_TASK, {
			taskId = slot1.taskId,
			targetId = slot1.targetId,
			progress = slot1.progress
		})
	end)
	slot0:bind(uv0.ON_SET_TRACE_ID, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_SET_TRACE_TASK, {
			traceId = slot1
		})
	end)
	slot0:bind(uv0.ON_RESET_SEASON, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_RESET_SEASON, {
			callback = slot1
		})
	end)
	slot0:bind(uv0.ON_GET_SEASON_RANK, function (slot0, slot1, slot2)
		uv0:sendNotification(GAME.ISLAND_GET_SEASON_RANK, {
			type = slot1,
			seasonId = slot2
		})
	end)
	slot0:bind(uv0.ON_CONVERT_SEASON_PT, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_CONVERT_SEASON_PT, {
			type = 1,
			list = slot1
		})
	end)
	slot0:bind(uv0.ON_CONVERT_SEASON_PT_4_OVERFLOW, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_CONVERT_SEASON_PT, {
			type = 2,
			list = slot1
		})
	end)
	slot0:bind(uv0.ON_GET_SEASON_PT_AWARD, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_GET_SEASON_PT_AWARD, {
			pt = slot1
		})
	end)
	slot0:bind(uv0.OPEN_RESTAURANT, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_OPEN_RESTAURANT, {
			restId = slot1.restId,
			ships = slot1.ships,
			commodities = slot1.commodities
		})
	end)
	slot0:bind(uv0.CLOSE_RESTAURANT, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_CLOSE_RESTAURANT, {
			restId = slot1
		})
	end)
	slot0:bind(uv0.GET_ACHIEVEMENT_AWARD, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_GET_ACHV_AWARD, {
			ids = slot1
		})
	end)
	slot0:bind(uv0.ON_UNLOCK_BUILDING, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_UNLOCK_BUILDING, {
			buildingId = slot1
		})
	end)
	slot0:bind(uv0.ON_UPGRADE_BUILDING, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_UPGRADE_BUILDING, {
			buildingId = slot1
		})
	end)
	slot0:bind(uv0.ON_GET_COMMISSION_AWARD, function (slot0, slot1, slot2)
		uv0:sendNotification(GAME.ISLAND_GET_COMMISSION_AWARD, {
			buildingId = slot1,
			commissionId = slot2
		})
	end)
	slot0:bind(uv0.ON_CHANGE_COMMISSION_FORMULA, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_CHANGE_COMMISSION_FORMULA, {
			buildingId = slot1.buildingId,
			commissionId = slot1.commissionId,
			formulaId = slot1.formulaId,
			callback = slot1.callback
		})
	end)
	slot0:bind(uv0.ON_CHANGE_COMMISSION_SHIP, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_CHANGE_COMMISSION_SHIP, {
			buildingId = slot1.buildingId,
			commissionId = slot1.commissionId,
			shipId = slot1.shipId,
			callback = slot1.callback
		})
	end)
	slot0:bind(uv0.ON_UNLOCK_TECH, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_UNLOCK_TECH, {
			techId = slot1
		})
	end)
	slot0:bind(uv0.ON_FINISH_TECH_IMMD, function (slot0, slot1, slot2)
		uv0:sendNotification(GAME.ISLAND_FINISH_TECH_IMMD, {
			techId = slot1,
			callback = slot2
		})
	end)
	slot0:bind(uv0.START_DELEGATION, function (slot0, slot1, slot2, slot3, slot4, slot5)
		uv0:sendNotification(GAME.ISLAND_START_DELEGATION, {
			build_id = slot1,
			area_id = slot2,
			ship_id = slot3,
			formula_id = slot4,
			num = slot5
		})
	end)
	slot0:bind(uv0.STOP_DELEGATION, function (slot0, slot1, slot2)
		uv0:sendNotification(GAME.ISLAND_FINISH_DELEGATION, {
			build_id = slot1,
			area_id = slot2
		})
	end)
	slot0:bind(uv0.GET_DELEGATION_AWARD, function (slot0, slot1, slot2, slot3, slot4)
		uv0:sendNotification(GAME.ISLAND_GET_DELEGATION_AWARD, {
			build_id = slot1,
			area_id = slot2,
			type = slot3,
			callback = slot4
		})
	end)
	slot0:bind(uv0.USE_SPEEDUPCARD, function (slot0, slot1, slot2, slot3, slot4)
		uv0:sendNotification(GAME.ISLAND_USESPEEDUPCARD, {
			build_id = slot1,
			area_id = slot2,
			item_id = slot3,
			num = slot4
		})
	end)
	slot0:bind(uv0.GET_SHOP_DATA, function (slot0, slot1, slot2)
		uv0:sendNotification(GAME.ISLAND_SHOP_OP, {
			operation = IslandConst.SHOP_GET_DATA,
			shopId = slot1,
			refreshAll = slot2
		})
	end)
	slot0:bind(uv0.BUY_COMMODITY, function (slot0, slot1)
		uv0:sendNotification(GAME.ISLAND_SHOP_OP, {
			operation = IslandConst.SHOP_BUY_COMMODITY,
			commodityList = slot1
		})
	end)
	slot0:bind(uv0.REFRESH_SHOP_BY_PLAYER, function (slot0, slot1, slot2)
		uv0:sendNotification(GAME.ISLAND_SHOP_OP, {
			operation = IslandConst.SHOP_REFRESH_BY_PLAYER,
			shopId = slot1,
			resource = slot2
		})
	end)
end

slot0._listNotificationInterests = function(slot0)
	return {
		GAME.ISLAND_SET_NAME_DONE,
		GAME.ISLAND_PROSPERITY_AWARD_DONE,
		GAME.ISLAND_UPGRADE_DONE,
		GAME.ISLAND_SET_MANIFESTO_DONE,
		GAME.ISLAND_UPGRADE_INVENTORY_DONE,
		GAME.ISLAND_SUBMIT_ORDER_DONE,
		GAME.ISLAND_REPLACE_ORDER_DONE,
		GAME.ISLAND_GET_ORDER_EXP_AWARD_DONE,
		GAME.ISLAND_GET_RANDOM_REFRESH_TASK_DONE,
		GAME.ISLAND_ACCEPT_TASK_DONE,
		GAME.ISLAND_UPDATE_TASK_DONE,
		GAME.ISLAND_SUBMIT_TASK_DONE,
		GAME.ISLAND_SUBMIT_TASK_ONE_STEP_DONE,
		GAME.ISLAND_SET_TRACE_TASK_DONE,
		GAME.ISLAND_GET_ACHV_AWARD_DONE,
		GAME.ISLAND_RESET_SEASON_DONE,
		GAME.ISLAND_GET_SEASON_PT_AWARD_DONE,
		GAME.ISLAND_CONVERT_SEASON_PT_DONE,
		GAME.ISLAND_GET_SEASON_RANK_DONE,
		GAME.ISLAND_OPEN_RESTAURANT_DONE,
		GAME.ISLAND_CLOSE_RESTAURANT_DONE,
		GAME.ISLAND_UPGRADE_SKILL_DONE,
		GAME.ISLAND_USE_ITEM_DONE,
		GAME.ISLAND_GET_OVERFLOW_ITEM_DOME,
		GAME.ISLAND_SET_ORDER_TENDENCY_DONE,
		GAME.ISLAND_UNLOCK_TECH_DONE,
		GAME.ISLAND_FINISH_TECH_IMMD_DONE,
		GAME.ISLAND_SHIP_ORDER_OP_DONE,
		GAME.ISLAND_START_DELEGATION_DONE,
		GAME.ISLAND_GET_DELEGATION_AWARD_DONE,
		GAME.ISLAND_FINISH_DELEGATION_DONE,
		GAME.ISLAND_USESPEEDUPCARD_DONE,
		GAME.ISLAND_USE_SHIP_EXP_BOOK_DONE,
		GAME.ISLAND_SHIP_BREAKOUT_DONE,
		GAME.ISLNAD_SHIP_ATTR_UPGRADE_DONE,
		GAME.ISLNAD_SHIP_ATTR_LIMIT_UNLOCK_DONE,
		GAME.ISLAND_SHIP_SKILL_UPGRADE_DONE,
		GAME.ISLAND_INVITE_SHIP_DONE,
		GAME.ISLAND_GIVE_GIFT_DONE,
		GAME.ISLAND_SELECT_GIFT_DONE,
		GAME.ISLAND_SIGN_IN_INVITATION_DONE,
		GAME.FRIEND_SEARCH_DONE,
		GAME.ISLAND_REFRESH_INVITECODE_DONE,
		GAME.ISLAND_QUEUE_UP,
		GAME.ISLAND_ACCESS_OP_DONE,
		GAME.FRIEND_DELETE_DONE,
		GAME.ISLAND_SIGN_SHARE_SIGNIN_DONE,
		GAME.ISLAND_SIGN_IN_DONE,
		NotificationProxy.FRIEND_REQUEST_REMOVED,
		NotificationProxy.FRIEND_REQUEST_ADDED,
		PlayerProxy.UPDATED,
		GAME.ISLAND_SHOP_OP_DONE,
		GAME.ISLAND_DROPMAIN_AWARD,
		GAME.ISLAND_CHANGE_COMMANDER_DRESS_DONE,
		GAME.ISLAND_SEND_ROLE_DRESS_DONE,
		GAME.ISLAND_SEND_ROLE_DRESS_READ_DONE,
		GAME.ISLAND_BUY_ROLE_SKIN_COLOR_DONE,
		GAME.ISLAND_BUY_ROLE_DRESS_COLOR_DONE
	}
end

slot0._handleNotification = function(slot0, slot1)
	slot3 = slot1:getBody()

	if slot1:getName() == GAME.ISLAND_PROSPERITY_AWARD_DONE or slot2 == GAME.ISLAND_CONVERT_SEASON_PT_DONE or slot2 == GAME.ISLAND_GET_SEASON_PT_AWARD_DONE or slot2 == GAME.ISLAND_GET_ACHV_AWARD_DONE or slot2 == GAME.ISLAND_FINISH_TECH_DONE or slot2 == GAME.ISLAND_FINISH_TECH_IMMD_DONE or slot2 == GAME.ISLAND_SUBMIT_TASK_ONE_STEP_DONE or slot2 == GAME.ISLAND_SHIP_ORDER_OP_DONE or slot2 == GAME.ISLAND_GET_DELEGATION_AWARD_DONE then
		slot0.viewComponent:HandleAwardDisplay(slot3.dropData, slot3.callback)
	elseif slot2 == GAME.ISLAND_SELECT_GIFT_DONE then
		slot0.viewComponent:HandleAwardDisplay(slot3.dropData, slot3.callback, IslandAwardDisplayPage.TYPE_SIGN_GIFT)
	elseif slot2 == GAME.ISLAND_INVITE_SHIP_DONE then
		slot0:HandleShipDisplay(slot3.ship)
	elseif slot2 == GAME.ISLAND_SHIP_BREAKOUT_DONE then
		slot0:HandleShipBreakOutAwardDisplay(slot3)
	elseif slot2 == GAME.ISLAND_GET_ORDER_EXP_AWARD_DONE then
		seriesAsync({
			function (slot0)
				uv0.viewComponent:emit(IslandOrderPage.ON_UPDADE, {
					level = uv1.level,
					callback = slot0
				})
			end
		}, function ()
			uv0.viewComponent:HandleAwardDisplay(uv1.dropData, uv1.callback)
		end)
	elseif slot2 == GAME.ISLAND_GET_OVERFLOW_ITEM_DOME then
		if #slot3.awards &lt;= 0 then
			return
		end

		slot0.viewComponent:DisplayAward({
			title = i18n(&quot;island_item_transfer&quot;),
			awards = slot3.awards,
			callback = slot3.callback
		})
	elseif slot2 == GAME.ISLAND_SET_MANIFESTO_DONE then
		pg.TipsMgr.GetInstance():ShowTips(i18n(&quot;island_set_manifesto_success&quot;))
	elseif slot2 == GAME.ISLAND_SUBMIT_ORDER_DONE then
		seriesAsync({
			function (slot0)
				uv0.viewComponent:HandleAwardDisplay(uv1.dropData, slot0)
			end
		}, function ()
			if uv0.callback then
				uv0.callback()
			end

			uv1.viewComponent:emit(IslandScene.ON_CHECK_ORDER_EXP_AWARD)
		end)
	elseif slot2 == GAME.ISLAND_ACCEPT_TASK_DONE then
		slot0:HandleTaskAccepted(slot3)
	elseif slot2 == GAME.ISLAND_SUBMIT_TASK_DONE then
		seriesAsync({
			function (slot0)
				slot1, slot2 = IslandTask.GetSubmitPlayInfo(uv0.taskId)

				if slot1 == 1 then
					uv1.viewComponent:PlayStory({
						name = slot2,
						callback = slot0
					})
				elseif slot1 == 2 then
					uv1.viewComponent:OnPlayPerformance({
						name = slot2,
						callback = slot0
					})
				else
					slot0()
				end
			end
		}, function ()
			slot1 = uv1.viewComponent

			slot1:HandleAwardDisplay(uv0.dropData, function ()
				if pg.island_task[uv0.taskId].com_page ~= &quot;&quot; and slot0[1] then
					uv1.viewComponent:OpenPage(_G[slot0[1]], slot0[2] and unpack(slot0[2]))
				end

				existCall(uv0.callback)
			end)
		end)
	elseif slot2 == GAME.ISLAND_SET_TRACE_TASK_DONE then
		slot0.viewComponent:OnUpdateTrackTask(slot3.traceId)
	elseif slot2 == GAME.ISLAND_RESET_SEASON_DONE then
		seriesAsync({
			function (slot0)
				uv0.viewComponent:ShowMsgbox({
					hideNo = true,
					type = IslandMsgBox.TYPE_COMMON,
					content = i18n(&quot;island_season_reset&quot;),
					onHide = slot0
				})
			end
		}, function ()
			uv0.viewComponent:ShowMsgbox({
				type = IslandMsgBox.TYPE_SEASON_RESET,
				body = uv1
			})
		end)
	elseif slot2 == GAME.ISLAND_CLOSE_RESTAURANT_DONE then
		seriesAsync({
			function (slot0)
				if uv0.isUpgrade then
					uv1.viewComponent:OpenPage(IslandRestaurantUpgradePage, uv0, slot0)
				else
					slot0()
				end
			end,
			function (slot0)
				uv0.viewComponent:OpenPage(IslandRestaurantSettlePage, uv1, slot0)
			end
		}, function ()
			uv0.viewComponent:HandleAwardDisplay(uv1.dropData)
		end)
	elseif slot2 == GAME.ISLAND_DROPMAIN_AWARD then
		slot0.viewComponent:UpdateMainAwardReward({
			awards = slot3.dropData.awards
		})
	elseif slot2 == GAME.ISLAND_QUEUE_UP then
		slot0.viewComponent:ShowQueueUpMsgBox(slot3.id, slot3.pos)
	elseif slot2 == GAME.ISLAND_SIGN_IN_DONE then
		-- Nothing
	end
end

slot0.HandleTaskAccepted = function(slot0, slot1)
	slot2 = {}
	slot3 = getProxy(IslandProxy):GetIsland():GetTaskAgency()

	for slot7, slot8 in ipairs(slot1.taskIds) do
		if pg.island_task[slot8].rec_perform ~= &quot;&quot; then
			table.insert(slot2, function (slot0)
				uv0.viewComponent:PlayStory({
					name = uv1.rec_perform,
					callback = slot0
				})
			end)
		end

		if slot9.trigger_tips == 1 then
			table.insert(slot2, function (slot0)
				uv0.viewComponent:ShowTaskAcceptPage({
					taskId = uv1,
					callback = slot0
				})
			end)
		end

		if slot3:GetTask(slot8):IsFinish() and slot10:IsSubmitImmediately() then
			table.insert(slot2, function (slot0)
				pg.m02:sendNotification(GAME.ISLAND_SUBMIT_TASK, {
					taskId = uv0,
					callback = slot0
				})
			end)
		end
	end

	seriesAsync(slot2, function ()
		existCall(uv0.callback)
	end)
end

slot0.HandleShipBreakOutAwardDisplay = function(slot0, slot1)
	seriesAsync({
		function (slot0)
			uv0.viewComponent:DisplayAward({
				type = IslandAwardDisplayPage.TYPE_SHIP_BREAK,
				newShip = uv1.newShip,
				oldShip = uv1.oldShip,
				callback = slot0
			})
		end,
		function (slot0)
			onNextTick(slot0)
		end,
		function (slot0)
			if not uv0.isUnlockSkill then
				slot0()

				return
			end

			uv1.viewComponent:DisplayAward({
				type = IslandAwardDisplayPage.TYPE_SHIP_SKILL,
				skill = uv0.newShip:GetSkill(),
				ship = uv0.newShip,
				callback = slot0
			})
		end
	})
end

slot0.HandleShipDisplay = function(slot0, slot1)
	slot0.viewComponent:OpenPage(IslandGetShipPage, slot1)
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>