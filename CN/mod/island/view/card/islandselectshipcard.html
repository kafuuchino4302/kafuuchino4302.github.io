<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>islandselectshipcard.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>islandselectshipcard.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;IslandSelectShipCard&quot;)
slot0.SKILL_COLOR = {
	Color.NewHex(&quot;3DFF00&quot;),
	Color.NewHex(&quot;808080&quot;)
}

slot0.Ctor = function(slot0, slot1)
	slot0.go = slot1
	slot0.tf = slot1.transform
	slot0.selectedTF = slot0.tf:Find(&quot;selected&quot;)
	slot0.iconTF = slot0.tf:Find(&quot;icon&quot;)
	slot0.triedMaskTF = slot0.tf:Find(&quot;mask/tried&quot;)

	setText(slot0.triedMaskTF:Find(&quot;Text&quot;), i18n(&quot;island_ship_no_energy&quot;))

	slot0.workingMaskTF = slot0.tf:Find(&quot;mask/working&quot;)
	slot0.workingTextCom = slot0.workingMaskTF:Find(&quot;Text&quot;):GetComponent(&quot;Text&quot;)
	slot0.iconsTF = slot0.tf:Find(&quot;icons&quot;)
	slot0.skillTF = slot0.iconsTF:Find(&quot;skill/tpl&quot;)
	slot0.gradeTF = slot0.iconsTF:Find(&quot;grade&quot;)
	slot0.energySliderTF = slot0.tf:Find(&quot;energy_bar&quot;)
	slot0.energyTF = slot0.tf:Find(&quot;energy_bar/Text&quot;)
	slot0.nameTF = slot0.tf:Find(&quot;name&quot;)
	slot2 = slot0.tf
	slot0.levelTF = slot2:Find(&quot;level&quot;)
	slot0.attrTfList = {
		slot0.gradeTF:Find(&quot;SSS&quot;),
		slot0.gradeTF:Find(&quot;SS&quot;),
		slot0.gradeTF:Find(&quot;S&quot;),
		slot0.gradeTF:Find(&quot;A&quot;),
		slot0.gradeTF:Find(&quot;B&quot;),
		slot0.gradeTF:Find(&quot;C&quot;),
		slot0.gradeTF:Find(&quot;D&quot;),
		slot0.gradeTF:Find(&quot;E&quot;)
	}
	slot0.skillInuse = slot0.iconsTF:Find(&quot;skill/skill_bright&quot;)
	slot0.skillUnuse = slot0.iconsTF:Find(&quot;skill/skill_dark&quot;)
end

slot0.Update = function(slot0, slot1, slot2, slot3, slot4)
	slot0.ship = getProxy(IslandProxy):GetIsland():GetCharacterAgency():GetShipById(slot1)
	slot0.id = slot1
	slot0.attrType = slot2
	slot0.buildingId = slot3

	slot0:UpdateSelected(slot4)
	GetImageSpriteFromAtlasAsync(&quot;ShipYardIcon/&quot; .. IslandShip.StaticGetPrefab(slot0.id), &quot;&quot;, slot0.iconTF)

	slot6 = slot0.ship:GetAttrGrade(IslandShipAttr.ATTRS[slot0.attrType])

	for slot10, slot11 in ipairs(slot0.attrTfList) do
		if slot11 ~= &quot;&quot; then
			setActive(slot11, slot6 == slot10)
		end
	end

	slot7 = slot0.ship:GetName()

	setText(slot0.nameTF, slot0.ship:GetName())

	slot8 = slot0.ship:GetCurrentEnergy()
	slot9 = slot0.ship:GetMaxEnergy()

	setSlider(slot0.energySliderTF, 0, 1, slot8 / slot9)
	setText(slot0.energyTF, slot8 .. &quot;/&quot; .. slot9)
	setActive(slot0.workingMaskTF, slot0.ship:GetState() ~= IslandShip.STATE_NORMAL)

	slot11 = slot0.ship:GetSkill():IsEffectiveInPlace(slot0.buildingId)

	setActive(slot0.skillInuse, slot11)
	setActive(slot0.skillUnuse, not slot11)
end

slot0.UpdateSelected = function(slot0, slot1)
	slot0.selectedIds = slot1

	setActive(slot0.selectedTF, table.contains(slot0.selectedIds, slot0.id))
end

slot0.Dispose = function(slot0)
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>