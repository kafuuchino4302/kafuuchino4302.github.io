<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>islandaniamtionopcard.lua</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <h1>islandaniamtionopcard.lua</h1>
    <a href="index.html">返回主页</a>
    <pre><code class="language-lua">slot0 = class(&quot;IslandAniamtionOpCard&quot;)

slot0.Ctor = function(slot0, slot1)
	slot0._go = slot1
	slot0._tf = slot1.transform
	slot0.tipTr = slot0._tf:Find(&quot;tip&quot;)
	slot0.cutoffTr = slot0._tf:Find(&quot;cut_off &quot;)
	slot0.item1 = slot0._tf:Find(&quot;1/main&quot;)
	slot0.item2 = slot0._tf:Find(&quot;2/main&quot;)
	slot0.layoutElement = slot0._tf:GetComponent(typeof(LayoutElement))
	slot0.baseHeight = slot0.layoutElement.preferredHeight
	slot0.cutOffHeight = slot0.cutoffTr:GetComponent(typeof(LayoutElement)).preferredHeight
end

slot0.Update = function(slot0, slot1, slot2, slot3)
	slot4 = slot1[1]
	slot5 = slot1[2]
	slot0.firstId = slot4
	slot0.secondId = slot5

	slot0:UpdateItem(slot0.item1, slot4)
	slot0:UpdateItem(slot0.item2, slot5)
	slot0:UpdateSelected(slot2)
	setActive(slot0.tipTr, false)

	slot6 = slot4 and slot4 == slot3 or slot5 and slot5 == slot3

	setActive(slot0.cutoffTr, slot6)

	slot0.layoutElement.preferredHeight = slot6 and slot0.baseHeight + slot0.cutOffHeight or slot0.baseHeight
end

slot0.UpdateItem = function(slot0, slot1, slot2)
	setActive(slot1, slot2)

	if not slot2 then
		return
	end

	slot3 = pg.island_action[slot2]

	setText(slot1:Find(&quot;Text&quot;), slot3.name)
	setActive(slot1:Find(&quot;double&quot;), slot3.type == IslandConst.ANIMATION_OP_DOUBLE)

	if slot3.resource ~= slot0.resource then
		LoadImageSpriteAsync(&quot;island/IslandActionIcon/&quot; .. slot3.resource, slot1:Find(&quot;icon&quot;), true)

		slot0.resource = slot3.resource
	end
end

slot0.UpdateSelected = function(slot0, slot1)
	setActive(slot0.item1:Find(&quot;sel&quot;), slot0.firstId and slot1 == slot0.firstId)
	setActive(slot0.item2:Find(&quot;sel&quot;), slot0.secondId and slot1 == slot0.secondId)
end

slot0.Dispose = function(slot0)
end

return slot0
</code></pre>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lua.min.js"></script>
</body>
</html>